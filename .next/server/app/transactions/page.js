(()=>{var e={};e.id=220,e.ids=[220],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},58492:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d}),a(71668),a(84752),a(96560);var r=a(23191),s=a(88716),i=a(37922),n=a.n(i),o=a(95231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);a.d(t,l);let d=["",{children:["transactions",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,71668)),"/Users/mac/Desktop/Client projects/frecks-new/app/transactions/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,24697))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,84752)),"/Users/mac/Desktop/Client projects/frecks-new/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.bind(a,96560)),"/Users/mac/Desktop/Client projects/frecks-new/app/not-found.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,24697))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Users/mac/Desktop/Client projects/frecks-new/app/transactions/page.tsx"],u="/transactions/page",m={require:a,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/transactions/page",pathname:"/transactions",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},44406:(e,t,a)=>{Promise.resolve().then(a.bind(a,10567))},10567:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>w});var r=a(10326);a(17577);var s=a(35047),i=a(20108),n=a(38443),o=a(91664),l=a(77506),d=a(86333),c=a(71821),u=a(62881);let m=(0,u.Z)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),p=(0,u.Z)("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);var h=a(58407),x=a(24567),f=a(94001),g=a(76253),y=a(2453),b=a(90434);function w(){let{profile:e,loading:t,user:a}=(0,f.a)();(0,s.useRouter)();let{data:u,isLoading:w}=(0,i.a)({queryKey:["creator-balance",a?.id],queryFn:()=>(0,g.pj)(a.id),enabled:!!a?.id&&e?.role==="creator"}),{data:v,isLoading:j}=(0,i.a)({queryKey:["wallet-transactions",a?.id],queryFn:()=>(0,g.wY)(a.id),enabled:!!a?.id&&e?.role==="creator"}),{data:_,isLoading:k}=(0,i.a)({queryKey:["creator-withdrawals",a?.id],queryFn:()=>(0,g.z8)(a.id),enabled:!!a?.id&&e?.role==="creator"});if(t||w)return(0,r.jsxs)("div",{className:"min-h-screen bg-background",children:[r.jsx(h.default,{}),r.jsx("div",{className:"pt-20 min-h-screen flex items-center justify-center",children:r.jsx(l.Z,{className:"w-8 h-8 animate-spin"})}),r.jsx(x.Z,{})]});if(!a||!e||"creator"!==e.role)return null;let N=Number(u?.account_balance)||0,q=[...(v||[]).map(e=>({id:e.id,type:e.type,amount:e.amount,status:e.status,description:e.description,created_at:e.created_at,isWithdrawal:!1})),...(_||[]).map(e=>({id:e.id,type:"withdrawal",amount:-e.amount,status:e.status,description:`Withdrawal to ${e.bank_name} ${e.bank_account_number?.slice(-4)}`,created_at:e.created_at,isWithdrawal:!0,withdrawal:e}))].sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime());return(0,r.jsxs)("div",{className:"min-h-screen bg-background",children:[r.jsx(h.default,{}),r.jsx("main",{className:"pt-20 pb-12",children:r.jsx("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsxs)("div",{className:"max-w-5xl mx-auto",children:[(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx(b.default,{href:"/dashboard/creator",children:(0,r.jsxs)(o.z,{variant:"ghost",className:"gap-2 mb-4",children:[r.jsx(d.Z,{className:"w-4 h-4"}),"Back to Dashboard"]})}),r.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Transaction History"}),r.jsx("p",{className:"text-muted-foreground",children:"View all your earnings and withdrawals"})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-primary to-primary/80 rounded-2xl p-6 md:p-8 text-primary-foreground mb-8",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-white/20 flex items-center justify-center",children:r.jsx(c.Z,{className:"w-6 h-6"})}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm opacity-90",children:"Available Balance"}),(0,r.jsxs)("h2",{className:"text-3xl md:text-4xl font-bold",children:["₦",N.toLocaleString()]})]})]}),r.jsx("div",{className:"mt-6",children:r.jsx(b.default,{href:"/dashboard/creator?tab=withdraw",children:(0,r.jsxs)(o.z,{variant:"secondary",className:"gap-2",children:[r.jsx(m,{className:"w-4 h-4"}),"Request Withdrawal"]})})})]}),(0,r.jsxs)("div",{className:"bg-card rounded-2xl border border-border overflow-hidden",children:[r.jsx("div",{className:"p-4 md:p-6 border-b border-border",children:r.jsx("h3",{className:"text-lg font-bold",children:"All Transactions"})}),j||k?(0,r.jsxs)("div",{className:"p-12 text-center",children:[r.jsx(l.Z,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-primary"}),r.jsx("p",{className:"text-muted-foreground",children:"Loading transactions..."})]}):0===q.length?(0,r.jsxs)("div",{className:"p-12 text-center",children:[r.jsx(c.Z,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No transactions yet"}),r.jsx("p",{className:"text-muted-foreground",children:"Your transaction history will appear here once you start earning from events."})]}):r.jsx("div",{className:"divide-y divide-border",children:q.map(e=>{let t=e.amount>0,a=e.isWithdrawal;return r.jsx("div",{className:"p-4 md:p-6 hover:bg-muted/30 transition-colors",children:(0,r.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,r.jsxs)("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center shrink-0 ${t?"bg-green-500/10":"bg-orange-500/10"}`,children:t?r.jsx(p,{className:"w-5 h-5 text-green-600"}):r.jsx(m,{className:"w-5 h-5 text-orange-600"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-semibold mb-1 truncate",children:e.description||("earning"===e.type?"Event Earnings":"withdrawal"===e.type?"Withdrawal":e.type)}),r.jsx("p",{className:"text-sm text-muted-foreground",children:(0,y.WU)(new Date(e.created_at),"MMM d, yyyy • h:mm a")}),a&&e.withdrawal&&(0,r.jsxs)("div",{className:"mt-2",children:[r.jsx(n.C,{variant:"approved"===e.status||"completed"===e.status?"default":"pending"===e.status?"secondary":"destructive",className:"text-xs",children:e.status}),e.withdrawal.admin_note&&(0,r.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Note: ",e.withdrawal.admin_note]})]})]})]}),(0,r.jsxs)("div",{className:"text-right shrink-0",children:[(0,r.jsxs)("p",{className:`text-lg font-bold ${t?"text-green-600":"text-orange-600"}`,children:[t?"+":"","₦",Math.abs(e.amount).toLocaleString()]}),!a&&r.jsx(n.C,{variant:"completed"===e.status?"default":"pending"===e.status?"secondary":"destructive",className:"text-xs mt-1",children:e.status})]})]})},e.id)})})]})]})})}),r.jsx(x.Z,{})]})}},86333:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(62881).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},71821:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(62881).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},77506:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(62881).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},24567:(e,t,a)=>{"use strict";a.d(t,{Z:()=>m});var r=a(10326),s=a(90434),i=a(46226),n=a(62881);let o=(0,n.Z)("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]),l=(0,n.Z)("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]),d=(0,n.Z)("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),c=(0,n.Z)("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]);var u=a(91664);let m=({showNewsletter:e=!1})=>{let t={company:["About Us","Careers","Blog","Press"],support:["Help Center","Safety","Terms","Privacy"],venues:["Partner With Us","List Your Event","Pricing","Resources"]};return(0,r.jsxs)("footer",{id:"about",className:"bg-card border-t border-border",children:[e&&r.jsx("div",{className:"container mx-auto px-4 py-12",children:(0,r.jsxs)("div",{className:"bg-primary rounded-3xl p-8 md:p-12 text-center",children:[r.jsx("h3",{className:"text-2xl md:text-3xl font-bold text-primary-foreground mb-4",children:"Never Miss an Event! \uD83C\uDFAB"}),r.jsx("p",{className:"text-primary-foreground/80 mb-6 max-w-md mx-auto",children:"Subscribe to get notified about new events, exclusive deals, and early bird tickets."}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 max-w-md mx-auto",children:[r.jsx("input",{type:"email",placeholder:"Enter your email",className:"flex-1 px-5 py-3 rounded-full bg-primary-foreground/20 border border-primary-foreground/30 text-primary-foreground placeholder:text-primary-foreground/60 outline-none focus:ring-2 focus:ring-primary-foreground/50"}),r.jsx(u.z,{variant:"secondary",size:"lg",children:"Subscribe"})]})]})}),r.jsx("div",{className:"container mx-auto px-4 py-12",children:(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-8",children:[(0,r.jsxs)("div",{className:"col-span-2",children:[r.jsx(s.default,{href:"/",className:"flex items-center gap-2 mb-4 relative w-32 h-12",children:r.jsx(i.default,{src:"/logo.png",alt:"Frecks",fill:!0,className:"object-contain object-left"})}),r.jsx("p",{className:"text-muted-foreground mb-6 max-w-xs",children:"Your go-to platform for discovering and booking campus events. Made by students, for students."}),r.jsx("div",{className:"flex gap-3",children:[o,l,d,c].map((e,t)=>r.jsx("a",{href:"#",className:"w-10 h-10 rounded-full bg-muted flex items-center justify-center hover:bg-primary hover:text-primary-foreground transition-colors",children:r.jsx(e,{className:"w-5 h-5"})},t))})]}),(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"font-semibold mb-4",children:"Company"}),r.jsx("ul",{className:"space-y-2",children:t.company.map(e=>r.jsx("li",{children:r.jsx("a",{href:"#",className:"text-muted-foreground hover:text-primary transition-colors",children:e})},e))})]}),(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"font-semibold mb-4",children:"Support"}),r.jsx("ul",{className:"space-y-2",children:t.support.map(e=>r.jsx("li",{children:r.jsx("a",{href:"#",className:"text-muted-foreground hover:text-primary transition-colors",children:e})},e))})]}),(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"font-semibold mb-4",children:"For Venues"}),r.jsx("ul",{className:"space-y-2",children:t.venues.map(e=>r.jsx("li",{children:r.jsx("a",{href:"#",className:"text-muted-foreground hover:text-primary transition-colors",children:e})},e))})]})]})}),r.jsx("div",{className:"border-t border-border",children:r.jsx("div",{className:"container mx-auto px-4 py-6",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 text-sm text-muted-foreground",children:[r.jsx("p",{children:"\xa9 2026 Frecks. All rights reserved."}),r.jsx("p",{children:"Made with \uD83E\uDDE1 for students everywhere"})]})})})]})}},38443:(e,t,a)=>{"use strict";a.d(t,{C:()=>o});var r=a(10326);a(17577);var s=a(79360),i=a(51223);let n=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o({className:e,variant:t,...a}){return r.jsx("div",{className:(0,i.cn)(n({variant:t}),e),...a})}},76253:(e,t,a)=>{"use strict";a.d(t,{AW:()=>b,DK:()=>u,HG:()=>o,IP:()=>y,Q6:()=>p,Qn:()=>l,TX:()=>c,T_:()=>f,Y:()=>n,Y9:()=>_,ZD:()=>d,fX:()=>v,ks:()=>m,nk:()=>i,pj:()=>g,sN:()=>j,vw:()=>s,wY:()=>h,z8:()=>x,zk:()=>w});var r=a(2777);let s=async()=>{let e=new Date().toISOString(),{data:t,error:a}=await r.supabase.from("events").select("*, ticket_types(*)").eq("status","active").gte("date",e).order("created_at",{ascending:!1});if(a)throw a;return t},i=async e=>{let t=new Date().toISOString(),a=r.supabase.from("events").select("*, ticket_types(*), creator:users!events_creator_id_fkey(school)").eq("status","active").gte("date",t);if(e.search&&e.search.trim()){let t=e.search.trim().replace(/%/g,"\\%").replace(/_/g,"\\_");a=a.or(`title.ilike.%${t}%,description.ilike.%${t}%`)}e.category&&"all"!==e.category&&(a=a.eq("category",e.category)),e.location&&e.location.trim()&&(a=a.ilike("location",`%${e.location}%`)),e.dateFrom&&(a=a.gte("date",e.dateFrom)),e.dateTo&&(a=a.lte("date",e.dateTo)),a=a.order("date",{ascending:!0});let{data:s,error:i}=await a;if(i)throw i;let n=s||[];return e.school&&"all"!==e.school&&(n=n.filter(t=>{let a=t.creator;return a?.school===e.school})),n},n=async e=>{let{data:t,error:a}=await r.supabase.from("events").select("*, ticket_types(*)").eq("id",e).single();if(a)throw a;return t},o=async e=>{let{data:t,error:a}=await r.supabase.from("orders").select("*, event:events(*), tickets(*, ticket_type:ticket_types(*))").eq("id",e).single();if(a)throw a;return t},l=async e=>{let{data:t,error:a}=await r.supabase.from("tickets").select("*, event:events(*), ticket_type:ticket_types(*)").eq("id",e).single();if(a)throw a;return t},d=async e=>{let{data:t,error:a}=await r.supabase.from("orders").select("id").eq("user_id",e).eq("payment_status","paid");if(a)throw a;if(!t||0===t.length)return[];let s=t.map(e=>e.id),{data:i,error:n}=await r.supabase.from("tickets").select("*, event:events(*), ticket_type:ticket_types(*), order:orders(*)").eq("user_id",e).in("order_id",s).order("created_at",{ascending:!1});if(n)throw n;return i||[]},c=async e=>{let t=new Date().toISOString(),{data:a,error:s}=await r.supabase.from("events").select("*, ticket_types(*)").eq("creator_id",e).gte("date",t).order("date",{ascending:!0});if(s)throw s;return a},u=async e=>{let t=new Date().toISOString(),{data:a,error:s}=await r.supabase.from("events").select("*, ticket_types(*)").eq("creator_id",e).lt("date",t).order("date",{ascending:!1});if(s)throw s;return a},m=async e=>{let{data:t,error:a}=await r.supabase.from("creator_profiles").select("*").eq("user_id",e).maybeSingle();if(a)throw a;return t||null},p=async e=>{let{data:t,error:a}=await r.supabase.from("orders").select("*, tickets(*)").eq("event_id",e).eq("payment_status","paid");if(a)throw a;let{data:s,error:i}=await r.supabase.from("tickets").select("*, ticket_type:ticket_types(*)").eq("event_id",e);if(i)throw i;return{orders:t||[],tickets:s||[]}},h=async e=>{let{data:t,error:a}=await r.supabase.from("wallet_transactions").select("*").eq("creator_id",e).order("created_at",{ascending:!1});if(a)throw a;return t},x=async e=>{let{data:t,error:a}=await r.supabase.from("withdrawals").select("*").eq("creator_id",e).order("created_at",{ascending:!1});if(a)throw a;return t||[]},f=async()=>{let{data:e,error:t}=await r.supabase.from("withdrawals").select("*, creator:users!withdrawals_creator_id_fkey(id, email, full_name, school)").order("created_at",{ascending:!1});if(t)throw t;return e||[]},g=async e=>{let{data:t,error:a}=await r.supabase.from("creator_profiles").select("account_balance, bank_account_name, bank_account_number, bank_name, bank_code, is_bank_verified").eq("user_id",e).single();if(a)throw a;return t},y=async()=>{let{data:e,error:t}=await r.supabase.from("events").select("*, ticket_types(*), creator:users!events_creator_id_fkey(id, email, full_name, school)").order("created_at",{ascending:!1});if(t)throw t;return e||[]},b=async()=>{let{data:e,error:t}=await r.supabase.from("users").select("*").order("created_at",{ascending:!1});if(t)throw t;return e||[]},w=async()=>{let{data:e,error:t}=await r.supabase.from("orders").select("*, event:events(id, title, creator:users!events_creator_id_fkey(id, email, full_name)), user:users(id, email, full_name)").order("created_at",{ascending:!1});if(t)throw t;return e||[]},v=async()=>{let{data:e,error:t}=await r.supabase.from("tickets").select("*, event:events(id, title), ticket_type:ticket_types(id, name, price, is_free), user:users(id, email, full_name), order:orders(id, payment_status)").order("created_at",{ascending:!1});if(t)throw console.error("Error fetching all tickets:",t),t;return e||[]},j=async()=>{let{data:e,error:t}=await r.supabase.from("users").select("*, creator_profile:creator_profiles(*)").eq("role","creator").order("created_at",{ascending:!1});if(t)throw t;return e||[]},_=async()=>{let{data:e,error:t}=await r.supabase.from("events").select("status");if(t)throw t;let a={active:0,draft:0,completed:0,cancelled:0};e?.forEach(e=>{e.status in a&&a[e.status]++});let{data:s,error:i}=await r.supabase.from("users").select("role, banned");if(i)throw i;let n={user:0,creator:0,admin:0},o=0;s?.forEach(e=>{e.role in n&&n[e.role]++,e.banned&&o++});let{data:l,error:d}=await r.supabase.from("orders").select("total_amount, created_at").eq("payment_status","paid");if(d)throw d;let c=l?.reduce((e,t)=>e+parseFloat(t.total_amount||0),0)||0,u=new Date,m=new Date(u.getFullYear(),u.getMonth(),1).toISOString(),p=l?.filter(e=>e.created_at>=m).reduce((e,t)=>e+parseFloat(t.total_amount||0),0)||0,{data:h,error:x}=await r.supabase.from("tickets").select("id");if(x)throw x;let f=h?.length||0,{data:g,error:y}=await r.supabase.from("users").select("id").eq("role","creator");if(y)throw y;let b=g?.length||0;return{events:{total:e?.length||0,byStatus:a},users:{total:s?.length||0,byRole:n,banned:o},revenue:{total:c,thisMonth:p},tickets:{totalSold:f},organizers:{active:b}}}},71668:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});let r=(0,a(68570).createProxy)(String.raw`/Users/mac/Desktop/Client projects/frecks-new/app/transactions/page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[948,759,65,453,561,812,643,108,236,407],()=>a(58492));module.exports=r})();