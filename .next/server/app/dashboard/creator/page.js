(()=>{var e={};e.id=669,e.ids=[669],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},93368:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>d.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>u,tree:()=>c}),t(90427),t(84752),t(96560);var a=t(23191),r=t(88716),n=t(37922),d=t.n(n),l=t(95231),i={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);t.d(s,i);let c=["",{children:["dashboard",{children:["creator",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,90427)),"/Users/mac/Desktop/Client projects/frecks-new/app/dashboard/creator/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,24697))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,84752)),"/Users/mac/Desktop/Client projects/frecks-new/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,96560)),"/Users/mac/Desktop/Client projects/frecks-new/app/not-found.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,24697))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],o=["/Users/mac/Desktop/Client projects/frecks-new/app/dashboard/creator/page.tsx"],m="/dashboard/creator/page",x={require:t,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/creator/page",pathname:"/dashboard/creator",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},9120:(e,s,t)=>{Promise.resolve().then(t.bind(t,52801))},52801:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>eg});var a=t(10326),r=t(17577),n=t(90434),d=t(46226),l=t(35047),i=t(20108),c=t(91664),o=t(38443),m=t(55296),x=t(85999),u=t(37358),h=t(21985),p=t(71821),f=t(24061),b=t(94019),g=t(26754),j=t(62881);let v=(0,j.Z)("TicketCheck",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var N=t(16671),y=t(88378),w=t(71810),k=t(90748),_=t(83855),C=t(17069),S=t(12714),T=t(69508),Z=t(39447),E=t(98091),A=t(77506),P=t(77636),z=t(31540),F=t(34233),q=t(94001),L=t(76253),D=t(2453),M=t(47272),$=t(44976),R=t(10119);let V=({onDelete:e})=>{let{profile:s}=(0,q.a)(),[t,d]=(0,r.useState)(!1),[l,x]=(0,r.useState)(null),{data:u,isLoading:h,error:p}=(0,i.a)({queryKey:["creator-events",s?.id],queryFn:()=>(0,L.TX)(s.id),enabled:!!s?.id});return h?a.jsx("div",{className:"p-6",children:a.jsx("div",{className:"text-center text-muted-foreground",children:"Loading events..."})}):p?a.jsx("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"text-center text-destructive",children:["Error loading events: ",p.message]})}):(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:"My Events"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage all your events"})]}),(0,a.jsxs)(c.z,{className:"gap-2",children:[a.jsx(_.Z,{className:"w-4 h-4"}),"Create Event"]})]}),u&&0!==u.length?a.jsx("div",{className:"grid gap-4",children:u.map(s=>{let t=s.ticket_types||[],r=t.reduce((e,s)=>e+(s.sold_count||0),0),l=t.reduce((e,s)=>e+(s.quantity||0),0),i=t.reduce((e,s)=>e+(s.price||0)*(s.sold_count||0),0);return(0,a.jsxs)("div",{className:"bg-card rounded-2xl border border-border p-6 hover:shadow-lg transition-shadow",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("h3",{className:"text-xl font-semibold",children:s.title}),a.jsx(o.C,{className:"active"===s.status?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground",children:s.status})]}),a.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:s.location}),a.jsx("p",{className:"text-sm text-muted-foreground",children:(0,D.WU)(new Date(s.date),"EEE, MMM d, yyyy • h:mm a")})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx(n.default,{href:`/event/${s.id}`,children:(0,a.jsxs)(c.z,{variant:"outline",size:"sm",className:"gap-1",children:[a.jsx(S.Z,{className:"w-4 h-4"})," View"]})}),a.jsx(n.default,{href:`/dashboard/creator/edit/${s.id}`,children:(0,a.jsxs)(c.z,{variant:"outline",size:"sm",className:"gap-1",children:[a.jsx(T.Z,{className:"w-4 h-4"})," Edit"]})}),e&&(0,a.jsxs)(c.z,{variant:"outline",size:"sm",className:"gap-1 text-destructive hover:text-destructive",onClick:()=>{x(s.id),d(!0)},children:[a.jsx(E.Z,{className:"w-4 h-4"})," Delete"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 pt-4 border-t border-border",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Tickets Sold"}),(0,a.jsxs)("p",{className:"text-lg font-semibold",children:[r," / ",l]})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Revenue"}),(0,a.jsxs)("p",{className:"text-lg font-semibold text-primary",children:["₦",i.toLocaleString()]})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Attendees"}),a.jsx("p",{className:"text-lg font-semibold",children:r})]})]})]},s.id)})}):(0,a.jsxs)("div",{className:"bg-card rounded-2xl border border-border p-12 text-center",children:[a.jsx("p",{className:"text-muted-foreground mb-4",children:"No events yet"}),(0,a.jsxs)(c.z,{className:"gap-2",children:[a.jsx(_.Z,{className:"w-4 h-4"}),"Create Your First Event"]})]}),e&&a.jsx(m.aR,{open:t,onOpenChange:d,children:(0,a.jsxs)(m._T,{children:[(0,a.jsxs)(m.fY,{children:[a.jsx(m.f$,{children:"Delete Event"}),a.jsx(m.yT,{children:"Are you sure you want to delete this event? This action cannot be undone. The event will be moved to deleted events."})]}),(0,a.jsxs)(m.xo,{children:[a.jsx(m.le,{onClick:()=>x(null),children:"Cancel"}),a.jsx(m.OL,{onClick:()=>{l&&(e(l),d(!1),x(null))},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})})]})};var B=t(88307),K=t(41190),I=t(2777);let O=()=>{let{profile:e}=(0,q.a)(),[s,t]=(0,r.useState)(""),[n,d]=(0,r.useState)("all"),{data:l,isLoading:m}=(0,i.a)({queryKey:["creator-events",e?.id],queryFn:()=>(0,L.TX)(e.id),enabled:!!e?.id}),{data:x,isLoading:u}=(0,i.a)({queryKey:["creator-tickets",e?.id,n],queryFn:async()=>{let e=l?.map(e=>e.id)||[];if(0===e.length)return[];let s=I.supabase.from("tickets").select("*, event:events(*), ticket_type:ticket_types(*), order:orders(*)").in("event_id",e);"all"!==n&&(s=s.eq("event_id",n));let{data:t,error:a}=await s.order("created_at",{ascending:!1});if(a)throw a;return t||[]},enabled:!!e?.id&&!!l}),h=(0,r.useMemo)(()=>{if(!x)return[];if(!s)return x;let e=s.toLowerCase();return x.filter(s=>{let t=s.order||{};return t.email?.toLowerCase().includes(e)||t.full_name?.toLowerCase().includes(e)||s.qr_code?.toLowerCase().includes(e)||s.event?.title?.toLowerCase().includes(e)})},[x,s]);return m||u?a.jsx("div",{className:"p-6",children:a.jsx("div",{className:"text-center text-muted-foreground",children:"Loading tickets..."})}):(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Tickets"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"View and manage all tickets sold"})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[a.jsx(B.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),a.jsx(K.I,{placeholder:"Search by name, email, or QR code...",value:s,onChange:e=>t(e.target.value),className:"pl-10"})]}),(0,a.jsxs)("select",{value:n,onChange:e=>d(e.target.value),className:"px-4 py-2 rounded-lg border border-border bg-background",children:[a.jsx("option",{value:"all",children:"All Events"}),l?.map(e=>a.jsx("option",{value:e.id,children:e.title},e.id))]}),(0,a.jsxs)(c.z,{variant:"outline",className:"gap-2",children:[a.jsx(z.Z,{className:"w-4 h-4"}),"Export"]})]}),x&&0!==h.length?a.jsx("div",{className:"bg-card rounded-2xl border border-border overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-muted/50",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-muted-foreground",children:"Ticket ID"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-muted-foreground",children:"Event"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-muted-foreground",children:"Buyer"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-muted-foreground",children:"Type"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-muted-foreground",children:"Status"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-muted-foreground",children:"Purchased"}),a.jsx("th",{className:"text-right px-6 py-4 text-sm font-medium text-muted-foreground",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-border",children:h.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-muted/30 transition-colors",children:[(0,a.jsxs)("td",{className:"px-6 py-4 font-mono text-sm",children:[e.qr_code.slice(0,8),"..."]}),(0,a.jsxs)("td",{className:"px-6 py-4",children:[a.jsx("div",{className:"font-medium",children:e.event?.title||"N/A"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:(0,D.WU)(new Date(e.event?.date),"MMM d, yyyy")})]}),(0,a.jsxs)("td",{className:"px-6 py-4",children:[a.jsx("div",{children:e.order?.full_name||"N/A"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:e.order?.email||""})]}),a.jsx("td",{className:"px-6 py-4",children:e.ticket_type?.name||"N/A"}),a.jsx("td",{className:"px-6 py-4",children:a.jsx(o.C,{className:"valid"===e.status?"bg-green-500/10 text-green-600":"used"===e.status?"bg-blue-500/10 text-blue-600":"bg-muted text-muted-foreground",children:e.status})}),a.jsx("td",{className:"px-6 py-4 text-sm text-muted-foreground",children:(0,D.WU)(new Date(e.created_at),"MMM d, yyyy")}),a.jsx("td",{className:"px-6 py-4 text-right",children:(0,a.jsxs)(c.z,{variant:"ghost",size:"sm",className:"gap-1",children:[a.jsx(S.Z,{className:"w-4 h-4"})," View"]})})]},e.id))})]})})}):a.jsx("div",{className:"bg-card rounded-2xl border border-border p-12 text-center",children:a.jsx("p",{className:"text-muted-foreground",children:"No tickets found"})})]})};var U=t(74723),Y=t(74064),W=t(770),G=t(44794),H=t(51027),J=t(61486),Q=t(2822),X=t(22321),ee=t(66307),es=t(47206),et=t(32933),ea=t(79635);let er=(0,j.Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var en=t(51223),ed=t(41858),el=t(39639);t(40634);let ei=W.Ry({bank_account_name:W.Z_().min(2,"Account name is required"),bank_account_number:W.Z_().regex(/^\d{10}$/,"Account number must be 10 digits"),bank_name:W.Z_().min(2,"Bank name is required"),bank_code:W.Z_().min(3,"Bank code is required")}),ec=W.Ry({full_name:W.Z_().min(2,"Name must be at least 2 characters"),gender:W.Km(["male","female","other"]).optional(),school:W.Z_().min(2,"Please enter or select your school"),avatar_name:W.Z_().min(1,"Please select an avatar")}),eo=["TrEric","TrTorsten","TrIggy","TrFranklin","TrImran","TrAlex","TrFelix","TrEnrique","TrHarry","TrStu","TrChad"],em=["TrChelsea","TrSamantha","TrMaria","TrRachel","TrShamila","TrSophia","TrHelen","TrNancy"],ex=["TrAlex","TrFelix","TrSophia","TrHarry","TrHelen"],eu=()=>{let{profile:e,refreshProfile:s}=(0,q.a)(),t=(0,$.NL)(),[n,d]=(0,r.useState)(!1),[l,o]=(0,r.useState)(null),[m,x]=(0,r.useState)(!1),[u,h]=(0,r.useState)(null),[p,f]=(0,r.useState)([]),[b,g]=(0,r.useState)(!0),[j,v]=(0,r.useState)(!1),[N,y]=(0,r.useState)(!1),[w,k]=(0,r.useState)(""),[C,S]=(0,r.useState)(!1),{data:T,isLoading:Z}=(0,i.a)({queryKey:["creator-profile",e?.id],queryFn:()=>(0,L.ks)(e.id),enabled:!!e?.id});(0,r.useEffect)(()=>{let s=async()=>{g(!0),o(null);try{let e=await (0,X.G5)();console.log("Fetched banks:",e),e&&e.length>0?f(e):(console.warn("No banks returned from API"),o("No banks available. Please check if the Edge Function is deployed."))}catch(s){console.error("Failed to fetch banks:",s);let e=s.message||"Failed to load banks";e.includes("not deployed")||e.includes("not available")?o("Bank service is not available. The Edge Function needs to be deployed. Please deploy it using: supabase functions deploy get-paystack-banks"):o(e)}finally{g(!1)}};e?.id&&s()},[e?.id]);let E=(0,R.D)({mutationFn:s=>(0,M.D0)(e.id,{bank_account_name:s.bank_account_name,bank_account_number:s.bank_account_number,bank_name:s.bank_name,bank_code:s.bank_code,is_bank_verified:s.is_bank_verified}),onSuccess:()=>{d(!0),o(null),x(!1),h(null),t.invalidateQueries({queryKey:["creator-profile",e?.id]}),setTimeout(()=>d(!1),3e3)},onError:e=>{o(e.message||"Failed to update bank account"),d(!1),x(!1)}}),{register:P,handleSubmit:z,watch:F,setValue:D,formState:{errors:V},reset:B}=(0,U.cI)({resolver:(0,Y.F)(ei),defaultValues:{bank_account_name:T?.bank_account_name||"",bank_account_number:T?.bank_account_number||"",bank_name:T?.bank_name||"",bank_code:T?.bank_code||""}});(0,r.useEffect)(()=>{T&&B({bank_account_name:T.bank_account_name||"",bank_account_number:T.bank_account_number||"",bank_name:T.bank_name||"",bank_code:T.bank_code||""})},[T,B]);let I=e=>{let s=p.find(s=>s.name===e);if(s){let e=F("bank_account_number")||"",t=F("bank_account_name")||"";h(null),o(null),D("bank_name",s.name,{shouldValidate:!0}),D("bank_code",s.code,{shouldValidate:!0}),e&&D("bank_account_number",e),t&&D("bank_account_name",t),v(!1)}},O=F("bank_name"),W=[...p].sort((e,s)=>e.name.localeCompare(s.name)),eu=async()=>{let e=F("bank_account_number"),s=F("bank_code"),t=F("bank_account_name");if(!s||!e){o("Please select a bank and enter your account number first");return}if(10!==e.length){o("Account number must be exactly 10 digits");return}x(!0),o(null),h(null);try{let a=await (0,X.s4)({account_number:e,bank_code:s});a.verified&&a.account_name?(h(a.account_name),B({bank_account_name:a.account_name,bank_account_number:e,bank_name:F("bank_name"),bank_code:s},{keepValues:!1}),t&&t.toLowerCase()!==a.account_name.toLowerCase()&&console.log(`Account name updated from "${t}" to "${a.account_name}"`)):o(a.error||"Account verification failed. Please check your account number and bank code.")}catch(e){console.error("Verification error:",e),o(e.message||"Failed to verify account. Please try again.")}finally{x(!1)}},eh=async e=>{o(null),x(!0);try{let s=await (0,X.s4)({account_number:e.bank_account_number,bank_code:e.bank_code});if(!s.verified){o(s.error||"Account verification failed. Please verify your account details before saving."),x(!1);return}if(s.account_name){let t=s.account_name.toLowerCase().trim(),a=e.bank_account_name.toLowerCase().trim();if(t!==a){o(`Account name mismatch. The verified account name is: "${s.account_name}". Please update it and try again.`),B({...e,bank_account_name:s.account_name}),x(!1);return}}E.mutate({...e,is_bank_verified:!0})}catch(e){console.error("Submit error:",e),o(e.message||"Failed to verify and save account. Please try again."),x(!1)}},{register:ep,handleSubmit:ef,watch:eb,setValue:eg,formState:{errors:ej},reset:ev}=(0,U.cI)({resolver:(0,Y.F)(ec),defaultValues:{full_name:e?.full_name||"",gender:e?.gender||void 0,school:e?.school||"",avatar_name:e?.avatar_name||""}});(0,r.useEffect)(()=>{e&&ev({full_name:e.full_name||"",gender:e.gender||void 0,school:e.school||"",avatar_name:e.avatar_name||""})},[e,ev]);let eN=eb("gender"),ey=eb("avatar_name"),ew=eb("school"),ek="male"===eN?eo:"female"===eN?em:ex,e_=(0,R.D)({mutationFn:s=>(0,M.Lj)(e.id,{full_name:s.full_name,gender:s.gender||null,school:s.school,avatar_name:s.avatar_name}),onSuccess:async()=>{S(!0),o(null),await s(),t.invalidateQueries({queryKey:["creator-profile",e?.id]}),setTimeout(()=>S(!1),3e3)},onError:e=>{o(e.message||"Failed to update profile"),S(!1)}}),eC=async e=>{o(null),e_.mutate(e)};return Z?a.jsx("div",{className:"p-6",children:a.jsx("div",{className:"text-center text-muted-foreground",children:"Loading..."})}):(0,a.jsxs)("div",{className:"p-6 max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Settings"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage your profile and payout details"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-card rounded-2xl border border-border p-6 space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-1",children:"Profile Information"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Update your personal information and avatar"})]}),C&&(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-green-500/10 text-green-600 rounded-lg",children:[a.jsx(ee.Z,{className:"w-5 h-5"}),a.jsx("span",{className:"text-sm",children:"Profile updated successfully!"})]}),(0,a.jsxs)("form",{onSubmit:ef(eC),className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx(G._,{htmlFor:"profile_full_name",children:"Full Name"}),a.jsx(K.I,{id:"profile_full_name",type:"text",placeholder:"John Doe",...ep("full_name"),className:(0,en.cn)("mt-2",ej.full_name&&"border-destructive")}),ej.full_name&&a.jsx("p",{className:"text-sm text-destructive mt-1",children:ej.full_name.message})]}),(0,a.jsxs)("div",{children:[a.jsx(G._,{htmlFor:"profile_email",children:"Email"}),a.jsx(K.I,{id:"profile_email",type:"email",value:e?.email||"",readOnly:!0,className:"mt-2 bg-muted"}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Email cannot be changed"})]}),(0,a.jsxs)("div",{children:[a.jsx(G._,{children:"Gender"}),(0,a.jsxs)(Q.E,{value:eN,onValueChange:e=>eg("gender",e),className:"mt-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 p-3 rounded-lg border border-border hover:bg-muted/50",children:[a.jsx(Q.m,{value:"male",id:"profile_male"}),a.jsx(G._,{htmlFor:"profile_male",className:"cursor-pointer flex-1",children:"Male"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 p-3 rounded-lg border border-border hover:bg-muted/50",children:[a.jsx(Q.m,{value:"female",id:"profile_female"}),a.jsx(G._,{htmlFor:"profile_female",className:"cursor-pointer flex-1",children:"Female"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 p-3 rounded-lg border border-border hover:bg-muted/50",children:[a.jsx(Q.m,{value:"other",id:"profile_other"}),a.jsx(G._,{htmlFor:"profile_other",className:"cursor-pointer flex-1",children:"Other"})]})]}),ej.gender&&a.jsx("p",{className:"text-sm text-destructive mt-1",children:ej.gender.message})]}),eN&&(0,a.jsxs)("div",{children:[a.jsx(G._,{children:"Choose Your Avatar"}),a.jsx("div",{className:"grid grid-cols-6 gap-2 mt-2",children:ek.map(e=>a.jsx("button",{type:"button",onClick:()=>eg("avatar_name",e,{shouldValidate:!0}),className:(0,en.cn)("p-2 rounded-full border-2 transition-all hover:scale-110 flex items-center justify-center",ey===e?"border-primary bg-primary/10":"border-border hover:border-primary/50"),children:a.jsx(el.qU,{name:e,size:"sm",rounded:!0})},e))}),a.jsx("input",{type:"hidden",...ep("avatar_name")}),ej.avatar_name&&a.jsx("p",{className:"text-sm text-destructive mt-1",children:ej.avatar_name.message})]}),(0,a.jsxs)("div",{children:[a.jsx(G._,{htmlFor:"profile_school",children:"School"}),(0,a.jsxs)(H.J2,{open:N,onOpenChange:y,children:[a.jsx(H.xo,{asChild:!0,children:(0,a.jsxs)(c.z,{variant:"outline",role:"combobox","aria-expanded":N,className:"w-full justify-between mt-2",children:[ew||"Select or enter your school...",a.jsx(es.Z,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),a.jsx(H.yk,{className:"w-[var(--radix-popover-trigger-width)] p-0",align:"start",children:(0,a.jsxs)(J.mY,{children:[a.jsx(J.sZ,{placeholder:"Search school or type to add custom...",onValueChange:e=>{k(e)}}),(0,a.jsxs)(J.e8,{children:[a.jsx(J.rb,{children:a.jsx("div",{className:"py-2 px-4",children:(0,a.jsxs)(c.z,{type:"button",variant:"outline",size:"sm",className:"w-full",onClick:()=>{w&&(eg("school",w,{shouldValidate:!0}),y(!1),k(""))},children:[a.jsx(_.Z,{className:"mr-2 h-4 w-4"}),'Add "',w||"Custom School",'"']})})}),a.jsx(J.fu,{children:ed.u.map(e=>(0,a.jsxs)(J.di,{value:e,onSelect:()=>{eg("school",e,{shouldValidate:!0}),y(!1)},children:[a.jsx(et.Z,{className:(0,en.cn)("mr-2 h-4 w-4",ew===e?"opacity-100":"opacity-0")}),e]},e))}),w&&!ed.u.some(e=>e.toLowerCase().includes(w.toLowerCase()))&&a.jsx(J.fu,{children:(0,a.jsxs)(J.di,{value:`add-${w}`,onSelect:()=>{eg("school",w,{shouldValidate:!0}),y(!1),k("")},children:[a.jsx(_.Z,{className:"mr-2 h-4 w-4"}),'Add "',w,'"']})})]})]})})]}),a.jsx("input",{type:"hidden",...ep("school")}),ej.school&&a.jsx("p",{className:"text-sm text-destructive mt-1",children:ej.school.message})]}),a.jsx(c.z,{type:"submit",variant:"hero",disabled:e_.isPending,className:"w-full gap-2",children:e_.isPending?(0,a.jsxs)(a.Fragment,{children:[a.jsx(A.Z,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(ea.Z,{className:"w-4 h-4"}),"Save Profile"]})})]})]}),(0,a.jsxs)("div",{className:"bg-card rounded-2xl border border-border p-6 space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-1",children:"Bank Account Details"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Add your bank account details to receive payouts from ticket sales"})]}),T?.is_bank_verified&&(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-green-500/10 text-green-600 rounded-lg",children:[a.jsx(ee.Z,{className:"w-5 h-5"}),a.jsx("span",{className:"text-sm font-medium",children:"Bank account verified"})]}),n&&(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-green-500/10 text-green-600 rounded-lg",children:[a.jsx(ee.Z,{className:"w-5 h-5"}),a.jsx("span",{className:"text-sm",children:"Bank account details updated successfully!"})]}),l&&(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-destructive/10 text-destructive rounded-lg",children:[a.jsx(er,{className:"w-5 h-5"}),a.jsx("span",{className:"text-sm",children:l})]}),u&&(0,a.jsxs)("div",{className:"flex items-start gap-2 p-3 bg-blue-500/10 text-blue-600 rounded-lg",children:[a.jsx(ee.Z,{className:"w-5 h-5 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium",children:"Account verified successfully!"}),(0,a.jsxs)("p",{className:"text-sm mt-1",children:["Account name: ",a.jsx("strong",{children:u})]}),a.jsx("p",{className:"text-xs mt-1 opacity-80",children:"You can now save your bank details. The account name has been auto-filled."})]})]}),(0,a.jsxs)("form",{onSubmit:z(eh),className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx(G._,{htmlFor:"bank_name",children:"Bank Name"}),b?a.jsx("div",{className:"mt-2 w-full px-3 py-2 rounded-lg border border-border bg-muted animate-pulse",children:"Loading banks..."}):0===p.length?(0,a.jsxs)("div",{className:"mt-2 w-full px-3 py-2 rounded-lg border border-border bg-muted text-muted-foreground",children:["No banks available. ",l||"Please check your connection."]}):(0,a.jsxs)(H.J2,{open:j,onOpenChange:v,children:[a.jsx(H.xo,{asChild:!0,children:(0,a.jsxs)(c.z,{variant:"outline",role:"combobox","aria-expanded":j,className:(0,en.cn)("w-full justify-between mt-2",!O&&"text-muted-foreground"),children:[O||"Select a bank...",a.jsx(es.Z,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),a.jsx(H.yk,{className:"w-[var(--radix-popover-trigger-width)] p-0",align:"start",children:(0,a.jsxs)(J.mY,{children:[a.jsx(J.sZ,{placeholder:"Search bank..."}),(0,a.jsxs)(J.e8,{children:[a.jsx(J.rb,{children:"No bank found."}),a.jsx(J.fu,{children:W.map(e=>(0,a.jsxs)(J.di,{value:e.name,onSelect:e=>{let s=W.find(s=>s.name.toLowerCase()===e.toLowerCase()||s.name===e);s&&I(s.name)},children:[a.jsx(et.Z,{className:(0,en.cn)("mr-2 h-4 w-4",O===e.name?"opacity-100":"opacity-0")}),e.name]},e.code))})]})]})})]}),a.jsx("input",{type:"hidden",...P("bank_name")}),V.bank_name&&a.jsx("p",{className:"text-sm text-destructive mt-1",children:V.bank_name.message})]}),(0,a.jsxs)("div",{children:[a.jsx(G._,{htmlFor:"bank_code",children:"Bank Code"}),a.jsx(K.I,{id:"bank_code",type:"text",placeholder:"Bank code (auto-filled when bank is selected)",...P("bank_code"),readOnly:!0,className:"mt-2 bg-muted"}),V.bank_code&&a.jsx("p",{className:"text-sm text-destructive mt-1",children:V.bank_code.message})]}),(0,a.jsxs)("div",{children:[a.jsx(G._,{htmlFor:"bank_account_number",children:"Account Number"}),(0,a.jsxs)("div",{className:"flex gap-2 mt-2",children:[a.jsx(K.I,{id:"bank_account_number",type:"text",placeholder:"1234567890",maxLength:10,inputMode:"numeric",pattern:"[0-9]*",...P("bank_account_number"),onChange:e=>{D("bank_account_number",e.target.value.replace(/\D/g,""))},className:"flex-1"}),a.jsx(c.z,{type:"button",variant:"outline",onClick:eu,disabled:m||!F("bank_code")||!F("bank_account_number")||F("bank_account_number")?.length!==10,className:"gap-2 whitespace-nowrap",children:m?(0,a.jsxs)(a.Fragment,{children:[a.jsx(A.Z,{className:"w-4 h-4 animate-spin"}),"Verifying..."]}):"Verify Account"})]}),V.bank_account_number&&a.jsx("p",{className:"text-sm text-destructive mt-1",children:V.bank_account_number.message}),F("bank_account_number")&&10!==F("bank_account_number").length&&a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Account number must be exactly 10 digits"})]}),(0,a.jsxs)("div",{children:[a.jsx(G._,{htmlFor:"bank_account_name",children:"Account Name"}),a.jsx(K.I,{id:"bank_account_name",type:"text",placeholder:"Account name (auto-filled after verification)",...P("bank_account_name"),readOnly:!!u,className:(0,en.cn)("mt-2",u&&"bg-muted")}),V.bank_account_name&&a.jsx("p",{className:"text-sm text-destructive mt-1",children:V.bank_account_name.message}),u&&a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"✓ Account name verified and auto-filled"})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[!u&&!T?.is_bank_verified&&a.jsx("p",{className:"text-sm text-muted-foreground text-center",children:'\uD83D\uDCA1 Tip: Click "Verify Account" to verify your account details before saving'}),a.jsx(c.z,{type:"submit",variant:"hero",disabled:E.isPending||m,className:"w-full gap-2",children:E.isPending?(0,a.jsxs)(a.Fragment,{children:[a.jsx(A.Z,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):"Save Bank Details"})]})]})]})]})]})};var eh=t(48998),ep=t(69669);let ef=()=>{let{user:e}=(0,q.a)(),s=(0,$.NL)(),[t,d]=(0,r.useState)(""),{data:l,isLoading:m}=(0,i.a)({queryKey:["creator-balance",e?.id],queryFn:()=>(0,L.pj)(e.id),enabled:!!e?.id}),{data:u,isLoading:h}=(0,i.a)({queryKey:["creator-withdrawals",e?.id],queryFn:()=>(0,L.z8)(e.id),enabled:!!e?.id}),f=(0,R.D)({mutationFn:async s=>{if(!e?.id)throw Error("User not authenticated");if(!l)throw Error("Balance information not available");let t={bank_account_name:l.bank_account_name||"",bank_account_number:l.bank_account_number||"",bank_name:l.bank_name||"",bank_code:l.bank_code||""};if(!t.bank_account_name||!t.bank_account_number)throw Error("Please add your bank account details in Settings first");return(0,M.aE)(e.id,s,t)},onSuccess:()=>{x.Am.success("Withdrawal request submitted successfully!"),d(""),s.invalidateQueries({queryKey:["creator-balance"]}),s.invalidateQueries({queryKey:["creator-withdrawals"]}),s.invalidateQueries({queryKey:["wallet-transactions"]})},onError:e=>{x.Am.error(e.message||"Failed to submit withdrawal request")}});if(m)return a.jsx("div",{className:"p-6",children:a.jsx("div",{className:"text-center text-muted-foreground",children:"Loading..."})});let b=Number(l?.account_balance)||0,g=l?.bank_account_name&&l?.bank_account_number;return(0,a.jsxs)("div",{className:"p-3 md:p-6 space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Withdraw Funds"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Request a withdrawal from your account balance"})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-primary to-primary/80 rounded-2xl p-6 text-primary-foreground",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-white/20 flex items-center justify-center",children:a.jsx(p.Z,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm opacity-90",children:"Available Balance"}),(0,a.jsxs)("h3",{className:"text-3xl font-bold",children:["₦",b.toLocaleString()]})]})]}),a.jsx(n.default,{href:"/transactions",children:a.jsx(c.z,{variant:"secondary",size:"sm",className:"mt-4",children:"View Transaction History"})})]}),!g&&(0,a.jsxs)("div",{className:"bg-orange-500/10 border border-orange-500/20 rounded-lg p-4 flex items-start gap-3",children:[a.jsx(er,{className:"w-5 h-5 text-orange-600 shrink-0 mt-0.5"}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("p",{className:"font-semibold text-orange-900 dark:text-orange-100 mb-1",children:"Bank Account Required"}),a.jsx("p",{className:"text-sm text-orange-800 dark:text-orange-200",children:"Please add your bank account details in Settings before requesting a withdrawal."})]})]}),(0,a.jsxs)("div",{className:"bg-card rounded-2xl border border-border p-6",children:[a.jsx("h3",{className:"text-lg font-bold mb-4",children:"Request Withdrawal"}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault();let s=parseFloat(t);if(isNaN(s)||s<=0){x.Am.error("Please enter a valid amount");return}if(s>b){x.Am.error("Insufficient balance");return}if(s<1e3){x.Am.error("Minimum withdrawal amount is ₦1,000");return}f.mutate(s)},className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx(G._,{htmlFor:"amount",children:"Amount (₦)"}),a.jsx(K.I,{id:"amount",type:"number",placeholder:"Enter amount",value:t,onChange:e=>d(e.target.value),min:"1000",max:b,step:"100",className:"mt-2",disabled:!g||f.isPending}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Minimum withdrawal: ₦1,000"})]}),g&&(0,a.jsxs)("div",{className:"bg-muted/50 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm font-semibold mb-2",children:"Withdrawal will be sent to:"}),(0,a.jsxs)("div",{className:"text-sm space-y-1",children:[(0,a.jsxs)("p",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Account Name:"})," ",l?.bank_account_name]}),(0,a.jsxs)("p",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Bank:"})," ",l?.bank_name]}),(0,a.jsxs)("p",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Account Number:"})," ",l?.bank_account_number]})]})]}),a.jsx(c.z,{type:"submit",disabled:!g||f.isPending||b<1e3,className:"w-full",children:f.isPending?(0,a.jsxs)(a.Fragment,{children:[a.jsx(A.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):"Request Withdrawal"})]})]}),(0,a.jsxs)("div",{className:"bg-card rounded-2xl border border-border overflow-hidden",children:[a.jsx("div",{className:"p-4 md:p-6 border-b border-border",children:a.jsx("h3",{className:"text-lg font-bold",children:"Recent Withdrawals"})}),h?(0,a.jsxs)("div",{className:"p-12 text-center",children:[a.jsx(A.Z,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-primary"}),a.jsx("p",{className:"text-muted-foreground",children:"Loading withdrawals..."})]}):u&&0!==u.length?a.jsx("div",{className:"divide-y divide-border",children:u.slice(0,5).map(e=>a.jsx("div",{className:"p-4 md:p-6",children:a.jsx("div",{className:"flex items-start justify-between gap-4",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsxs)("p",{className:"font-semibold",children:["₦",Number(e.amount).toLocaleString()]}),a.jsx(o.C,{variant:"approved"===e.status||"completed"===e.status?"default":"pending"===e.status?"secondary":"destructive",className:"text-xs",children:"approved"===e.status?(0,a.jsxs)(a.Fragment,{children:[a.jsx(ee.Z,{className:"w-3 h-3 mr-1"})," Approved"]}):"pending"===e.status?(0,a.jsxs)(a.Fragment,{children:[a.jsx(eh.Z,{className:"w-3 h-3 mr-1"})," Pending"]}):"rejected"===e.status?(0,a.jsxs)(a.Fragment,{children:[a.jsx(ep.Z,{className:"w-3 h-3 mr-1"})," Rejected"]}):e.status})]}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground mb-1",children:[e.bank_name," • ",e.bank_account_number?.slice(-4)]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:(0,D.WU)(new Date(e.created_at),"MMM d, yyyy • h:mm a")}),e.admin_note&&(0,a.jsxs)("div",{className:"mt-2 p-2 bg-muted/50 rounded text-xs",children:[a.jsx("p",{className:"font-semibold mb-1",children:"Admin Note:"}),a.jsx("p",{className:"text-muted-foreground",children:e.admin_note})]})]})})},e.id))}):(0,a.jsxs)("div",{className:"p-12 text-center",children:[a.jsx(p.Z,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No withdrawals yet"}),a.jsx("p",{className:"text-muted-foreground",children:"Your withdrawal requests will appear here."})]}),u&&u.length>5&&a.jsx("div",{className:"p-4 border-t border-border text-center",children:a.jsx(n.default,{href:"/transactions",children:a.jsx(c.z,{variant:"ghost",size:"sm",children:"View All Withdrawals"})})})]})]})};function eb(){let{profile:e,loading:s,user:t}=(0,q.a)();(0,l.useRouter)(),(0,l.useSearchParams)();let[j,B]=(0,r.useState)("dashboard"),[K,I]=(0,r.useState)(null),[U,Y]=(0,r.useState)(!1),[W,G]=(0,r.useState)(!1),[H,J]=(0,r.useState)(null),{data:Q,isLoading:X,error:ee}=(0,i.a)({queryKey:["creator-events",e?.id],queryFn:()=>(0,L.TX)(e.id),enabled:!!e?.id}),{data:es,isLoading:et}=(0,i.a)({queryKey:["creator-past-events",e?.id],queryFn:()=>(0,L.DK)(e.id),enabled:!!e?.id}),{data:ea,isLoading:er}=(0,i.a)({queryKey:["user-tickets",t?.id],queryFn:()=>(0,L.ZD)(t.id),enabled:!!t?.id&&!s}),en=(0,$.NL)(),ed=(0,R.D)({mutationFn:e=>(0,M.Bt)(e,t.id),onSuccess:()=>{x.Am.success("Event deleted successfully"),en.invalidateQueries({queryKey:["creator-events"]}),en.invalidateQueries({queryKey:["creator-past-events"]})},onError:e=>{x.Am.error(e?.message||"Failed to delete event")}}),el=(0,r.useMemo)(()=>{if(!Q)return[{label:"Total Events",value:"0",icon:u.Z,change:""},{label:"Tickets Sold",value:"0",icon:h.Z,change:""},{label:"Total Revenue",value:"₦0",icon:p.Z,change:""},{label:"Total Attendees",value:"0",icon:f.Z,change:""}];let e=Q.length,s=Q.reduce((e,s)=>e+(s.ticket_types||[]).reduce((e,s)=>e+(s.sold_count||0),0),0),t=Q.reduce((e,s)=>e+(s.ticket_types||[]).reduce((e,s)=>e+(s.price||0)*(s.sold_count||0),0),0);return[{label:"Total Events",value:e.toString(),icon:u.Z,change:""},{label:"Tickets Sold",value:s.toLocaleString(),icon:h.Z,change:""},{label:"Total Revenue",value:`₦${t.toLocaleString()}`,icon:p.Z,change:""},{label:"Total Attendees",value:s.toLocaleString(),icon:f.Z,change:""}]},[Q]),ei=(0,r.useMemo)(()=>Q?Q.map(e=>{let s=e.ticket_types||[],t=s.reduce((e,s)=>e+(s.sold_count||0),0),a=s.reduce((e,s)=>e+(s.quantity||0),0),r=s.reduce((e,s)=>e+(s.price||0)*(s.sold_count||0),0);return{id:e.id,title:e.title,date:(0,D.WU)(new Date(e.date),"MMM d, yyyy"),ticketsSold:t,totalTickets:a,revenue:r,status:e.status||"active"}}):[],[Q]);return s?a.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})}):e&&t?"creator"!==e.role?a.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("p",{className:"mb-2 text-lg font-semibold",children:"Access Denied"}),a.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"This page is only accessible to creators."}),a.jsx(n.default,{href:"/dashboard/user",children:a.jsx(c.z,{variant:"outline",children:"Go to User Dashboard"})})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-background flex",children:[U&&a.jsx("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-40 lg:hidden",onClick:()=>Y(!1)}),(0,a.jsxs)("aside",{className:`fixed inset-y-0 left-0 z-50 w-64 bg-card border-r border-border transform transition-transform duration-300 ease-in-out lg:hidden ${U?"translate-x-0":"-translate-x-full"}`,children:[(0,a.jsxs)("div",{className:"p-4 border-b border-border flex items-center justify-between",children:[a.jsx(n.default,{href:"/",className:"flex items-center gap-2",onClick:()=>Y(!1),children:a.jsx(d.default,{src:"/logo.png",alt:"Frecks",width:120,height:40,className:"h-8 w-auto"})}),a.jsx("button",{onClick:()=>Y(!1),className:"p-2 hover:bg-muted rounded-lg",children:a.jsx(b.Z,{className:"w-5 h-5"})})]}),(0,a.jsxs)("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:[(0,a.jsxs)("button",{onClick:()=>{B("dashboard"),Y(!1)},className:`w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors ${"dashboard"===j?"bg-primary text-primary-foreground font-medium":"text-muted-foreground hover:bg-muted"}`,children:[a.jsx(g.Z,{className:"w-4 h-4"}),"Dashboard"]}),(0,a.jsxs)("button",{onClick:()=>{B("events"),Y(!1)},className:`w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors ${"events"===j?"bg-primary text-primary-foreground font-medium":"text-muted-foreground hover:bg-muted"}`,children:[a.jsx(u.Z,{className:"w-4 h-4"}),"My Events"]}),(0,a.jsxs)("button",{onClick:()=>{B("tickets"),Y(!1)},className:`w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors ${"tickets"===j?"bg-primary text-primary-foreground font-medium":"text-muted-foreground hover:bg-muted"}`,children:[a.jsx(h.Z,{className:"w-4 h-4"}),"Tickets"]}),(0,a.jsxs)("button",{onClick:()=>{B("my-tickets"),Y(!1)},className:`w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors ${"my-tickets"===j?"bg-primary text-primary-foreground font-medium":"text-muted-foreground hover:bg-muted"}`,children:[a.jsx(v,{className:"w-4 h-4"}),"My Tickets"]}),(0,a.jsxs)("button",{onClick:()=>{B("withdraw"),Y(!1)},className:`w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors ${"withdraw"===j?"bg-primary text-primary-foreground font-medium":"text-muted-foreground hover:bg-muted"}`,children:[a.jsx(N.Z,{className:"w-4 h-4"}),"Withdraw"]}),(0,a.jsxs)("button",{onClick:()=>{B("settings"),Y(!1)},className:`w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors ${"settings"===j?"bg-primary text-primary-foreground font-medium":"text-muted-foreground hover:bg-muted"}`,children:[a.jsx(y.Z,{className:"w-4 h-4"}),"Settings"]})]}),(0,a.jsxs)("div",{className:"p-4 border-t border-border space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-3",children:[a.jsx("span",{className:"text-xs text-muted-foreground",children:"Theme"}),a.jsx(F.Z,{})]}),a.jsx(n.default,{href:"/",children:(0,a.jsxs)("button",{className:"w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm text-muted-foreground hover:bg-muted transition-colors",children:[a.jsx(w.Z,{className:"w-4 h-4"}),"Back to Site"]})})]})]}),(0,a.jsxs)("aside",{className:"hidden lg:flex flex-col w-64 bg-card border-r border-border",children:[a.jsx("div",{className:"p-6 border-b border-border",children:a.jsx(n.default,{href:"/",className:"flex items-center gap-2",children:a.jsx(d.default,{src:"/logo.png",alt:"Frecks",width:140,height:48,className:"h-10 w-auto"})})}),(0,a.jsxs)("nav",{className:"flex-1 p-4 space-y-2",children:[(0,a.jsxs)("button",{onClick:()=>B("dashboard"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-colors ${"dashboard"===j?"bg-primary text-primary-foreground font-medium":"text-muted-foreground hover:bg-muted"}`,children:[a.jsx(g.Z,{className:"w-5 h-5"}),"Dashboard"]}),(0,a.jsxs)("button",{onClick:()=>B("events"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-colors ${"events"===j?"bg-primary text-primary-foreground font-medium":"text-muted-foreground hover:bg-muted"}`,children:[a.jsx(u.Z,{className:"w-5 h-5"}),"My Events"]}),(0,a.jsxs)("button",{onClick:()=>B("past-events"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-colors ${"past-events"===j?"bg-primary text-primary-foreground font-medium":"text-muted-foreground hover:bg-muted"}`,children:[a.jsx(u.Z,{className:"w-5 h-5"}),"Past Events"]}),(0,a.jsxs)("button",{onClick:()=>B("tickets"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-colors ${"tickets"===j?"bg-primary text-primary-foreground font-medium":"text-muted-foreground hover:bg-muted"}`,children:[a.jsx(h.Z,{className:"w-5 h-5"}),"Tickets"]}),(0,a.jsxs)("button",{onClick:()=>B("my-tickets"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-colors ${"my-tickets"===j?"bg-primary text-primary-foreground font-medium":"text-muted-foreground hover:bg-muted"}`,children:[a.jsx(v,{className:"w-5 h-5"}),"My Tickets"]}),(0,a.jsxs)("button",{onClick:()=>B("withdraw"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-colors ${"withdraw"===j?"bg-primary text-primary-foreground font-medium":"text-muted-foreground hover:bg-muted"}`,children:[a.jsx(N.Z,{className:"w-5 h-5"}),"Withdraw"]}),(0,a.jsxs)("button",{onClick:()=>B("settings"),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-colors ${"settings"===j?"bg-primary text-primary-foreground font-medium":"text-muted-foreground hover:bg-muted"}`,children:[a.jsx(y.Z,{className:"w-5 h-5"}),"Settings"]})]}),(0,a.jsxs)("div",{className:"p-4 border-t border-border space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-4",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Theme"}),a.jsx(F.Z,{})]}),a.jsx(n.default,{href:"/",children:(0,a.jsxs)("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-muted-foreground hover:bg-muted transition-colors",children:[a.jsx(w.Z,{className:"w-5 h-5"}),"Back to Site"]})})]})]}),(0,a.jsxs)("main",{className:"flex-1 overflow-auto",children:[a.jsx("header",{className:"sticky top-0 z-30 bg-background/80 backdrop-blur-lg border-b border-border",children:(0,a.jsxs)("div",{className:"flex items-center justify-between px-3 md:px-6 py-3 md:py-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 md:gap-4",children:[a.jsx("button",{onClick:()=>Y(!0),className:"lg:hidden p-2 hover:bg-muted rounded-lg",children:a.jsx(k.Z,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-lg md:text-2xl font-bold",children:"Organizer Dashboard"}),a.jsx("p",{className:"text-xs md:text-sm text-muted-foreground hidden sm:block",children:"Manage your events and track sales"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 md:gap-3",children:[a.jsx("div",{className:"lg:hidden",children:a.jsx(F.Z,{})}),a.jsx(n.default,{href:"/dashboard/creator/create",children:(0,a.jsxs)(c.z,{size:"sm",className:"gap-1 md:gap-2 text-xs md:text-base",children:[a.jsx(_.Z,{className:"w-3 h-3 md:w-4 md:h-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Create Event"}),a.jsx("span",{className:"sm:hidden",children:"Create"})]})})]})]})}),"dashboard"===j&&(0,a.jsxs)("div",{className:"p-3 md:p-6 space-y-4 md:space-y-8",children:[a.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-2 md:gap-4",children:el.map(e=>(0,a.jsxs)("div",{className:"bg-card rounded-lg md:rounded-2xl border border-border p-3 md:p-6 shadow-card",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-2 md:mb-4",children:[a.jsx("div",{className:"w-8 h-8 md:w-12 md:h-12 rounded-lg md:rounded-xl bg-primary/10 flex items-center justify-center",children:a.jsx(e.icon,{className:"w-4 h-4 md:w-6 md:h-6 text-primary"})}),a.jsx(C.Z,{className:"w-4 h-4 md:w-5 md:h-5 text-primary hidden sm:block"})]}),a.jsx("div",{className:"text-lg md:text-2xl font-bold mb-0.5 md:mb-1",children:e.value}),a.jsx("div",{className:"text-xs md:text-sm text-muted-foreground",children:e.label}),a.jsx("div",{className:"text-xs text-primary mt-1 md:mt-2",children:e.change})]},e.label))}),(0,a.jsxs)("div",{className:"bg-card rounded-lg md:rounded-2xl border border-border shadow-card overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-3 md:p-6 border-b border-border flex flex-col sm:flex-row sm:items-center justify-between gap-2 md:gap-4",children:[a.jsx("h2",{className:"text-base md:text-xl font-bold",children:"Your Events"}),(0,a.jsxs)("div",{className:"flex gap-1 md:gap-2",children:[a.jsx(c.z,{variant:"outline",size:"sm",className:"text-xs",children:"All"}),a.jsx(c.z,{variant:"ghost",size:"sm",className:"text-xs",children:"Active"}),a.jsx(c.z,{variant:"ghost",size:"sm",className:"text-xs",children:"Done"})]})]}),a.jsx("div",{className:"lg:hidden divide-y divide-border",children:e?.id?X?a.jsx("div",{className:"p-3 text-center text-xs text-muted-foreground",children:"Loading events..."}):ee?(0,a.jsxs)("div",{className:"p-3 text-center text-xs text-destructive",children:["Error: ",ee.message]}):0===ei.length?a.jsx("div",{className:"p-3 text-center text-xs text-muted-foreground",children:"No events yet. Create your first event!"}):ei.map(e=>(0,a.jsxs)("div",{className:"p-3",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"text-sm font-semibold truncate",children:e.title}),a.jsx("p",{className:"text-xs text-muted-foreground",children:e.date})]}),a.jsx(o.C,{className:`text-xs shrink-0 ${"active"===e.status?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}`,children:e.status})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs mb-2",children:[(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Sold:"})," ",(0,a.jsxs)("span",{className:"font-medium",children:[e.ticketsSold,"/",e.totalTickets]})]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Revenue:"})," ",(0,a.jsxs)("span",{className:"font-medium text-primary",children:["₦",e.revenue.toLocaleString()]})]})]}),(0,a.jsxs)("div",{className:"flex gap-1.5 mt-2",children:[a.jsx(n.default,{href:`/dashboard/creator/analytics/${e.id}`,className:"flex-1",children:(0,a.jsxs)(c.z,{variant:"outline",size:"sm",className:"w-full gap-1 text-xs h-8",children:[a.jsx(S.Z,{className:"w-3 h-3"})," View"]})}),a.jsx(n.default,{href:`/dashboard/creator/edit/${e.id}`,className:"flex-1",children:(0,a.jsxs)(c.z,{variant:"ghost",size:"sm",className:"w-full gap-1 text-xs h-8",children:[a.jsx(T.Z,{className:"w-3 h-3"})," Edit"]})})]})]},e.id)):a.jsx("div",{className:"p-3 text-center text-xs text-muted-foreground",children:"Loading..."})}),a.jsx("div",{className:"hidden lg:block overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-muted/50",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"text-left px-4 py-3 text-xs md:text-sm font-medium text-muted-foreground",children:"Event"}),a.jsx("th",{className:"text-left px-4 py-3 text-xs md:text-sm font-medium text-muted-foreground",children:"Date"}),a.jsx("th",{className:"text-left px-4 py-3 text-xs md:text-sm font-medium text-muted-foreground",children:"Tickets Sold"}),a.jsx("th",{className:"text-left px-4 py-3 text-xs md:text-sm font-medium text-muted-foreground",children:"Revenue"}),a.jsx("th",{className:"text-left px-4 py-3 text-xs md:text-sm font-medium text-muted-foreground",children:"Status"}),a.jsx("th",{className:"text-right px-4 py-3 text-xs md:text-sm font-medium text-muted-foreground",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-border",children:e?.id?X?a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"px-4 py-3 text-center text-xs text-muted-foreground",children:"Loading events..."})}):ee?a.jsx("tr",{children:(0,a.jsxs)("td",{colSpan:6,className:"px-4 py-3 text-center text-xs text-destructive",children:["Error loading events: ",ee.message]})}):0===ei.length?a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"px-4 py-3 text-center text-xs text-muted-foreground",children:"No events yet. Create your first event!"})}):ei.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-muted/30 transition-colors",children:[a.jsx("td",{className:"px-4 py-3 text-sm font-medium",children:e.title}),a.jsx("td",{className:"px-4 py-3 text-xs text-muted-foreground",children:e.date}),a.jsx("td",{className:"px-4 py-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-20 h-1.5 bg-muted rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-primary rounded-full",style:{width:`${e.ticketsSold/e.totalTickets*100}%`}})}),(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:[e.ticketsSold,"/",e.totalTickets]})]})}),(0,a.jsxs)("td",{className:"px-4 py-3 text-sm font-semibold text-primary",children:["₦",e.revenue.toLocaleString()]}),a.jsx("td",{className:"px-4 py-3",children:a.jsx(o.C,{className:`text-xs ${"active"===e.status?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}`,children:e.status})}),a.jsx("td",{className:"px-4 py-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[a.jsx(n.default,{href:`/dashboard/creator/analytics/${e.id}`,children:a.jsx(c.z,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"View Analytics",children:a.jsx(S.Z,{className:"w-3 h-3"})})}),a.jsx(n.default,{href:`/dashboard/creator/edit/${e.id}`,children:a.jsx(c.z,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Edit Event",children:a.jsx(T.Z,{className:"w-3 h-3"})})}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx(c.z,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>I(K===e.id?null:e.id),children:a.jsx(Z.Z,{className:"w-3 h-3"})}),K===e.id&&(0,a.jsxs)("div",{className:"absolute right-0 top-full mt-1 w-36 bg-card border border-border rounded-lg shadow-lg py-1 z-10",children:[a.jsx(n.default,{href:`/dashboard/creator/analytics/${e.id}`,children:(0,a.jsxs)("button",{className:"w-full px-3 py-1.5 text-left text-xs hover:bg-muted transition-colors flex items-center gap-2",onClick:()=>I(null),children:[a.jsx(S.Z,{className:"w-3 h-3"})," View Analytics"]})}),a.jsx(n.default,{href:`/dashboard/creator/edit/${e.id}`,children:(0,a.jsxs)("button",{className:"w-full px-3 py-1.5 text-left text-xs hover:bg-muted transition-colors flex items-center gap-2",onClick:()=>I(null),children:[a.jsx(T.Z,{className:"w-3 h-3"})," Edit Event"]})}),(0,a.jsxs)("button",{className:"w-full px-3 py-1.5 text-left text-xs hover:bg-muted transition-colors flex items-center gap-2 text-destructive",onClick:()=>{I(null),J(e.id),G(!0)},children:[a.jsx(E.Z,{className:"w-3 h-3"})," Delete"]})]})]})]})})]},e.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"px-4 py-3 text-center text-xs text-muted-foreground",children:"Loading..."})})})]})})]}),a.jsx("div",{className:"grid grid-cols-1 gap-2 md:gap-4",children:a.jsx(n.default,{href:"/dashboard/creator/create",children:(0,a.jsxs)("button",{className:"p-3 md:p-6 bg-primary text-primary-foreground rounded-lg md:rounded-2xl text-left hover:brightness-110 transition-all w-full",children:[a.jsx(_.Z,{className:"w-5 h-5 md:w-8 md:h-8 mb-2 md:mb-4"}),a.jsx("h3",{className:"font-bold text-sm md:text-lg mb-0.5 md:mb-1",children:"Create New Event"}),a.jsx("p",{className:"text-xs md:text-sm opacity-80",children:"Start organizing your next event"})]})})})]}),a.jsx("div",{style:{display:"events"===j?"block":"none"},children:a.jsx(V,{onDelete:e=>ed.mutate(e)})}),"past-events"===j&&(0,a.jsxs)("div",{className:"p-3 md:p-6",children:[(0,a.jsxs)("div",{className:"mb-4 md:mb-6",children:[a.jsx("h2",{className:"text-lg md:text-2xl font-bold mb-1 md:mb-2",children:"Past Events"}),a.jsx("p",{className:"text-xs md:text-sm text-muted-foreground",children:"Events that have already occurred"})]}),et?(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx(A.Z,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-primary"}),a.jsx("p",{className:"text-muted-foreground",children:"Loading past events..."})]}):es&&0!==es.length?a.jsx("div",{className:"grid gap-3 md:gap-4",children:es.map(e=>{let s=e.ticket_types||[],t=s.reduce((e,s)=>e+(s.sold_count||0),0),r=s.reduce((e,s)=>e+(s.quantity||0),0),d=s.reduce((e,s)=>e+(s.price||0)*(s.sold_count||0),0);return a.jsx("div",{className:"bg-card rounded-xl border border-border p-4 md:p-6 hover:shadow-lg transition-shadow",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-start gap-3 md:gap-4",children:[e.image_url&&a.jsx("div",{className:"w-full md:w-32 h-32 rounded-lg overflow-hidden bg-muted shrink-0",children:a.jsx("img",{src:e.image_url,alt:e.title,className:"w-full h-full object-cover"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-2",children:[(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[a.jsx("h3",{className:"text-base md:text-xl font-bold mb-1 truncate",children:e.title}),a.jsx(o.C,{className:"text-xs mb-1",children:e.category})]}),a.jsx(o.C,{variant:"secondary",className:"shrink-0 text-xs",children:"Past"})]}),a.jsx("p",{className:"text-xs md:text-sm text-muted-foreground mb-2",children:e.location}),a.jsx("p",{className:"text-xs md:text-sm text-muted-foreground mb-3",children:(0,D.WU)(new Date(e.date),"EEE, MMM d, yyyy • h:mm a")}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 md:gap-4 pt-3 border-t border-border",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Tickets Sold"}),(0,a.jsxs)("p",{className:"text-sm md:text-base font-semibold",children:[t," / ",r]})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Revenue"}),(0,a.jsxs)("p",{className:"text-sm md:text-base font-semibold text-primary",children:["₦",d.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"col-span-2 md:col-span-1",children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Attendees"}),a.jsx("p",{className:"text-sm md:text-base font-semibold",children:t})]})]}),(0,a.jsxs)("div",{className:"flex gap-2 mt-3",children:[a.jsx(n.default,{href:`/event/${e.id}`,className:"flex-1",children:(0,a.jsxs)(c.z,{variant:"outline",size:"sm",className:"w-full text-xs",children:[a.jsx(S.Z,{className:"w-3 h-3 md:w-4 md:h-4 mr-1"}),"View Event"]})}),a.jsx(n.default,{href:`/dashboard/creator/analytics/${e.id}`,className:"flex-1",children:(0,a.jsxs)(c.z,{variant:"hero",size:"sm",className:"w-full text-xs",children:[a.jsx(g.Z,{className:"w-3 h-3 md:w-4 md:h-4 mr-1"}),"Analytics"]})})]})]})]})},e.id)})}):(0,a.jsxs)("div",{className:"text-center py-12 bg-card rounded-lg border border-border",children:[a.jsx(u.Z,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No past events"}),a.jsx("p",{className:"text-muted-foreground",children:"You don't have any past events yet."})]})]}),a.jsx("div",{style:{display:"tickets"===j?"block":"none"},children:a.jsx(O,{})}),"my-tickets"===j&&(0,a.jsxs)("div",{className:"p-3 md:p-6",children:[(0,a.jsxs)("div",{className:"mb-4 md:mb-6",children:[a.jsx("h2",{className:"text-lg md:text-2xl font-bold mb-1 md:mb-2",children:"My Purchased Tickets"}),a.jsx("p",{className:"text-xs md:text-sm text-muted-foreground",children:"Tickets you've purchased for events"})]}),er?(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx(A.Z,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-primary"}),a.jsx("p",{className:"text-muted-foreground",children:"Loading your tickets..."})]}):ea&&0!==ea.length?a.jsx("div",{className:"grid gap-3",children:ea.map(e=>{let s=e.event,t=e.ticket_type,r=e.qr_code_data?.qrCodeImageUrl||e.qr_code_data?.qrCodeImage;return a.jsx("div",{className:"bg-card rounded-xl border border-border p-4 md:p-6 hover:shadow-lg transition-shadow",children:(0,a.jsxs)("div",{className:"flex gap-3 md:gap-4",children:[s?.image_url&&a.jsx("div",{className:"w-20 h-20 md:w-32 md:h-32 rounded-lg overflow-hidden bg-muted shrink-0",children:a.jsx("img",{src:s.image_url,alt:s.title,className:"w-full h-full object-cover"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-2",children:[(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[a.jsx("h3",{className:"text-base md:text-xl font-bold mb-1 truncate",children:s?.title||"Event"}),a.jsx(o.C,{className:"text-xs",children:s?.category||"Event"})]}),a.jsx(o.C,{variant:"valid"===e.status?"default":"used"===e.status?"secondary":"destructive",className:"shrink-0 text-xs",children:"valid"===e.status?"Valid":"used"===e.status?"Used":"Cancelled"})]}),(0,a.jsxs)("div",{className:"space-y-1.5 mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs md:text-sm text-muted-foreground",children:[a.jsx(u.Z,{className:"w-3 h-3 md:w-4 md:h-4 shrink-0"}),a.jsx("span",{className:"truncate",children:s?.date?(0,D.WU)(new Date(s.date),"MMM d, yyyy • h:mm a"):"Date TBD"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs md:text-sm text-muted-foreground",children:[a.jsx(P.Z,{className:"w-3 h-3 md:w-4 md:h-4 shrink-0"}),a.jsx("span",{className:"truncate",children:s?.location||"Location TBD"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 pt-3 border-t border-border",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Ticket Type"}),a.jsx("p",{className:"text-sm md:text-base font-semibold",children:t?.name||"General Admission"}),t?.price!==void 0&&a.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:t.is_free?"Free":`₦${t.price}`})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx(n.default,{href:`/invoice/${e.order_id}`,className:"flex-1 sm:flex-initial",children:a.jsx(c.z,{variant:"outline",size:"sm",className:"w-full sm:w-auto text-xs",children:"See Ticket"})}),r&&a.jsx(n.default,{href:`/invoice/${e.order_id}`,className:"flex-1 sm:flex-initial",children:(0,a.jsxs)(c.z,{variant:"hero",size:"sm",className:"w-full sm:w-auto gap-2 text-xs",children:[a.jsx(z.Z,{className:"w-3 h-3 md:w-4 md:h-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Download"})]})})]})]})]})]})},e.id)})}):(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx(v,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No tickets yet"}),a.jsx("p",{className:"text-muted-foreground mb-6",children:"You haven't purchased any tickets yet. Start exploring events!"}),a.jsx(n.default,{href:"/",children:a.jsx(c.z,{variant:"hero",children:"Browse Events"})})]})]}),a.jsx("div",{style:{display:"withdraw"===j?"block":"none"},children:a.jsx(ef,{})}),a.jsx("div",{style:{display:"settings"===j?"block":"none"},children:a.jsx(eu,{})})]}),a.jsx(m.aR,{open:W,onOpenChange:G,children:(0,a.jsxs)(m._T,{children:[(0,a.jsxs)(m.fY,{children:[a.jsx(m.f$,{children:"Delete Event"}),a.jsx(m.yT,{children:"Are you sure you want to delete this event? This action cannot be undone. The event will be moved to deleted events."})]}),(0,a.jsxs)(m.xo,{children:[a.jsx(m.le,{onClick:()=>J(null),children:"Cancel"}),a.jsx(m.OL,{onClick:()=>{H&&(ed.mutate(H),G(!1),J(null))},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})})]}):a.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("p",{className:"mb-2 text-lg font-semibold",children:"Authentication Required"}),a.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Please sign in to access your dashboard."}),a.jsx(n.default,{href:"/auth/signin?redirect=/dashboard/creator",children:a.jsx(c.z,{variant:"hero",children:"Sign In"})})]})})}function eg(){return a.jsx(r.Suspense,{fallback:a.jsx("div",{className:"min-h-screen bg-background",children:a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})})}),children:a.jsx(eb,{})})}},26754:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(62881).Z)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},77636:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(62881).Z)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},34233:(e,s,t)=>{"use strict";t.d(s,{Z:()=>i});var a=t(10326),r=t(60850),n=t(72607),d=t(91664),l=t(87183);let i=()=>{let{theme:e,toggleTheme:s}=(0,l.F)();return a.jsx(d.z,{variant:"ghost",size:"icon",onClick:s,className:"rounded-full",children:"dark"===e?a.jsx(r.Z,{className:"w-5 h-5"}):a.jsx(n.Z,{className:"w-5 h-5"})})}},55296:(e,s,t)=>{"use strict";t.d(s,{OL:()=>f,_T:()=>m,aR:()=>i,f$:()=>h,fY:()=>x,le:()=>b,xo:()=>u,yT:()=>p});var a=t(10326),r=t(17577),n=t(80440),d=t(51223),l=t(91664);let i=n.fC;n.xz;let c=n.h_,o=r.forwardRef(({className:e,...s},t)=>a.jsx(n.aV,{className:(0,d.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s,ref:t}));o.displayName=n.aV.displayName;let m=r.forwardRef(({className:e,...s},t)=>(0,a.jsxs)(c,{children:[a.jsx(o,{}),a.jsx(n.VY,{ref:t,className:(0,d.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...s})]}));m.displayName=n.VY.displayName;let x=({className:e,...s})=>a.jsx("div",{className:(0,d.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...s});x.displayName="AlertDialogHeader";let u=({className:e,...s})=>a.jsx("div",{className:(0,d.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...s});u.displayName="AlertDialogFooter";let h=r.forwardRef(({className:e,...s},t)=>a.jsx(n.Dx,{ref:t,className:(0,d.cn)("text-lg font-semibold",e),...s}));h.displayName=n.Dx.displayName;let p=r.forwardRef(({className:e,...s},t)=>a.jsx(n.dk,{ref:t,className:(0,d.cn)("text-sm text-muted-foreground",e),...s}));p.displayName=n.dk.displayName;let f=r.forwardRef(({className:e,...s},t)=>a.jsx(n.aU,{ref:t,className:(0,d.cn)((0,l.d)(),e),...s}));f.displayName=n.aU.displayName;let b=r.forwardRef(({className:e,...s},t)=>a.jsx(n.$j,{ref:t,className:(0,d.cn)((0,l.d)({variant:"outline"}),"mt-2 sm:mt-0",e),...s}));b.displayName=n.$j.displayName},91664:(e,s,t)=>{"use strict";t.d(s,{d:()=>i,z:()=>c});var a=t(10326),r=t(17577),n=t(34214),d=t(79360),l=t(51223);let i=(0,d.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-full text-sm font-semibold transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-button hover:brightness-110 active:scale-95",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border-2 border-primary bg-transparent text-primary hover:bg-primary hover:text-primary-foreground",secondary:"bg-secondary text-secondary-foreground hover:brightness-110 active:scale-95",ghost:"hover:bg-muted hover:text-foreground",link:"text-primary underline-offset-4 hover:underline",hero:"bg-primary text-primary-foreground shadow-button hover:brightness-110 active:scale-95 font-bold",accent:"bg-accent text-accent-foreground border border-border hover:bg-muted active:scale-95"},size:{default:"h-11 px-6 py-2",sm:"h-9 px-4 text-xs",lg:"h-14 px-8 text-base",xl:"h-16 px-10 text-lg",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef(({className:e,variant:s,size:t,asChild:r=!1,...d},c)=>{let o=r?n.g7:"button";return a.jsx(o,{className:(0,l.cn)(i({variant:s,size:t,className:e})),ref:c,...d})});c.displayName="Button"},22321:(e,s,t)=>{"use strict";t.d(s,{G5:()=>n,Wb:()=>r,m5:()=>l,s4:()=>d});let a=("undefined"!=typeof process?"pk_test_305a29a2af6419e97f6aaf29d62c648d334d8a1c":void 0)||"";a||console.warn("Paystack public key is not set. Payment functionality will not work.");let r=e=>{if(!window.PaystackPop){console.error("Paystack not loaded");return}window.PaystackPop.setup({key:a,email:e.email,amount:100*e.amount,ref:e.ref,currency:e.currency||"NGN",metadata:e.metadata,callback:s=>{e.callback&&e.callback(s)},onClose:()=>{e.onClose&&e.onClose()}}).openIframe()},n=async()=>{try{try{let e=await fetch("/api/get-banks",{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok){let s=await e.json().catch(()=>({}));throw Error(s.error||`HTTP error! status: ${e.status}`)}let s=await e.json();if(s.error)throw Error(s.error);let t=s.banks||[];return console.log("Banks from API route:",t.length,"banks"),0===t.length&&console.warn("Empty banks array returned"),t}catch(n){console.warn("API route failed, trying edge function:",n.message);let{supabase:e}=await Promise.resolve().then(t.bind(t,2777)),{data:{session:s}}=await e.auth.getSession(),{data:a,error:r}=await e.functions.invoke("get-paystack-banks",{headers:{Authorization:s?`Bearer ${s.access_token}`:""}});if(r)throw r;if(!a)throw Error("No response from bank service");if(a.error)throw Error(a.error);return a.banks||[]}}catch(s){console.error("Error fetching banks:",s);let e=s.message||JSON.stringify(s);if(e.includes("not found")||e.includes("404")||e.includes("Function not found")||e.includes("Failed to send")||e.includes("CORS"))throw Error("Bank service is not available. Please check your environment variables (PAYSTACK_SECRET_KEY) and try again.");throw Error(s.message||"Failed to fetch banks. Please try again.")}},d=async e=>{try{if(!e.account_number||!e.bank_code)return{verified:!1,error:"Account number and bank code are required"};if(10!==e.account_number.length)return{verified:!1,error:"Account number must be exactly 10 digits"};try{let s=await fetch("/api/verify-bank-account",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error(e.error||`HTTP error! status: ${s.status}`)}let t=await s.json();if(t.error)return{verified:!1,error:t.error};return{verified:t.verified||!1,account_name:t.account_name,account_number:t.account_number,bank_id:t.bank_id}}catch(d){console.warn("API route failed, trying edge function:",d.message);let{supabase:s}=await Promise.resolve().then(t.bind(t,2777)),{data:{session:a}}=await s.auth.getSession(),{data:r,error:n}=await s.functions.invoke("verify-bank-account",{body:e,headers:{Authorization:a?`Bearer ${a.access_token}`:""}});if(n)throw n;if(!r)return{verified:!1,error:"No response from verification service"};if(r.error)return{verified:!1,error:r.error};return{verified:r.verified||!1,account_name:r.account_name,account_number:r.account_number,bank_id:r.bank_id}}}catch(s){console.error("Bank verification error:",s);let e=s.message||JSON.stringify(s);if(e.includes("not found")||e.includes("404")||e.includes("Function not found")||e.includes("Failed to send")||e.includes("CORS"))return{verified:!1,error:"Bank verification service is not available. Please check your environment variables (PAYSTACK_SECRET_KEY) and try again."};return{verified:!1,error:s.message||"Failed to verify bank account. Please try again."}}},l=async(e,s)=>{try{try{let t=await fetch("/api/verify-payment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:e,paystackReference:s})});if(!t.ok){let e=await t.json().catch(()=>({}));throw Error(e.error||`HTTP error! status: ${t.status}`)}return await t.json()}catch(l){console.warn("API route failed, trying edge function:",l.message);let{supabase:a}=await Promise.resolve().then(t.bind(t,2777)),{data:{session:r}}=await a.auth.getSession(),{data:n,error:d}=await a.functions.invoke("verify-payment",{body:{orderId:e,paystackReference:s},headers:{Authorization:r?`Bearer ${r.access_token}`:"","Content-Type":"application/json"}});if(d)throw d;if(!n)throw Error("No response from verification service");return n}}catch(s){console.error("Payment verification error:",s);let e=s.message||JSON.stringify(s);if(e.includes("not found")||e.includes("404")||e.includes("Function not found")||e.includes("Failed to send")||e.includes("CORS"))return{verified:!1,error:"Payment verification service error. Please check your environment variables (PAYSTACK_SECRET_KEY, SUPABASE_SERVICE_ROLE_KEY) and try again."};return{verified:!1,error:s.message||"Failed to verify payment. Please try again."}}}},90427:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(68570).createProxy)(String.raw`/Users/mac/Desktop/Client projects/frecks-new/app/dashboard/creator/page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[948,759,65,453,561,812,108,145,629,612,236,863,168],()=>t(93368));module.exports=a})();