(()=>{var e={};e.id=710,e.ids=[710],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},93186:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>d.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>o,routeModule:()=>x,tree:()=>c}),r(19530),r(84752),r(96560);var s=r(23191),a=r(88716),i=r(37922),d=r.n(i),n=r(95231),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);r.d(t,l);let c=["",{children:["dashboard",{children:["creator",{children:["analytics",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,19530)),"/Users/mac/Desktop/Client projects/frecks-new/app/dashboard/creator/analytics/[id]/page.tsx"]}]},{}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,24697))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,84752)),"/Users/mac/Desktop/Client projects/frecks-new/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,96560)),"/Users/mac/Desktop/Client projects/frecks-new/app/not-found.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,24697))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],o=["/Users/mac/Desktop/Client projects/frecks-new/app/dashboard/creator/analytics/[id]/page.tsx"],u="/dashboard/creator/analytics/[id]/page",m={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/creator/analytics/[id]/page",pathname:"/dashboard/creator/analytics/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},50742:(e,t,r)=>{Promise.resolve().then(r.bind(r,93030))},93030:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v});var s=r(10326),a=r(35047),i=r(20108),d=r(91664),n=r(38443),l=r(76253),c=r(94001),o=r(86333),u=r(21985),m=r(17069),x=r(71821),h=r(24061),p=r(26754),f=r(90434),b=r(2453),g=r(77506);function v(){let e=(0,a.useParams)();(0,a.useRouter)();let t=e.id,{profile:r,user:v}=(0,c.a)(),{data:y,isLoading:j}=(0,i.a)({queryKey:["event",t],queryFn:()=>(0,l.Y)(t),enabled:!!t}),{data:w,isLoading:N}=(0,i.a)({queryKey:["event-analytics",t],queryFn:()=>(0,l.Q6)(t),enabled:!!t});if(!r||"creator"!==r.role)return s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("p",{className:"mb-2",children:"Access Denied"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Only creators can view analytics."})]})});if(j||N)return s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(g.Z,{className:"w-8 h-8 animate-spin"})});if(!y)return s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("p",{className:"mb-2",children:"Event not found"}),s.jsx(f.default,{href:"/dashboard/creator",children:s.jsx(d.z,{variant:"outline",children:"Back to Dashboard"})})]})});let _=w?.orders||[],k=w?.tickets||[],q=y.ticket_types||[],M=k.length,Z=q.reduce((e,t)=>e+(t.quantity||0),0),P=_.reduce((e,t)=>e+Math.max(0,(parseFloat(t.total_amount)||0)-200),0),S=_.length,D=k.filter(e=>"used"===e.status).length,z=k.filter(e=>"valid"===e.status).length,T=q.map(e=>{let t=k.filter(t=>t.ticket_type_id===e.id),r=t.length*(e.price||0);return{name:e.name,sold:t.length,revenue:r,price:e.price||0}});return(0,s.jsxs)("div",{className:"min-h-screen bg-background",children:[s.jsx("div",{className:"border-b border-border bg-card sticky top-0 z-10",children:s.jsx("div",{className:"container mx-auto px-4 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[s.jsx(f.default,{href:"/dashboard/creator",children:s.jsx(d.z,{variant:"ghost",size:"icon",children:s.jsx(o.Z,{className:"w-5 h-5"})})}),(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Event Analytics"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:y.title})]})]}),s.jsx("div",{className:"flex gap-2",children:s.jsx(f.default,{href:`/dashboard/creator/edit/${t}`,children:s.jsx(d.z,{variant:"outline",children:"Edit Event"})})})]})})}),(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[s.jsx("div",{className:"bg-card rounded-2xl border border-border p-6 mb-6",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-6",children:[y.image_url&&s.jsx("img",{src:y.image_url,alt:y.title,className:"w-full md:w-64 h-48 object-cover rounded-lg"}),(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("div",{className:"flex items-start justify-between mb-4",children:(0,s.jsxs)("div",{children:[s.jsx("h2",{className:"text-2xl font-bold mb-2",children:y.title}),s.jsx(n.C,{className:"active"===y.status?"bg-primary":"bg-muted",children:y.status})]})}),s.jsx("p",{className:"text-muted-foreground mb-4",children:y.description}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Date & Time"}),s.jsx("p",{className:"font-medium",children:(0,b.WU)(new Date(y.date),"MMM d, yyyy • h:mm a")})]}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Location"}),s.jsx("p",{className:"font-medium",children:y.location})]}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Category"}),s.jsx("p",{className:"font-medium",children:y.category})]})]})]})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[(0,s.jsxs)("div",{className:"bg-card rounded-2xl border border-border p-6",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[s.jsx("div",{className:"w-12 h-12 rounded-xl bg-primary/10 flex items-center justify-center",children:s.jsx(u.Z,{className:"w-6 h-6 text-primary"})}),s.jsx(m.Z,{className:"w-5 h-5 text-primary"})]}),s.jsx("div",{className:"text-2xl font-bold mb-1",children:M}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Tickets Sold"}),s.jsx("div",{className:"text-xs text-muted-foreground mt-2",children:Z>0?`${Math.round(M/Z*100)}% of ${Z}`:"No tickets available"})]}),(0,s.jsxs)("div",{className:"bg-card rounded-2xl border border-border p-6",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[s.jsx("div",{className:"w-12 h-12 rounded-xl bg-green-500/10 flex items-center justify-center",children:s.jsx(x.Z,{className:"w-6 h-6 text-green-600"})}),s.jsx(m.Z,{className:"w-5 h-5 text-green-600"})]}),(0,s.jsxs)("div",{className:"text-2xl font-bold mb-1",children:["₦",P.toLocaleString()]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Revenue"}),(0,s.jsxs)("div",{className:"text-xs text-muted-foreground mt-2",children:[S," ",1===S?"order":"orders"]})]}),(0,s.jsxs)("div",{className:"bg-card rounded-2xl border border-border p-6",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[s.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-500/10 flex items-center justify-center",children:s.jsx(h.Z,{className:"w-6 h-6 text-blue-600"})}),s.jsx(m.Z,{className:"w-5 h-5 text-blue-600"})]}),s.jsx("div",{className:"text-2xl font-bold mb-1",children:D}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Checked In"}),(0,s.jsxs)("div",{className:"text-xs text-muted-foreground mt-2",children:[z," pending"]})]}),(0,s.jsxs)("div",{className:"bg-card rounded-2xl border border-border p-6",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[s.jsx("div",{className:"w-12 h-12 rounded-xl bg-purple-500/10 flex items-center justify-center",children:s.jsx(p.Z,{className:"w-6 h-6 text-purple-600"})}),s.jsx(m.Z,{className:"w-5 h-5 text-purple-600"})]}),s.jsx("div",{className:"text-2xl font-bold mb-1",children:S}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Orders"}),s.jsx("div",{className:"text-xs text-muted-foreground mt-2",children:"All paid"})]})]}),(0,s.jsxs)("div",{className:"bg-card rounded-2xl border border-border p-6 mb-6",children:[s.jsx("h3",{className:"text-xl font-bold mb-4",children:"Revenue by Ticket Type"}),s.jsx("div",{className:"space-y-4",children:T.map((e,t)=>(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium",children:e.name}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.sold," sold @ ₦",e.price.toLocaleString()," each"]})]}),s.jsx("div",{className:"text-right",children:(0,s.jsxs)("p",{className:"text-lg font-bold text-primary",children:["₦",e.revenue.toLocaleString()]})})]}),Z>0&&s.jsx("div",{className:"w-full h-2 bg-muted rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-primary rounded-full",style:{width:`${e.sold/Z*100}%`}})})]},t))})]}),(0,s.jsxs)("div",{className:"bg-card rounded-2xl border border-border p-6 mb-6",children:[s.jsx("h3",{className:"text-xl font-bold mb-4",children:"Ticket Types Breakdown"}),s.jsx("div",{className:"space-y-4",children:q.map((e,t)=>{let r=k.filter(t=>t.ticket_type_id===e.id).length,a=e.quantity||0,i=a>0?r/a*100:0;return(0,s.jsxs)("div",{className:"p-4 border border-border rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium",children:e.name}),e.description&&s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:e.description})]}),s.jsx("div",{className:"text-right",children:s.jsx("p",{className:"font-bold",children:0===e.price?"Free":`₦${e.price.toLocaleString()}`})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm text-muted-foreground mb-2",children:[(0,s.jsxs)("span",{children:[r," / ",a," sold"]}),(0,s.jsxs)("span",{children:[Math.round(i),"%"]})]}),s.jsx("div",{className:"w-full h-2 bg-muted rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-primary rounded-full",style:{width:`${i}%`}})})]},e.id||t)})})]}),(0,s.jsxs)("div",{className:"bg-card rounded-2xl border border-border p-6",children:[s.jsx("h3",{className:"text-xl font-bold mb-4",children:"Recent Orders"}),0===_.length?s.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No orders yet"}):s.jsx("div",{className:"space-y-4",children:_.slice(0,10).map(e=>s.jsx("div",{className:"p-4 border border-border rounded-lg",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[s.jsx("p",{className:"font-medium",children:e.full_name}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e.email}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:(0,b.WU)(new Date(e.created_at),"MMM d, yyyy • h:mm a")})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"font-bold text-primary",children:["₦",Math.max(0,parseFloat(e.total_amount||0)-200).toLocaleString()]}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground line-through",children:["₦",parseFloat(e.total_amount||0).toLocaleString()," (includes service charge)"]})]}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:[e.tickets?.length||0," ",e.tickets?.length===1?"ticket":"tickets"]})]})]})},e.id))})]})]})]})}},86333:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(62881).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},26754:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(62881).Z)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},71821:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(62881).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},77506:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(62881).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},21985:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(62881).Z)("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]])},17069:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(62881).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},24061:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(62881).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},90434:(e,t,r)=>{"use strict";r.d(t,{default:()=>a.a});var s=r(79404),a=r.n(s)},35047:(e,t,r)=>{"use strict";var s=r(77389);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},38443:(e,t,r)=>{"use strict";r.d(t,{C:()=>n});var s=r(10326);r(17577);var a=r(79360),i=r(51223);let d=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n({className:e,variant:t,...r}){return s.jsx("div",{className:(0,i.cn)(d({variant:t}),e),...r})}},91664:(e,t,r)=>{"use strict";r.d(t,{d:()=>l,z:()=>c});var s=r(10326),a=r(17577),i=r(34214),d=r(79360),n=r(51223);let l=(0,d.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-full text-sm font-semibold transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-button hover:brightness-110 active:scale-95",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border-2 border-primary bg-transparent text-primary hover:bg-primary hover:text-primary-foreground",secondary:"bg-secondary text-secondary-foreground hover:brightness-110 active:scale-95",ghost:"hover:bg-muted hover:text-foreground",link:"text-primary underline-offset-4 hover:underline",hero:"bg-primary text-primary-foreground shadow-button hover:brightness-110 active:scale-95 font-bold",accent:"bg-accent text-accent-foreground border border-border hover:bg-muted active:scale-95"},size:{default:"h-11 px-6 py-2",sm:"h-9 px-4 text-xs",lg:"h-14 px-8 text-base",xl:"h-16 px-10 text-lg",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef(({className:e,variant:t,size:r,asChild:a=!1,...d},c)=>{let o=a?i.g7:"button";return s.jsx(o,{className:(0,n.cn)(l({variant:t,size:r,className:e})),ref:c,...d})});c.displayName="Button"},76253:(e,t,r)=>{"use strict";r.d(t,{AW:()=>v,DK:()=>u,HG:()=>n,IP:()=>g,Q6:()=>x,Qn:()=>l,TX:()=>o,T_:()=>f,Y:()=>d,Y9:()=>N,ZD:()=>c,fX:()=>j,ks:()=>m,nk:()=>i,pj:()=>b,sN:()=>w,vw:()=>a,wY:()=>h,z8:()=>p,zk:()=>y});var s=r(2777);let a=async()=>{let e=new Date().toISOString(),{data:t,error:r}=await s.supabase.from("events").select("*, ticket_types(*)").eq("status","active").gte("date",e).order("created_at",{ascending:!1});if(r)throw r;return t},i=async e=>{let t=new Date().toISOString(),r=s.supabase.from("events").select("*, ticket_types(*), creator:users!events_creator_id_fkey(school)").eq("status","active").gte("date",t);if(e.search&&e.search.trim()){let t=e.search.trim().replace(/%/g,"\\%").replace(/_/g,"\\_");r=r.or(`title.ilike.%${t}%,description.ilike.%${t}%`)}e.category&&"all"!==e.category&&(r=r.eq("category",e.category)),e.location&&e.location.trim()&&(r=r.ilike("location",`%${e.location}%`)),e.dateFrom&&(r=r.gte("date",e.dateFrom)),e.dateTo&&(r=r.lte("date",e.dateTo)),r=r.order("date",{ascending:!0});let{data:a,error:i}=await r;if(i)throw i;let d=a||[];return e.school&&"all"!==e.school&&(d=d.filter(t=>{let r=t.creator;return r?.school===e.school})),d},d=async e=>{let{data:t,error:r}=await s.supabase.from("events").select("*, ticket_types(*)").eq("id",e).single();if(r)throw r;return t},n=async e=>{let{data:t,error:r}=await s.supabase.from("orders").select("*, event:events(*), tickets(*, ticket_type:ticket_types(*))").eq("id",e).single();if(r)throw r;return t},l=async e=>{let{data:t,error:r}=await s.supabase.from("tickets").select("*, event:events(*), ticket_type:ticket_types(*)").eq("id",e).single();if(r)throw r;return t},c=async e=>{let{data:t,error:r}=await s.supabase.from("orders").select("id").eq("user_id",e).eq("payment_status","paid");if(r)throw r;if(!t||0===t.length)return[];let a=t.map(e=>e.id),{data:i,error:d}=await s.supabase.from("tickets").select("*, event:events(*), ticket_type:ticket_types(*), order:orders(*)").eq("user_id",e).in("order_id",a).order("created_at",{ascending:!1});if(d)throw d;return i||[]},o=async e=>{let t=new Date().toISOString(),{data:r,error:a}=await s.supabase.from("events").select("*, ticket_types(*)").eq("creator_id",e).gte("date",t).order("date",{ascending:!0});if(a)throw a;return r},u=async e=>{let t=new Date().toISOString(),{data:r,error:a}=await s.supabase.from("events").select("*, ticket_types(*)").eq("creator_id",e).lt("date",t).order("date",{ascending:!1});if(a)throw a;return r},m=async e=>{let{data:t,error:r}=await s.supabase.from("creator_profiles").select("*").eq("user_id",e).maybeSingle();if(r)throw r;return t||null},x=async e=>{let{data:t,error:r}=await s.supabase.from("orders").select("*, tickets(*)").eq("event_id",e).eq("payment_status","paid");if(r)throw r;let{data:a,error:i}=await s.supabase.from("tickets").select("*, ticket_type:ticket_types(*)").eq("event_id",e);if(i)throw i;return{orders:t||[],tickets:a||[]}},h=async e=>{let{data:t,error:r}=await s.supabase.from("wallet_transactions").select("*").eq("creator_id",e).order("created_at",{ascending:!1});if(r)throw r;return t},p=async e=>{let{data:t,error:r}=await s.supabase.from("withdrawals").select("*").eq("creator_id",e).order("created_at",{ascending:!1});if(r)throw r;return t||[]},f=async()=>{let{data:e,error:t}=await s.supabase.from("withdrawals").select("*, creator:users!withdrawals_creator_id_fkey(id, email, full_name, school)").order("created_at",{ascending:!1});if(t)throw t;return e||[]},b=async e=>{let{data:t,error:r}=await s.supabase.from("creator_profiles").select("account_balance, bank_account_name, bank_account_number, bank_name, bank_code, is_bank_verified").eq("user_id",e).single();if(r)throw r;return t},g=async()=>{let{data:e,error:t}=await s.supabase.from("events").select("*, ticket_types(*), creator:users!events_creator_id_fkey(id, email, full_name, school)").order("created_at",{ascending:!1});if(t)throw t;return e||[]},v=async()=>{let{data:e,error:t}=await s.supabase.from("users").select("*").order("created_at",{ascending:!1});if(t)throw t;return e||[]},y=async()=>{let{data:e,error:t}=await s.supabase.from("orders").select("*, event:events(id, title, creator:users!events_creator_id_fkey(id, email, full_name)), user:users(id, email, full_name)").order("created_at",{ascending:!1});if(t)throw t;return e||[]},j=async()=>{let{data:e,error:t}=await s.supabase.from("tickets").select("*, event:events(id, title), ticket_type:ticket_types(id, name, price, is_free), user:users(id, email, full_name), order:orders(id, payment_status)").order("created_at",{ascending:!1});if(t)throw console.error("Error fetching all tickets:",t),t;return e||[]},w=async()=>{let{data:e,error:t}=await s.supabase.from("users").select("*, creator_profile:creator_profiles(*)").eq("role","creator").order("created_at",{ascending:!1});if(t)throw t;return e||[]},N=async()=>{let{data:e,error:t}=await s.supabase.from("events").select("status");if(t)throw t;let r={active:0,draft:0,completed:0,cancelled:0};e?.forEach(e=>{e.status in r&&r[e.status]++});let{data:a,error:i}=await s.supabase.from("users").select("role, banned");if(i)throw i;let d={user:0,creator:0,admin:0},n=0;a?.forEach(e=>{e.role in d&&d[e.role]++,e.banned&&n++});let{data:l,error:c}=await s.supabase.from("orders").select("total_amount, created_at").eq("payment_status","paid");if(c)throw c;let o=l?.reduce((e,t)=>e+parseFloat(t.total_amount||0),0)||0,u=new Date,m=new Date(u.getFullYear(),u.getMonth(),1).toISOString(),x=l?.filter(e=>e.created_at>=m).reduce((e,t)=>e+parseFloat(t.total_amount||0),0)||0,{data:h,error:p}=await s.supabase.from("tickets").select("id");if(p)throw p;let f=h?.length||0,{data:b,error:g}=await s.supabase.from("users").select("id").eq("role","creator");if(g)throw g;let v=b?.length||0;return{events:{total:e?.length||0,byStatus:r},users:{total:a?.length||0,byRole:d,banned:n},revenue:{total:o,thisMonth:x},tickets:{totalSold:f},organizers:{active:v}}}},19530:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`/Users/mac/Desktop/Client projects/frecks-new/app/dashboard/creator/analytics/[id]/page.tsx#default`)}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,759,453,108,236],()=>r(93186));module.exports=s})();