(()=>{var e={};e.id=737,e.ids=[737],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},56436:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>d,routeModule:()=>p,tree:()=>c}),r(84479),r(84752),r(96560);var s=r(23191),a=r(88716),i=r(37922),n=r.n(i),o=r(95231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let c=["",{children:["dashboard",{children:["creator",{children:["edit",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,84479)),"/Users/mac/Desktop/Client projects/frecks-new/app/dashboard/creator/edit/[id]/page.tsx"]}]},{}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,24697))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,84752)),"/Users/mac/Desktop/Client projects/frecks-new/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,96560)),"/Users/mac/Desktop/Client projects/frecks-new/app/not-found.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,24697))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/Users/mac/Desktop/Client projects/frecks-new/app/dashboard/creator/edit/[id]/page.tsx"],m="/dashboard/creator/edit/[id]/page",u={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/creator/edit/[id]/page",pathname:"/dashboard/creator/edit/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},56462:(e,t,r)=>{Promise.resolve().then(r.bind(r,31346))},31346:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>D});var s=r(10326),a=r(17577),i=r(35047),n=r(74723),o=r(74064),l=r(770),c=r(20108),d=r(10119),m=r(91664),u=r(41190),p=r(44794),h=r(82015),x=r(94001),f=r(47272),g=r(76253),y=r(2777),j=r(77506),b=r(86333),_=r(94019),v=r(71709),w=r(24230),k=r(32933),N=r(90434),S=r(2453),q=r(85999);let P=["Concert","Sports","Party","Comedy","Film","Workshop","Conference","Festival","Other"],E=l.Ry({title:l.Z_().min(3,"Title must be at least 3 characters"),description:l.Z_().min(10,"Description must be at least 10 characters"),category:l.Z_().min(1,"Please select a category"),image:l.Yj().optional(),is_online:l.O7().default(!1),location:l.Z_().min(3,"Location is required"),start_date:l.Z_().min(1,"Start date is required"),start_time:l.Z_().min(1,"Start time is required"),end_date:l.Z_().optional(),end_time:l.Z_().optional()});function D(){let e=(0,i.useRouter)(),t=(0,i.useParams)().id,{profile:r,user:l}=(0,x.a)(),[D,F]=(0,a.useState)(1),[I,T]=(0,a.useState)(null),[C,Z]=(0,a.useState)(!1),{data:U,isLoading:$}=(0,c.a)({queryKey:["event",t],queryFn:()=>(0,g.Y)(t),enabled:!!t}),A=(0,n.cI)({resolver:(0,o.F)(E),defaultValues:{is_online:!1,end_date:"",end_time:""}}),M=(0,n.cI)({defaultValues:{ticket_types:[]}}),{fields:O,append:R,remove:z}=(0,n.Dq)({control:M.control,name:"ticket_types"}),G=(0,n.cI)({defaultValues:{ticket_types:[]}}),V=A.watch(),L=M.watch("ticket_types"),B=G.watch("ticket_types"),Y=(e,t=1920,r=.85)=>new Promise((s,a)=>{let i=new FileReader;i.readAsDataURL(e),i.onload=i=>{let n=new Image;n.src=i.target?.result,n.onload=()=>{let i=document.createElement("canvas"),o=n.width,l=n.height;o>t&&(l=l*t/o,o=t),i.width=o,i.height=l;let c=i.getContext("2d");if(!c){a(Error("Failed to get canvas context"));return}c.drawImage(n,0,0,o,l),i.toBlob(t=>{if(!t){a(Error("Failed to compress image"));return}s(new File([t],e.name,{type:"image/jpeg",lastModified:Date.now()}))},"image/jpeg",r)},n.onerror=()=>a(Error("Failed to load image"))},i.onerror=()=>a(Error("Failed to read file"))}),Q=async e=>{if(!l)throw Error("User not authenticated");let t=await Y(e),r=`${l.id}/${Date.now()}.jpg`,{error:s}=await y.supabase.storage.from("event-images").upload(r,t,{cacheControl:"3600",upsert:!1});if(s)throw Error(`Image upload failed: ${s.message}`);let{data:a}=y.supabase.storage.from("event-images").getPublicUrl(r);if(!a?.publicUrl)throw Error("Failed to get public URL for uploaded image");return a.publicUrl},W=(0,d.D)({mutationFn:async()=>{if(!l||!r)throw Error("User not authenticated");let e=U?.image_url,s=A.getValues("image");if(s){Z(!0);try{e=await Q(s)}catch(e){console.warn("Image upload failed, keeping existing image:",e.message)}finally{Z(!1)}}let a=new Date(`${V.start_date}T${V.start_time}`),i=V.is_online?`Online - ${V.location}`:V.location,n=L.map((e,t)=>({id:e.id,name:e.name,price:e.price,quantity:e.quantity,description:B[t]?.description||"",is_free:0===e.price}));await (0,f.eJ)(t,{title:V.title,description:V.description,category:V.category,image_url:e,date:a.toISOString(),location:i,ticket_types:n})},onSuccess:()=>{q.Am.success("Event updated successfully!"),e.push("/dashboard/creator")},onError:e=>{q.Am.error(e?.message||"Failed to update event"),Z(!1)}}),X=async()=>{if(1===D){if(!await A.trigger()){let e=Object.keys(A.formState.errors)[0];e&&document.querySelector(`[name="${e}"]`)?.scrollIntoView({behavior:"smooth",block:"center"});return}F(e=>Math.min(e+1,4));return}if(2===D){if(!await M.trigger()){let e=M.formState.errors.ticket_types;if(e){let t=Object.keys(e)[0];document.querySelector(`[name="ticket_types.${t}"]`)?.scrollIntoView({behavior:"smooth",block:"center"})}return}let e=M.getValues("ticket_types");G.reset({ticket_types:e.map(e=>({description:B.find((t,r)=>r===L.indexOf(e))?.description||""}))}),F(e=>Math.min(e+1,4));return}if(3===D){F(e=>Math.min(e+1,4));return}},J=async()=>{let e=await A.trigger(),t=await M.trigger();if(!e||!t){q.Am.error("Please fix all errors before updating the event.");return}await W.mutateAsync()};return l&&r&&"creator"===r.role?$?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(j.Z,{className:"w-8 h-8 animate-spin"})}):U?(0,s.jsxs)("div",{className:"min-h-screen bg-background",children:[s.jsx("div",{className:"border-b border-border bg-card sticky top-0 z-10",children:(0,s.jsxs)("div",{className:"container mx-auto px-4 py-4",children:[s.jsx("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[s.jsx(N.default,{href:"/dashboard/creator",children:s.jsx(m.z,{variant:"ghost",size:"icon",children:s.jsx(b.Z,{className:"w-5 h-5"})})}),(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Edit Event"}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Step ",D," of 4"]})]})]})}),s.jsx("div",{className:"mt-4 flex gap-2",children:[1,2,3,4].map(e=>s.jsx("div",{className:`flex-1 h-2 rounded-full transition-colors ${e<=D?"bg-primary":"bg-muted"}`},e))})]})}),(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[1===D&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Event Details"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Update your event information."})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[s.jsx(p._,{children:"Event Image"}),s.jsx("div",{className:"mt-2",children:I?(0,s.jsxs)("div",{className:"relative w-full h-64 rounded-lg overflow-hidden border border-border",children:[s.jsx("img",{src:I,alt:"Event preview",className:"w-full h-full object-cover"}),s.jsx("button",{type:"button",onClick:()=>{T(null),A.setValue("image",void 0)},className:"absolute top-2 right-2 p-2 bg-background/80 rounded-full hover:bg-background",disabled:C,children:s.jsx(_.Z,{className:"w-4 h-4"})})]}):(0,s.jsxs)("label",{className:"flex flex-col items-center justify-center w-full h-64 border-2 border-dashed border-border rounded-lg cursor-pointer hover:border-primary transition-colors",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[s.jsx(v.Z,{className:"w-12 h-12 text-muted-foreground mb-4"}),(0,s.jsxs)("p",{className:"mb-2 text-sm text-muted-foreground",children:[s.jsx("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"PNG, JPG, GIF up to 5MB"})]}),s.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:e=>{let t=e.target.files?.[0];if(t){if(!t.type.startsWith("image/")){A.setError("image",{message:"Please upload an image file"});return}if(t.size>5242880){A.setError("image",{message:"Image must be less than 5MB"});return}A.setValue("image",t),A.clearErrors("image");let e=new FileReader;e.onloadend=()=>{T(e.result)},e.readAsDataURL(t)}}})]})})]}),(0,s.jsxs)("div",{children:[s.jsx(p._,{htmlFor:"title",children:"Event Title *"}),s.jsx(u.I,{id:"title",...A.register("title"),placeholder:"e.g., Spring Fest 2026",className:"mt-2"}),A.formState.errors.title&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:String(A.formState.errors.title.message)})]}),(0,s.jsxs)("div",{children:[s.jsx(p._,{htmlFor:"description",children:"Description *"}),s.jsx(h.g,{id:"description",...A.register("description"),placeholder:"Describe your event in detail...",rows:6,className:"mt-2"}),A.formState.errors.description&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:String(A.formState.errors.description.message)})]}),(0,s.jsxs)("div",{children:[s.jsx(p._,{htmlFor:"category",children:"Category *"}),(0,s.jsxs)("select",{id:"category",...A.register("category"),className:"mt-2 w-full px-3 py-2 rounded-lg border border-border bg-background",children:[s.jsx("option",{value:"",children:"Select a category"}),P.map(e=>s.jsx("option",{value:e,children:e},e))]}),A.formState.errors.category&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:String(A.formState.errors.category.message)})]}),s.jsx("div",{className:"flex items-center gap-4",children:(0,s.jsxs)(p._,{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",...A.register("is_online"),className:"w-4 h-4"}),s.jsx("span",{children:"This is an online event"})]})}),(0,s.jsxs)("div",{children:[s.jsx(p._,{htmlFor:"location",children:V.is_online?"Online Event Link/Platform *":"Location *"}),s.jsx(u.I,{id:"location",...A.register("location"),placeholder:V.is_online?"e.g., Zoom, Google Meet, or event link":"e.g., Main Campus Amphitheater",className:"mt-2"}),A.formState.errors.location&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:String(A.formState.errors.location.message)})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx(p._,{htmlFor:"start_date",children:"Start Date *"}),s.jsx(u.I,{id:"start_date",type:"date",...A.register("start_date"),className:"mt-2"}),A.formState.errors.start_date&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:String(A.formState.errors.start_date.message)})]}),(0,s.jsxs)("div",{children:[s.jsx(p._,{htmlFor:"start_time",children:"Start Time *"}),s.jsx(u.I,{id:"start_time",type:"time",...A.register("start_time"),className:"mt-2"}),A.formState.errors.start_time&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:String(A.formState.errors.start_time.message)})]})]})]})]}),2===D&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Ticket Types"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Update your ticket types and pricing."})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[O.map((e,t)=>(0,s.jsxs)("div",{className:"p-6 border border-border rounded-lg space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("h3",{className:"font-semibold",children:["Ticket Type ",t+1]}),O.length>1&&s.jsx(m.z,{type:"button",variant:"ghost",size:"sm",onClick:()=>z(t),children:s.jsx(_.Z,{className:"w-4 h-4"})})]}),(0,s.jsxs)("div",{children:[s.jsx(p._,{children:"Ticket Name *"}),s.jsx(u.I,{...M.register(`ticket_types.${t}.name`),placeholder:"e.g., General Admission, VIP, Early Bird",className:"mt-2"}),M.formState.errors.ticket_types?.[t]?.name&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:String(M.formState.errors.ticket_types[t]?.name?.message)})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx(p._,{children:"Price (₦) *"}),s.jsx(u.I,{type:"number",step:"0.01",min:"0",...M.register(`ticket_types.${t}.price`,{valueAsNumber:!0}),placeholder:"0.00",className:"mt-2"}),M.formState.errors.ticket_types?.[t]?.price&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:String(M.formState.errors.ticket_types[t]?.price?.message)})]}),(0,s.jsxs)("div",{children:[s.jsx(p._,{children:"Quantity *"}),s.jsx(u.I,{type:"number",min:"1",...M.register(`ticket_types.${t}.quantity`,{valueAsNumber:!0}),placeholder:"100",className:"mt-2"}),M.formState.errors.ticket_types?.[t]?.quantity&&s.jsx("p",{className:"text-sm text-destructive mt-1",children:String(M.formState.errors.ticket_types[t]?.quantity?.message)})]})]})]},e.id)),s.jsx(m.z,{type:"button",variant:"outline",onClick:()=>R({name:"",price:0,quantity:100}),className:"w-full",children:"+ Add Another Ticket Type"})]})]}),3===D&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Ticket Benefits (Optional)"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Update benefits or details for each ticket type."})]}),s.jsx("div",{className:"space-y-6",children:G.watch("ticket_types").length>0?G.watch("ticket_types").map((e,t)=>(0,s.jsxs)("div",{className:"p-6 border border-border rounded-lg",children:[s.jsx("h3",{className:"font-semibold mb-4",children:L[t]?.name||`Ticket Type ${t+1}`}),(0,s.jsxs)("div",{children:[s.jsx(p._,{children:"Benefits/Description (Optional)"}),s.jsx(h.g,{...G.register(`ticket_types.${t}.description`),placeholder:"e.g., Access to VIP area, Free drinks, Early entry...",rows:4,className:"mt-2"})]})]},t)):s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No ticket types found. Please go back to Step 2 and add ticket types."})})]}),4===D&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Preview Event"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Review your event details before updating."})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[I&&s.jsx("div",{className:"w-full h-64 rounded-lg overflow-hidden border border-border",children:s.jsx("img",{src:I,alt:V.title,className:"w-full h-full object-cover"})}),(0,s.jsxs)("div",{className:"p-6 border border-border rounded-lg space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-2xl font-bold",children:V.title}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:V.category})]}),s.jsx("div",{children:s.jsx("p",{className:"text-muted-foreground whitespace-pre-wrap",children:V.description})}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-border",children:[(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Location"}),s.jsx("p",{className:"font-medium",children:V.location})]}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Start Date & Time"}),s.jsx("p",{className:"font-medium",children:V.start_date&&V.start_time?(0,S.WU)(new Date(`${V.start_date}T${V.start_time}`),"MMM d, yyyy • h:mm a"):"Not set"})]})]})]}),(0,s.jsxs)("div",{className:"p-6 border border-border rounded-lg space-y-4",children:[s.jsx("h3",{className:"font-semibold",children:"Ticket Types"}),L.map((e,t)=>s.jsx("div",{className:"p-4 bg-muted rounded-lg",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium",children:e.name}),B[t]?.description&&s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:B[t].description})]}),(0,s.jsxs)("div",{className:"text-right",children:[s.jsx("p",{className:"font-bold",children:0===e.price?"Free":`₦${e.price.toLocaleString()}`}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.quantity," tickets"]})]})]})},t))]})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between mt-8 pt-6 border-t border-border",children:[(0,s.jsxs)(m.z,{type:"button",variant:"outline",onClick:()=>{F(e=>Math.max(e-1,1))},disabled:1===D,children:[s.jsx(b.Z,{className:"w-4 h-4 mr-2"}),"Previous"]}),D<4?(0,s.jsxs)(m.z,{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),X()},variant:"hero",children:["Next",s.jsx(w.Z,{className:"w-4 h-4 ml-2"})]}):s.jsx(m.z,{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),J()},variant:"hero",disabled:W.isPending||C,children:W.isPending||C?(0,s.jsxs)(s.Fragment,{children:[s.jsx(j.Z,{className:"w-4 h-4 mr-2 animate-spin"}),C?"Uploading image...":"Updating event..."]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx(k.Z,{className:"w-4 h-4 mr-2"}),"Update Event"]})})]})]})]}):s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("p",{className:"mb-2",children:"Event not found"}),s.jsx(N.default,{href:"/dashboard/creator",children:s.jsx(m.z,{variant:"outline",children:"Back to Dashboard"})})]})}):s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("p",{className:"mb-2",children:"Access Denied"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Only creators can edit events."})]})})}l.Ry({id:l.Z_().optional(),name:l.Z_().min(1,"Ticket name is required"),price:l.Rx().min(0,"Price must be 0 or greater"),quantity:l.Rx().min(1,"Quantity must be at least 1")})},32933:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(62881).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},90434:(e,t,r)=>{"use strict";r.d(t,{default:()=>a.a});var s=r(79404),a=r.n(s)},35047:(e,t,r)=>{"use strict";var s=r(77389);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},76253:(e,t,r)=>{"use strict";r.d(t,{AW:()=>j,DK:()=>m,HG:()=>o,IP:()=>y,Q6:()=>p,Qn:()=>l,TX:()=>d,T_:()=>f,Y:()=>n,Y9:()=>w,ZD:()=>c,fX:()=>_,ks:()=>u,nk:()=>i,pj:()=>g,sN:()=>v,vw:()=>a,wY:()=>h,z8:()=>x,zk:()=>b});var s=r(2777);let a=async()=>{let e=new Date().toISOString(),{data:t,error:r}=await s.supabase.from("events").select("*, ticket_types(*)").eq("status","active").gte("date",e).order("created_at",{ascending:!1});if(r)throw r;return t},i=async e=>{let t=new Date().toISOString(),r=s.supabase.from("events").select("*, ticket_types(*), creator:users!events_creator_id_fkey(school)").eq("status","active").gte("date",t);if(e.search&&e.search.trim()){let t=e.search.trim().replace(/%/g,"\\%").replace(/_/g,"\\_");r=r.or(`title.ilike.%${t}%,description.ilike.%${t}%`)}e.category&&"all"!==e.category&&(r=r.eq("category",e.category)),e.location&&e.location.trim()&&(r=r.ilike("location",`%${e.location}%`)),e.dateFrom&&(r=r.gte("date",e.dateFrom)),e.dateTo&&(r=r.lte("date",e.dateTo)),r=r.order("date",{ascending:!0});let{data:a,error:i}=await r;if(i)throw i;let n=a||[];return e.school&&"all"!==e.school&&(n=n.filter(t=>{let r=t.creator;return r?.school===e.school})),n},n=async e=>{let{data:t,error:r}=await s.supabase.from("events").select("*, ticket_types(*)").eq("id",e).single();if(r)throw r;return t},o=async e=>{let{data:t,error:r}=await s.supabase.from("orders").select("*, event:events(*), tickets(*, ticket_type:ticket_types(*))").eq("id",e).single();if(r)throw r;return t},l=async e=>{let{data:t,error:r}=await s.supabase.from("tickets").select("*, event:events(*), ticket_type:ticket_types(*)").eq("id",e).single();if(r)throw r;return t},c=async e=>{let{data:t,error:r}=await s.supabase.from("orders").select("id").eq("user_id",e).eq("payment_status","paid");if(r)throw r;if(!t||0===t.length)return[];let a=t.map(e=>e.id),{data:i,error:n}=await s.supabase.from("tickets").select("*, event:events(*), ticket_type:ticket_types(*), order:orders(*)").eq("user_id",e).in("order_id",a).order("created_at",{ascending:!1});if(n)throw n;return i||[]},d=async e=>{let t=new Date().toISOString(),{data:r,error:a}=await s.supabase.from("events").select("*, ticket_types(*)").eq("creator_id",e).gte("date",t).order("date",{ascending:!0});if(a)throw a;return r},m=async e=>{let t=new Date().toISOString(),{data:r,error:a}=await s.supabase.from("events").select("*, ticket_types(*)").eq("creator_id",e).lt("date",t).order("date",{ascending:!1});if(a)throw a;return r},u=async e=>{let{data:t,error:r}=await s.supabase.from("creator_profiles").select("*").eq("user_id",e).maybeSingle();if(r)throw r;return t||null},p=async e=>{let{data:t,error:r}=await s.supabase.from("orders").select("*, tickets(*)").eq("event_id",e).eq("payment_status","paid");if(r)throw r;let{data:a,error:i}=await s.supabase.from("tickets").select("*, ticket_type:ticket_types(*)").eq("event_id",e);if(i)throw i;return{orders:t||[],tickets:a||[]}},h=async e=>{let{data:t,error:r}=await s.supabase.from("wallet_transactions").select("*").eq("creator_id",e).order("created_at",{ascending:!1});if(r)throw r;return t},x=async e=>{let{data:t,error:r}=await s.supabase.from("withdrawals").select("*").eq("creator_id",e).order("created_at",{ascending:!1});if(r)throw r;return t||[]},f=async()=>{let{data:e,error:t}=await s.supabase.from("withdrawals").select("*, creator:users!withdrawals_creator_id_fkey(id, email, full_name, school)").order("created_at",{ascending:!1});if(t)throw t;return e||[]},g=async e=>{let{data:t,error:r}=await s.supabase.from("creator_profiles").select("account_balance, bank_account_name, bank_account_number, bank_name, bank_code, is_bank_verified").eq("user_id",e).single();if(r)throw r;return t},y=async()=>{let{data:e,error:t}=await s.supabase.from("events").select("*, ticket_types(*), creator:users!events_creator_id_fkey(id, email, full_name, school)").order("created_at",{ascending:!1});if(t)throw t;return e||[]},j=async()=>{let{data:e,error:t}=await s.supabase.from("users").select("*").order("created_at",{ascending:!1});if(t)throw t;return e||[]},b=async()=>{let{data:e,error:t}=await s.supabase.from("orders").select("*, event:events(id, title, creator:users!events_creator_id_fkey(id, email, full_name)), user:users(id, email, full_name)").order("created_at",{ascending:!1});if(t)throw t;return e||[]},_=async()=>{let{data:e,error:t}=await s.supabase.from("tickets").select("*, event:events(id, title), ticket_type:ticket_types(id, name, price, is_free), user:users(id, email, full_name), order:orders(id, payment_status)").order("created_at",{ascending:!1});if(t)throw console.error("Error fetching all tickets:",t),t;return e||[]},v=async()=>{let{data:e,error:t}=await s.supabase.from("users").select("*, creator_profile:creator_profiles(*)").eq("role","creator").order("created_at",{ascending:!1});if(t)throw t;return e||[]},w=async()=>{let{data:e,error:t}=await s.supabase.from("events").select("status");if(t)throw t;let r={active:0,draft:0,completed:0,cancelled:0};e?.forEach(e=>{e.status in r&&r[e.status]++});let{data:a,error:i}=await s.supabase.from("users").select("role, banned");if(i)throw i;let n={user:0,creator:0,admin:0},o=0;a?.forEach(e=>{e.role in n&&n[e.role]++,e.banned&&o++});let{data:l,error:c}=await s.supabase.from("orders").select("total_amount, created_at").eq("payment_status","paid");if(c)throw c;let d=l?.reduce((e,t)=>e+parseFloat(t.total_amount||0),0)||0,m=new Date,u=new Date(m.getFullYear(),m.getMonth(),1).toISOString(),p=l?.filter(e=>e.created_at>=u).reduce((e,t)=>e+parseFloat(t.total_amount||0),0)||0,{data:h,error:x}=await s.supabase.from("tickets").select("id");if(x)throw x;let f=h?.length||0,{data:g,error:y}=await s.supabase.from("users").select("id").eq("role","creator");if(y)throw y;let j=g?.length||0;return{events:{total:e?.length||0,byStatus:r},users:{total:a?.length||0,byRole:n,banned:o},revenue:{total:d,thisMonth:p},tickets:{totalSold:f},organizers:{active:j}}}},84479:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`/Users/mac/Desktop/Client projects/frecks-new/app/dashboard/creator/edit/[id]/page.tsx#default`)}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,759,453,108,145,236,681],()=>r(56436));module.exports=s})();