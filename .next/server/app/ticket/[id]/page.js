(()=>{var e={};e.id=295,e.ids=[295],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},39346:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>l,routeModule:()=>p,tree:()=>d}),r(67714),r(84752),r(96560);var s=r(23191),a=r(88716),i=r(37922),n=r.n(i),o=r(95231),c={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>o[e]);r.d(t,c);let d=["",{children:["ticket",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,67714)),"/Users/mac/Desktop/Client projects/frecks-new/app/ticket/[id]/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,24697))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,84752)),"/Users/mac/Desktop/Client projects/frecks-new/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,96560)),"/Users/mac/Desktop/Client projects/frecks-new/app/not-found.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,24697))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],l=["/Users/mac/Desktop/Client projects/frecks-new/app/ticket/[id]/page.tsx"],u="/ticket/[id]/page",m={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/ticket/[id]/page",pathname:"/ticket/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},59420:(e,t,r)=>{Promise.resolve().then(r.bind(r,85090))},85090:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>w});var s=r(10326),a=r(35047),i=r(44976),n=r(20108),o=r(10119),c=r(91664),d=r(38443),l=r(76253),u=r(47272),m=r(77506);let p=(0,r(62881).Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var h=r(66307),x=r(21985),f=r(37358),y=r(77636),g=r(79635),b=r(2453),v=r(57911),_=r(24567),j=r(85999),k=r(94001);function w(){let e=(0,a.useParams)(),t=(0,a.useRouter)(),{user:r}=(0,k.a)(),w=(0,i.NL)(),N=e.id,{data:q,isLoading:M,error:C}=(0,n.a)({queryKey:["ticket",N],queryFn:()=>(0,l.Qn)(N),enabled:!!N}),E=(0,o.D)({mutationFn:async()=>{if(!r)throw Error("You must be logged in to validate tickets");if(!q)throw Error("Ticket not found");return await (0,u.li)(q.id,r.id)},onSuccess:()=>{j.Am.success("Ticket validated successfully!"),w.invalidateQueries({queryKey:["ticket",N]})},onError:e=>{j.Am.error(e.message||"Failed to validate ticket")}});if(M)return(0,s.jsxs)("div",{className:"min-h-screen bg-background",children:[s.jsx(v.default,{}),s.jsx("div",{className:"pt-20 min-h-screen flex items-center justify-center",children:s.jsx(m.Z,{className:"w-8 h-8 animate-spin"})}),s.jsx(_.Z,{})]});if(C||!q)return(0,s.jsxs)("div",{className:"min-h-screen bg-background",children:[s.jsx(v.default,{}),s.jsx("main",{className:"pt-20",children:s.jsx("div",{className:"container mx-auto px-4 py-8",children:(0,s.jsxs)("div",{className:"max-w-2xl mx-auto bg-card rounded-2xl border border-border p-8 text-center",children:[s.jsx(p,{className:"w-16 h-16 text-destructive mx-auto mb-4"}),s.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Ticket Not Found"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"The ticket you're looking for doesn't exist or has been removed."}),s.jsx(c.z,{onClick:()=>t.push("/"),children:"Go to Home"})]})})}),s.jsx(_.Z,{})]});let S=q.event,Z=q.ticket_type,D="used"===q.status,O="cancelled"===q.status,P="valid"===q.status,T=P&&r&&S?.creator_id===r.id;return(0,s.jsxs)("div",{className:"min-h-screen bg-background",children:[s.jsx(v.default,{}),s.jsx("main",{className:"pt-20",children:s.jsx("div",{className:"container mx-auto px-4 py-8",children:(0,s.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,s.jsxs)("div",{className:"mb-6",children:[P&&(0,s.jsxs)(d.C,{className:"bg-green-500 text-white text-lg px-4 py-2",children:[s.jsx(h.Z,{className:"w-4 h-4 mr-2"}),"Valid"]}),D&&(0,s.jsxs)(d.C,{className:"bg-blue-500 text-white text-lg px-4 py-2",children:[s.jsx(h.Z,{className:"w-4 h-4 mr-2"}),"Validated"]}),O&&(0,s.jsxs)(d.C,{className:"bg-red-500 text-white text-lg px-4 py-2",children:[s.jsx(p,{className:"w-4 h-4 mr-2"}),"Cancelled"]})]}),(0,s.jsxs)("div",{className:"bg-card rounded-2xl border border-border p-8 mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx(x.Z,{className:"w-6 h-6 text-primary"})}),(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Ticket Details"}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground font-mono",children:["ID: ",q.id.slice(0,8),"..."]})]})]}),(0,s.jsxs)("div",{className:"mb-6 pb-6 border-b border-border",children:[s.jsx("h2",{className:"text-xl font-semibold mb-2",children:Z?.name||"General Admission"}),Z?.description&&s.jsx("p",{className:"text-muted-foreground",children:Z.description}),s.jsx("div",{className:"mt-3",children:s.jsx(d.C,{variant:"outline",className:"text-lg",children:Z?.is_free?"Free":`₦${Number(Z?.price||0).toLocaleString()}`})})]}),S&&(0,s.jsxs)("div",{className:"mb-6 pb-6 border-b border-border",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Event Information"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"font-bold text-xl mb-2",children:S.title}),s.jsx(d.C,{className:"mb-3",children:S.category})]}),S.description&&s.jsx("p",{className:"text-muted-foreground",children:S.description}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[s.jsx(f.Z,{className:"w-5 h-5 text-primary mt-0.5 shrink-0"}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Date & Time"}),s.jsx("p",{className:"font-semibold",children:(0,b.WU)(new Date(S.date),"MMM d, yyyy • h:mm a")})]})]}),(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[s.jsx(y.Z,{className:"w-5 h-5 text-primary mt-0.5 shrink-0"}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Location"}),s.jsx("p",{className:"font-semibold",children:S.location})]})]})]})]})]}),(0,s.jsxs)("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Ticket Holder"}),(0,s.jsxs)("div",{className:"space-y-3",children:[q.order_id&&(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[s.jsx(g.Z,{className:"w-5 h-5 text-muted-foreground"}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Order ID"}),s.jsx("p",{className:"font-semibold font-mono text-sm",children:q.order_id})]})]}),q.checked_in_at&&(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[s.jsx(h.Z,{className:"w-5 h-5 text-green-500"}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Validated At"}),s.jsx("p",{className:"font-semibold",children:(0,b.WU)(new Date(q.checked_in_at),"MMM d, yyyy • h:mm a")})]})]})]})]}),T&&s.jsx("div",{className:"pt-6 border-t border-border",children:s.jsx(c.z,{onClick:()=>E.mutate(),disabled:E.isPending||D,className:"w-full",size:"lg",variant:"hero",children:E.isPending?(0,s.jsxs)(s.Fragment,{children:[s.jsx(m.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Validating..."]}):D?(0,s.jsxs)(s.Fragment,{children:[s.jsx(h.Z,{className:"w-4 h-4 mr-2"}),"Already Validated"]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx(h.Z,{className:"w-4 h-4 mr-2"}),"Validate Ticket"]})})}),!T&&P&&r&&S?.creator_id!==r.id&&s.jsx("div",{className:"pt-6 border-t border-border",children:s.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Only the event creator can validate tickets."})}),!r&&(0,s.jsxs)("div",{className:"pt-6 border-t border-border",children:[s.jsx("p",{className:"text-sm text-muted-foreground text-center mb-4",children:"Please log in as the event creator to validate this ticket."}),s.jsx(c.z,{onClick:()=>t.push("/auth/signin"),variant:"outline",className:"w-full",children:"Sign In"})]})]}),s.jsx("div",{className:"text-center",children:s.jsx(c.z,{variant:"outline",onClick:()=>t.back(),children:"Go Back"})})]})})}),s.jsx(_.Z,{})]})}},37358:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(62881).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},66307:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(62881).Z)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},77506:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(62881).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},77636:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(62881).Z)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},24567:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var s=r(10326),a=r(21985),i=r(62881);let n=(0,i.Z)("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]),o=(0,i.Z)("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]),c=(0,i.Z)("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),d=(0,i.Z)("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]);var l=r(91664);let u=({showNewsletter:e=!1})=>{let t={company:["About Us","Careers","Blog","Press"],support:["Help Center","Safety","Terms","Privacy"],venues:["Partner With Us","List Your Event","Pricing","Resources"]};return(0,s.jsxs)("footer",{id:"about",className:"bg-card border-t border-border",children:[e&&s.jsx("div",{className:"container mx-auto px-4 py-12",children:(0,s.jsxs)("div",{className:"bg-primary rounded-3xl p-8 md:p-12 text-center",children:[s.jsx("h3",{className:"text-2xl md:text-3xl font-bold text-primary-foreground mb-4",children:"Never Miss an Event! \uD83C\uDFAB"}),s.jsx("p",{className:"text-primary-foreground/80 mb-6 max-w-md mx-auto",children:"Subscribe to get notified about new events, exclusive deals, and early bird tickets."}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 max-w-md mx-auto",children:[s.jsx("input",{type:"email",placeholder:"Enter your email",className:"flex-1 px-5 py-3 rounded-full bg-primary-foreground/20 border border-primary-foreground/30 text-primary-foreground placeholder:text-primary-foreground/60 outline-none focus:ring-2 focus:ring-primary-foreground/50"}),s.jsx(l.z,{variant:"secondary",size:"lg",children:"Subscribe"})]})]})}),s.jsx("div",{className:"container mx-auto px-4 py-12",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-8",children:[(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsxs)("a",{href:"/",className:"flex items-center gap-2 mb-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-primary flex items-center justify-center",children:s.jsx(a.Z,{className:"w-5 h-5 text-primary-foreground"})}),s.jsx("span",{className:"text-xl font-bold text-primary",children:"Frecks"})]}),s.jsx("p",{className:"text-muted-foreground mb-6 max-w-xs",children:"Your go-to platform for discovering and booking campus events. Made by students, for students."}),s.jsx("div",{className:"flex gap-3",children:[n,o,c,d].map((e,t)=>s.jsx("a",{href:"#",className:"w-10 h-10 rounded-full bg-muted flex items-center justify-center hover:bg-primary hover:text-primary-foreground transition-colors",children:s.jsx(e,{className:"w-5 h-5"})},t))})]}),(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"font-semibold mb-4",children:"Company"}),s.jsx("ul",{className:"space-y-2",children:t.company.map(e=>s.jsx("li",{children:s.jsx("a",{href:"#",className:"text-muted-foreground hover:text-primary transition-colors",children:e})},e))})]}),(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"font-semibold mb-4",children:"Support"}),s.jsx("ul",{className:"space-y-2",children:t.support.map(e=>s.jsx("li",{children:s.jsx("a",{href:"#",className:"text-muted-foreground hover:text-primary transition-colors",children:e})},e))})]}),(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"font-semibold mb-4",children:"For Venues"}),s.jsx("ul",{className:"space-y-2",children:t.venues.map(e=>s.jsx("li",{children:s.jsx("a",{href:"#",className:"text-muted-foreground hover:text-primary transition-colors",children:e})},e))})]})]})}),s.jsx("div",{className:"border-t border-border",children:s.jsx("div",{className:"container mx-auto px-4 py-6",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 text-sm text-muted-foreground",children:[s.jsx("p",{children:"\xa9 2026 Frecks. All rights reserved."}),s.jsx("p",{children:"Made with \uD83E\uDDE1 for students everywhere"})]})})})]})}},38443:(e,t,r)=>{"use strict";r.d(t,{C:()=>o});var s=r(10326);r(17577);var a=r(79360),i=r(51223);let n=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o({className:e,variant:t,...r}){return s.jsx("div",{className:(0,i.cn)(n({variant:t}),e),...r})}},47272:(e,t,r)=>{"use strict";r.d(t,{Bt:()=>n,D0:()=>c,LV:()=>o,Lj:()=>l,eJ:()=>i,li:()=>d,yM:()=>a});var s=r(2777);let a=async e=>{console.log("Creating event in database...",{creator_id:e.creator_id,title:e.title,category:e.category});let{data:t,error:r}=await s.supabase.from("events").insert({creator_id:e.creator_id,title:e.title,description:e.description,category:e.category,image_url:e.image_url,date:e.date,location:e.location,is_featured:e.is_featured||!1,status:"active"}).select().single();if(r)throw console.error("Event creation error:",r),Error(`Failed to create event: ${r.message} (${r.code||"unknown"})`);if(!t)throw Error("Event creation returned no data");console.log("Event created, ID:",t.id),console.log("Creating ticket types...",e.ticket_types.length);let a=e.ticket_types.map(e=>({event_id:t.id,name:e.name,description:e.description,price:e.price,quantity:e.quantity,is_free:e.is_free||!1})),{error:i}=await s.supabase.from("ticket_types").insert(a);if(i)throw console.error("Ticket types creation error:",i),Error(`Failed to create ticket types: ${i.message} (${i.code||"unknown"})`);return console.log("Ticket types created successfully"),t},i=async(e,t)=>{let{data:r,error:a}=await s.supabase.from("events").update({title:t.title,description:t.description,category:t.category,image_url:t.image_url,date:t.date,location:t.location,is_featured:t.is_featured||!1,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(a)throw Error(`Failed to update event: ${a.message}`);if(!r)throw Error("Event update returned no data");let{data:i}=await s.supabase.from("ticket_types").select("id").eq("event_id",e),n=new Set(i?.map(e=>e.id)||[]),o=new Set(t.ticket_types.filter(e=>e.id).map(e=>e.id)),c=Array.from(n).filter(e=>!o.has(e));for(let r of(c.length>0&&await s.supabase.from("ticket_types").delete().in("id",c),t.ticket_types))r.id&&n.has(r.id)?await s.supabase.from("ticket_types").update({name:r.name,description:r.description,price:r.price,quantity:r.quantity,is_free:r.is_free||!1}).eq("id",r.id):await s.supabase.from("ticket_types").insert({event_id:e,name:r.name,description:r.description,price:r.price,quantity:r.quantity,is_free:r.is_free||!1});return r},n=async(e,t)=>{let{data:r,error:a}=await s.supabase.from("events").select("*").eq("id",e).eq("creator_id",t).single();if(a)throw a;if(!r)throw Error("Event not found or access denied");let{error:i}=await s.supabase.from("deleted_events").insert({original_event_id:r.id,creator_id:r.creator_id,title:r.title,description:r.description,category:r.category,image_url:r.image_url,date:r.date,location:r.location,is_featured:r.is_featured,status:"cancelled",deleted_by:t,created_at:r.created_at,updated_at:r.updated_at});if(i)throw i;let{error:n}=await s.supabase.from("events").delete().eq("id",e).eq("creator_id",t);if(n)throw n;return{success:!0}},o=async e=>{let{data:t,error:r}=await s.supabase.from("orders").insert({user_id:e.user_id,event_id:e.event_id,email:e.email,full_name:e.full_name,total_amount:e.total_amount,paystack_reference:e.paystack_reference,payment_status:e.payment_status||"pending"}).select().single();if(r)throw r;let a=e.tickets.map(r=>({ticket_type_id:r.ticket_type_id,event_id:e.event_id,user_id:e.user_id,order_id:t.id,qr_code:r.qr_code,qr_code_data:r.qr_code_data,status:(e.payment_status,"valid")})),{error:i}=await s.supabase.from("tickets").insert(a);if(i)throw i;if("paid"===e.payment_status){let t=new Map;for(let r of e.tickets){let e=t.get(r.ticket_type_id)||0;t.set(r.ticket_type_id,e+1)}for(let[e,r]of t){let{data:t}=await s.supabase.from("ticket_types").select("sold_count").eq("id",e).single();t&&await s.supabase.from("ticket_types").update({sold_count:t.sold_count+r}).eq("id",e)}}return t},c=async(e,t)=>{let{data:r,error:a}=await s.supabase.from("creator_profiles").upsert({user_id:e,...t}).select().single();if(a)throw a;return r},d=async(e,t)=>{let{data:r,error:a}=await s.supabase.from("tickets").select("*, event:events!inner(creator_id, id)").eq("id",e).single();if(a||!r)throw Error("Ticket not found");if(r.event?.creator_id!==t)throw Error("Only the event creator can validate tickets");if("used"===r.status)throw Error("Ticket has already been validated");if("cancelled"===r.status)throw Error("Ticket has been cancelled");let{error:i}=await s.supabase.from("tickets").update({status:"used",checked_in_at:new Date().toISOString(),checked_in_by:t}).eq("id",e);if(i)throw Error(`Failed to validate ticket: ${i.message}`);return await s.supabase.from("qr_scans").insert({ticket_id:e,scanned_by:t,scan_result:"valid"}),{success:!0,ticketId:e}},l=async(e,t)=>{let{data:r,error:a}=await s.supabase.from("users").update({full_name:t.full_name,gender:t.gender,school:t.school,avatar_name:t.avatar_name,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(a)throw a;return r}},76253:(e,t,r)=>{"use strict";r.d(t,{DK:()=>u,HG:()=>o,Q6:()=>p,Qn:()=>c,TX:()=>l,Y:()=>n,ZD:()=>d,ks:()=>m,nk:()=>i,vw:()=>a});var s=r(2777);let a=async()=>{let e=new Date().toISOString(),{data:t,error:r}=await s.supabase.from("events").select("*, ticket_types(*)").eq("status","active").gte("date",e).order("created_at",{ascending:!1});if(r)throw r;return t},i=async e=>{let t=new Date().toISOString(),r=s.supabase.from("events").select("*, ticket_types(*)").eq("status","active").gte("date",t);if(e.search&&e.search.trim()){let t=e.search.trim().replace(/%/g,"\\%").replace(/_/g,"\\_");r=r.or(`title.ilike.%${t}%,description.ilike.%${t}%`)}e.category&&"all"!==e.category&&(r=r.eq("category",e.category)),e.location&&e.location.trim()&&(r=r.ilike("location",`%${e.location}%`)),e.dateFrom&&(r=r.gte("date",e.dateFrom)),e.dateTo&&(r=r.lte("date",e.dateTo)),r=r.order("date",{ascending:!0});let{data:a,error:i}=await r;if(i)throw i;return a},n=async e=>{let{data:t,error:r}=await s.supabase.from("events").select("*, ticket_types(*)").eq("id",e).single();if(r)throw r;return t},o=async e=>{let{data:t,error:r}=await s.supabase.from("orders").select("*, event:events(*), tickets(*, ticket_type:ticket_types(*))").eq("id",e).single();if(r)throw r;return t},c=async e=>{let{data:t,error:r}=await s.supabase.from("tickets").select("*, event:events(*), ticket_type:ticket_types(*)").eq("id",e).single();if(r)throw r;return t},d=async e=>{let{data:t,error:r}=await s.supabase.from("orders").select("id").eq("user_id",e).eq("payment_status","paid");if(r)throw r;if(!t||0===t.length)return[];let a=t.map(e=>e.id),{data:i,error:n}=await s.supabase.from("tickets").select("*, event:events(*), ticket_type:ticket_types(*), order:orders(*)").eq("user_id",e).in("order_id",a).order("created_at",{ascending:!1});if(n)throw n;return i||[]},l=async e=>{let t=new Date().toISOString(),{data:r,error:a}=await s.supabase.from("events").select("*, ticket_types(*)").eq("creator_id",e).gte("date",t).order("date",{ascending:!0});if(a)throw a;return r},u=async e=>{let t=new Date().toISOString(),{data:r,error:a}=await s.supabase.from("events").select("*, ticket_types(*)").eq("creator_id",e).lt("date",t).order("date",{ascending:!1});if(a)throw a;return r},m=async e=>{let{data:t,error:r}=await s.supabase.from("creator_profiles").select("*").eq("user_id",e).maybeSingle();if(r)throw r;return t||null},p=async e=>{let{data:t,error:r}=await s.supabase.from("orders").select("*, tickets(*)").eq("event_id",e).eq("payment_status","paid");if(r)throw r;let{data:a,error:i}=await s.supabase.from("tickets").select("*, ticket_type:ticket_types(*)").eq("event_id",e);if(i)throw i;return{orders:t||[],tickets:a||[]}}},67714:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`/Users/mac/Desktop/Client projects/frecks-new/app/ticket/[id]/page.tsx#default`)},10119:(e,t,r)=>{"use strict";r.d(t,{D:()=>l});var s=r(17577),a=r(71180),i=r(12113),n=r(64351),o=r(3341),c=class extends n.l{#e;#t=void 0;#r;#s;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#a()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,o.VS)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,o.Ym)(t.mutationKey)!==(0,o.Ym)(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(e){this.#a(),this.#i(e)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#a(),this.#i()}mutate(e,t){return this.#s=t,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(e)}#a(){let e=this.#r?.state??(0,a.R)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#i(e){i.Vr.batch(()=>{if(this.#s&&this.hasListeners()){let t=this.#t.variables,r=this.#t.context;e?.type==="success"?(this.#s.onSuccess?.(e.data,t,r),this.#s.onSettled?.(e.data,null,t,r)):e?.type==="error"&&(this.#s.onError?.(e.error,t,r),this.#s.onSettled?.(void 0,e.error,t,r))}this.listeners.forEach(e=>{e(this.#t)})})}},d=r(44976);function l(e,t){let r=(0,d.NL)(t),[a]=s.useState(()=>new c(r,e));s.useEffect(()=>{a.setOptions(e)},[a,e]);let n=s.useSyncExternalStore(s.useCallback(e=>a.subscribe(i.Vr.batchCalls(e)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),l=s.useCallback((e,t)=>{a.mutate(e,t).catch(o.ZT)},[a]);if(n.error&&(0,o.L3)(a.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:l,mutateAsync:n.mutate}}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,759,65,262,453,643,108,236,911],()=>r(39346));module.exports=s})();