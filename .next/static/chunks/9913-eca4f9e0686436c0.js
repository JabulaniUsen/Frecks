"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9913],{12381:function(e,t,r){r.d(t,{d:function(){return l},z:function(){return u}});var a=r(57437),n=r(2265),i=r(37053),s=r(90535),o=r(93448);let l=(0,s.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-full text-sm font-semibold transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-button hover:brightness-110 active:scale-95",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border-2 border-primary bg-transparent text-primary hover:bg-primary hover:text-primary-foreground",secondary:"bg-secondary text-secondary-foreground hover:brightness-110 active:scale-95",ghost:"hover:bg-muted hover:text-foreground",link:"text-primary underline-offset-4 hover:underline",hero:"bg-primary text-primary-foreground shadow-button hover:brightness-110 active:scale-95 font-bold",accent:"bg-accent text-accent-foreground border border-border hover:bg-muted active:scale-95"},size:{default:"h-11 px-6 py-2",sm:"h-9 px-4 text-xs",lg:"h-14 px-8 text-base",xl:"h-16 px-10 text-lg",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=n.forwardRef((e,t)=>{let{className:r,variant:n,size:s,asChild:u=!1,...c}=e,d=u?i.g7:"button";return(0,a.jsx)(d,{className:(0,o.cn)(l({variant:n,size:s,className:r})),ref:t,...c})});u.displayName="Button"},14362:function(e,t,r){r.d(t,{H:function(){return l},a:function(){return o}});var a=r(57437),n=r(2265),i=r(5526);let s=(0,n.createContext)(void 0),o=()=>{let e=(0,n.useContext)(s);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},l=e=>{let{children:t}=e,[r,o]=(0,n.useState)(null),[l,u]=(0,n.useState)(null),[c,d]=(0,n.useState)(null),[f,v]=(0,n.useState)(!0),_=(0,n.useRef)(null),h=async e=>{if(_.current!==e){_.current=e;try{let{data:t,error:r}=await i.supabase.from("users").select("id, email, full_name, role, gender, school, avatar_name, avatar_url").eq("id",e).single();if(r)throw r;t?u({id:t.id,email:t.email,full_name:t.full_name,role:t.role||"user",gender:t.gender||null,school:t.school||null,avatar_name:t.avatar_name||null,avatar_url:t.avatar_url||null}):u(null)}catch(e){console.error("Error fetching profile:",e),u(null)}finally{_.current=null}}},p=async()=>{r&&(_.current=null,await h(r.id))};(0,n.useEffect)(()=>{let e=!0,t=null;i.supabase.auth.getSession().then(r=>{var a,n,i;let{data:{session:s},error:l}=r;if(e){if(l){v(!1);return}d(s),o(null!==(n=null==s?void 0:s.user)&&void 0!==n?n:null),t=null!==(i=null==s?void 0:null===(a=s.user)||void 0===a?void 0:a.id)&&void 0!==i?i:null,(null==s?void 0:s.user)&&h(s.user.id),e&&v(!1)}});let{data:{subscription:r}}=i.supabase.auth.onAuthStateChange((r,a)=>{var n,i,s;if(!e)return;let l=null!==(i=null==a?void 0:null===(n=a.user)||void 0===n?void 0:n.id)&&void 0!==i?i:null;l!==t&&(d(a),o(null!==(s=null==a?void 0:a.user)&&void 0!==s?s:null),t=l,(null==a?void 0:a.user)?h(a.user.id):u(null))});return()=>{e=!1,r.unsubscribe()}},[]);let m=async()=>{await i.supabase.auth.signOut(),o(null),u(null),d(null),_.current=null};return(0,a.jsx)(s.Provider,{value:{user:r,profile:l,session:c,loading:f,signOut:m,refreshProfile:p},children:t})}},5526:function(e,t,r){r.d(t,{supabase:function(){return u}});var a,n,i=r(98280),s=r(40257);let o=(void 0!==s?null===(a=s.env)||void 0===a?void 0:"https://ynkvvjkokwwnqoujeznu.supabase.co":void 0)||"",l=(void 0!==s?null===(n=s.env)||void 0===n?void 0:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inlua3Z2amtva3d3bnFvdWplem51Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg3NjE2ODMsImV4cCI6MjA4NDMzNzY4M30.tVFWjO_kqz2iY3GpunHC78czG6Tb2Ikhl1HbVoINbCg":void 0)||"";if(!o||!l){let e="Missing Supabase environment variables. Please set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY in your .env.local file. (Note: In Next.js, client-side env vars must be prefixed with NEXT_PUBLIC_)";throw console.error(e),Error(e)}let u=(0,i.eI)(o,l,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}})},96629:function(e,t,r){r.d(t,{AW:function(){return g},DK:function(){return d},HG:function(){return o},IP:function(){return b},Q6:function(){return v},Qn:function(){return l},TX:function(){return c},T_:function(){return p},Y:function(){return s},Y9:function(){return I},ZD:function(){return u},fX:function(){return y},ks:function(){return f},nk:function(){return i},pj:function(){return m},sN:function(){return k},vw:function(){return n},wY:function(){return _},z8:function(){return h},zk:function(){return w}});var a=r(5526);let n=async()=>{let e=new Date().toISOString(),{data:t,error:r}=await a.supabase.from("events").select("*, ticket_types(*)").eq("status","active").gte("date",e).order("created_at",{ascending:!1});if(r)throw r;return t},i=async e=>{let t=new Date().toISOString(),r=a.supabase.from("events").select("*, ticket_types(*), creator:users!events_creator_id_fkey(school)").eq("status","active").gte("date",t);if(e.search&&e.search.trim()){let t=e.search.trim().replace(/%/g,"\\%").replace(/_/g,"\\_");r=r.or("title.ilike.%".concat(t,"%,description.ilike.%").concat(t,"%"))}e.category&&"all"!==e.category&&(r=r.eq("category",e.category)),e.location&&e.location.trim()&&(r=r.ilike("location","%".concat(e.location,"%"))),e.dateFrom&&(r=r.gte("date",e.dateFrom)),e.dateTo&&(r=r.lte("date",e.dateTo)),r=r.order("date",{ascending:!0});let{data:n,error:i}=await r;if(i)throw i;let s=n||[];return e.school&&"all"!==e.school&&(s=s.filter(t=>{let r=t.creator;return(null==r?void 0:r.school)===e.school})),s},s=async e=>{let{data:t,error:r}=await a.supabase.from("events").select("*, ticket_types(*)").eq("id",e).single();if(r)throw r;return t},o=async e=>{let{data:t,error:r}=await a.supabase.from("orders").select("*, event:events(*), tickets(*, ticket_type:ticket_types(*))").eq("id",e).single();if(r)throw r;return t},l=async e=>{let{data:t,error:r}=await a.supabase.from("tickets").select("*, event:events(*), ticket_type:ticket_types(*)").eq("id",e).single();if(r)throw r;return t},u=async e=>{let{data:t,error:r}=await a.supabase.from("orders").select("id").eq("user_id",e).eq("payment_status","paid");if(r)throw r;if(!t||0===t.length)return[];let n=t.map(e=>e.id),{data:i,error:s}=await a.supabase.from("tickets").select("*, event:events(*), ticket_type:ticket_types(*), order:orders(*)").eq("user_id",e).in("order_id",n).order("created_at",{ascending:!1});if(s)throw s;return i||[]},c=async e=>{let t=new Date().toISOString(),{data:r,error:n}=await a.supabase.from("events").select("*, ticket_types(*)").eq("creator_id",e).gte("date",t).order("date",{ascending:!0});if(n)throw n;return r},d=async e=>{let t=new Date().toISOString(),{data:r,error:n}=await a.supabase.from("events").select("*, ticket_types(*)").eq("creator_id",e).lt("date",t).order("date",{ascending:!1});if(n)throw n;return r},f=async e=>{let{data:t,error:r}=await a.supabase.from("creator_profiles").select("*").eq("user_id",e).maybeSingle();if(r)throw r;return t||null},v=async e=>{let{data:t,error:r}=await a.supabase.from("orders").select("*, tickets(*)").eq("event_id",e).eq("payment_status","paid");if(r)throw r;let{data:n,error:i}=await a.supabase.from("tickets").select("*, ticket_type:ticket_types(*)").eq("event_id",e);if(i)throw i;return{orders:t||[],tickets:n||[]}},_=async e=>{let{data:t,error:r}=await a.supabase.from("wallet_transactions").select("*").eq("creator_id",e).order("created_at",{ascending:!1});if(r)throw r;return t},h=async e=>{let{data:t,error:r}=await a.supabase.from("withdrawals").select("*").eq("creator_id",e).order("created_at",{ascending:!1});if(r)throw r;return t||[]},p=async()=>{let{data:e,error:t}=await a.supabase.from("withdrawals").select("*, creator:users!withdrawals_creator_id_fkey(id, email, full_name, school)").order("created_at",{ascending:!1});if(t)throw t;return e||[]},m=async e=>{let{data:t,error:r}=await a.supabase.from("creator_profiles").select("account_balance, bank_account_name, bank_account_number, bank_name, bank_code, is_bank_verified").eq("user_id",e).single();if(r)throw r;return t},b=async()=>{let{data:e,error:t}=await a.supabase.from("events").select("*, ticket_types(*), creator:users!events_creator_id_fkey(id, email, full_name, school)").order("created_at",{ascending:!1});if(t)throw t;return e||[]},g=async()=>{let{data:e,error:t}=await a.supabase.from("users").select("*").order("created_at",{ascending:!1});if(t)throw t;return e||[]},w=async()=>{let{data:e,error:t}=await a.supabase.from("orders").select("*, event:events(id, title, creator:users!events_creator_id_fkey(id, email, full_name)), user:users(id, email, full_name)").order("created_at",{ascending:!1});if(t)throw t;return e||[]},y=async()=>{let{data:e,error:t}=await a.supabase.from("tickets").select("*, event:events(id, title), ticket_type:ticket_types(id, name, price, is_free), user:users(id, email, full_name), order:orders(id, payment_status)").order("created_at",{ascending:!1});if(t)throw console.error("Error fetching all tickets:",t),t;return e||[]},k=async()=>{let{data:e,error:t}=await a.supabase.from("users").select("*, creator_profile:creator_profiles(*)").eq("role","creator").order("created_at",{ascending:!1});if(t)throw t;return e||[]},I=async()=>{let{data:e,error:t}=await a.supabase.from("events").select("status");if(t)throw t;let r={active:0,draft:0,completed:0,cancelled:0};null==e||e.forEach(e=>{e.status in r&&r[e.status]++});let{data:n,error:i}=await a.supabase.from("users").select("role, banned");if(i)throw i;let s={user:0,creator:0,admin:0},o=0;null==n||n.forEach(e=>{e.role in s&&s[e.role]++,e.banned&&o++});let{data:l,error:u}=await a.supabase.from("orders").select("total_amount, created_at").eq("payment_status","paid");if(u)throw u;let c=(null==l?void 0:l.reduce((e,t)=>e+parseFloat(t.total_amount||0),0))||0,d=new Date,f=new Date(d.getFullYear(),d.getMonth(),1).toISOString(),v=(null==l?void 0:l.filter(e=>e.created_at>=f).reduce((e,t)=>e+parseFloat(t.total_amount||0),0))||0,{data:_,error:h}=await a.supabase.from("tickets").select("id");if(h)throw h;let p=(null==_?void 0:_.length)||0,{data:m,error:b}=await a.supabase.from("users").select("id").eq("role","creator");if(b)throw b;let g=(null==m?void 0:m.length)||0;return{events:{total:(null==e?void 0:e.length)||0,byStatus:r},users:{total:(null==n?void 0:n.length)||0,byRole:s,banned:o},revenue:{total:c,thisMonth:v},tickets:{totalSold:p},organizers:{active:g}}}},93448:function(e,t,r){r.d(t,{cn:function(){return i}});var a=r(61994),n=r(53335);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,a.W)(t))}}}]);