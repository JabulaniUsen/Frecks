(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1556],{74699:function(e,t,n){Promise.resolve().then(n.bind(n,13943))},13943:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return N}});var r=n(57437),s=n(99376),a=n(2265),i=n(11713),l=n(12381),d=n(69174),o=n(96629),c=n(51817),m=n(32660);let u=(0,n(79205).Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var x=n(30401),h=n(95080),f=n(92735),v=n(31047),p=n(83774),g=n(27648),j=n(64014),b=n(88361),y=n(14438);function N(){let e=(0,s.useParams)();(0,s.useRouter)();let t=e.id,[n,N]=(0,a.useState)(!1),{data:w,isLoading:k,error:_}=(0,i.a)({queryKey:["order",t],queryFn:()=>(0,o.HG)(t),enabled:!!t});(0,a.useEffect)(()=>{if(w&&"paid"===w.payment_status){let e="invoice_viewed_".concat(t);if(!localStorage.getItem(e)){N(!0),localStorage.setItem(e,"true");let t=setTimeout(()=>{N(!1)},3e3);return()=>clearTimeout(t)}}},[w,t]);let S=async(e,t)=>{try{var n,r,s;let a=null==w?void 0:null===(n=w.tickets)||void 0===n?void 0:n.find(t=>t.id===e),i=(null==a?void 0:null===(r=a.qr_code_data)||void 0===r?void 0:r.qrCodeImageUrl)||(null==a?void 0:null===(s=a.qr_code_data)||void 0===s?void 0:s.qrCodeImage);if(!a||!i){y.Am.error("QR code not available");return}let l=window.open("","_blank");if(!l){y.Am.error("Please allow popups to download ticket");return}let d=null==w?void 0:w.event;l.document.write("\n        <!DOCTYPE html>\n        <html>\n          <head>\n            <title>Ticket - ".concat(null==d?void 0:d.title,'</title>\n            <style>\n              body {\n                font-family: Arial, sans-serif;\n                max-width: 800px;\n                margin: 0 auto;\n                padding: 20px;\n              }\n              .ticket {\n                border: 2px solid #000;\n                border-radius: 8px;\n                padding: 30px;\n                text-align: center;\n              }\n              .ticket-header {\n                margin-bottom: 20px;\n              }\n              .ticket-title {\n                font-size: 24px;\n                font-weight: bold;\n                margin-bottom: 10px;\n              }\n              .qr-code {\n                margin: 20px 0;\n              }\n              .qr-code img {\n                max-width: 300px;\n                height: auto;\n              }\n              .ticket-info {\n                margin-top: 20px;\n                text-align: left;\n              }\n              .ticket-info p {\n                margin: 5px 0;\n              }\n            </style>\n          </head>\n          <body>\n            <div class="ticket">\n              <div class="ticket-header">\n                <h1 class="ticket-title">').concat((null==d?void 0:d.title)||"Event Ticket","</h1>\n                <p><strong>Ticket Type:</strong> ").concat(t,'</p>\n              </div>\n              <div class="qr-code">\n                <img src="').concat(i,'" alt="QR Code" />\n              </div>\n              <div class="ticket-info">\n                <p><strong>Order ID:</strong> ').concat(null==w?void 0:w.id,"</p>\n                <p><strong>Ticket ID:</strong> ").concat(e,"</p>\n                <p><strong>Date:</strong> ").concat((null==d?void 0:d.date)?(0,j.WU)(new Date(d.date),"MMM d, yyyy • h:mm a"):"N/A","</p>\n                <p><strong>Location:</strong> ").concat((null==d?void 0:d.location)||"N/A","</p>\n                <p><strong>Name:</strong> ").concat(null==w?void 0:w.full_name,"</p>\n                <p><strong>Email:</strong> ").concat(null==w?void 0:w.email,"</p>\n              </div>\n            </div>\n            <script>\n              window.onload = function() {\n                window.print();\n              }\n            </script>\n          </body>\n        </html>\n      ")),l.document.close()}catch(e){console.error("Error downloading ticket:",e),y.Am.error("Failed to download ticket")}};if(k)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)(c.Z,{className:"w-8 h-8 animate-spin"})});if(_||!w)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Order not found"}),(0,r.jsx)(g.default,{href:"/",children:(0,r.jsx)(l.z,{children:"Back to Home"})})]})});let C=w.event,E=w.tickets||[],Z=w.total_amount-200;return"paid"!==w.payment_status?(0,r.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,r.jsx)(b.default,{}),(0,r.jsx)("main",{className:"pt-20",children:(0,r.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsxs)("div",{className:"max-w-2xl mx-auto bg-card rounded-2xl border border-border p-8 text-center",children:[(0,r.jsx)("div",{className:"w-20 h-20 rounded-full bg-yellow-500/10 flex items-center justify-center mx-auto mb-6",children:(0,r.jsx)(c.Z,{className:"w-10 h-10 text-yellow-600 animate-spin"})}),(0,r.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Payment Pending"}),(0,r.jsx)("p",{className:"text-muted-foreground mb-6",children:"Your order is being processed. Please wait for payment confirmation."}),(0,r.jsxs)(d.C,{className:"mb-4",variant:"outline",children:["Order Status: ",w.payment_status]}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsx)(g.default,{href:"/",children:(0,r.jsx)(l.z,{variant:"outline",children:"Back to Home"})})})]})})})]}):(0,r.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,r.jsx)(b.default,{}),(0,r.jsx)("main",{className:"pt-20",children:(0,r.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,r.jsx)(g.default,{href:"/",children:(0,r.jsx)(l.z,{variant:"ghost",size:"icon",children:(0,r.jsx)(m.Z,{className:"w-5 h-5"})})}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)(l.z,{variant:"outline",size:"sm",onClick:()=>{let e=window.location.href;navigator.clipboard.writeText(e).then(()=>{y.Am.success("Invoice URL copied to clipboard!")}).catch(()=>{y.Am.error("Failed to copy URL")})},className:"gap-2",children:[(0,r.jsx)(u,{className:"w-4 h-4"}),"Copy Invoice"]}),(0,r.jsxs)(d.C,{className:"bg-green-500 text-white",children:[(0,r.jsx)(x.Z,{className:"w-3 h-3 mr-1"}),"Paid"]})]})]}),n&&(0,r.jsx)("div",{className:"bg-green-500/10 border border-green-500/20 rounded-xl p-6 mb-8",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 lg:w-12 lg:h-12 rounded-full bg-green-500 flex items-center justify-center",children:(0,r.jsx)(x.Z,{className:"w-6 h-6 text-white"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"lg:text-xl font-bold text-green-600 mb-1",children:"Payment Successful!"}),(0,r.jsx)("p",{className:"text-muted-foreground text-sm lg:text-base",children:"Your tickets have been confirmed. Show these QR codes at the event."})]})]})}),(0,r.jsxs)("div",{className:"bg-card rounded-2xl border border-border p-6 mb-6",children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold mb-4",children:["Your Tickets (",E.length,")"]}),(0,r.jsx)("div",{className:"space-y-6",children:E.map((e,t)=>{var n,s;let a=e.ticket_type,i=(null===(n=e.qr_code_data)||void 0===n?void 0:n.qrCodeImageUrl)||(null===(s=e.qr_code_data)||void 0===s?void 0:s.qrCodeImage);return(0,r.jsxs)("div",{className:"border border-border rounded-xl p-6",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)(h.Z,{className:"w-5 h-5 text-primary"}),(0,r.jsxs)("h3",{className:"text-lg font-semibold",children:[(null==a?void 0:a.name)||"Ticket"," #",t+1]})]}),(null==a?void 0:a.description)&&(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:a.description}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground mt-2 font-mono",children:["Ticket ID: ",e.id.slice(0,8),"..."]})]}),(0,r.jsx)("div",{className:"text-right",children:(0,r.jsx)("p",{className:"text-lg font-bold text-primary",children:(null==a?void 0:a.is_free)?"Free":"₦".concat((null==a?void 0:a.price)||0)})})]}),i?(0,r.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,r.jsx)("div",{className:"bg-white p-4 rounded-lg border-2 border-border",children:(0,r.jsx)("img",{src:i,alt:"QR Code",className:"w-48 h-48"})}),(0,r.jsxs)(l.z,{variant:"outline",onClick:()=>S(e.id,(null==a?void 0:a.name)||"Ticket"),children:[(0,r.jsx)(f.Z,{className:"w-4 h-4 mr-2"}),"Download Ticket"]})]}):(0,r.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"QR code not available"})]},e.id)})})]}),(0,r.jsxs)("div",{className:"bg-card rounded-2xl border border-border p-6 mb-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Ticket Details"}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Date"}),(0,r.jsx)("p",{className:"font-semibold",children:(0,j.WU)(new Date(w.created_at),"MMM d, yyyy • h:mm a")})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Name"}),(0,r.jsx)("p",{className:"font-semibold",children:w.full_name})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Email"}),(0,r.jsx)("p",{className:"font-semibold",children:w.email})]})]})]}),C&&(0,r.jsxs)("div",{className:"bg-card rounded-2xl border border-border p-6 mb-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Event Information"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-semibold mb-2",children:C.title}),(0,r.jsx)(d.C,{className:"mb-3",children:C.category})]}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(v.Z,{className:"w-5 h-5 text-primary"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Date & Time"}),(0,r.jsx)("p",{className:"font-semibold",children:(0,j.WU)(new Date(C.date),"MMM d, yyyy • h:mm a")})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(p.Z,{className:"w-5 h-5 text-primary"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Location"}),(0,r.jsx)("p",{className:"font-semibold",children:C.location})]})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-card rounded-2xl border border-border p-6 mb-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Payment Summary"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Subtotal"}),(0,r.jsxs)("span",{className:"font-medium",children:["₦",Z.toLocaleString()]})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Service Charge"}),(0,r.jsxs)("span",{className:"font-medium",children:["₦",200..toLocaleString()]})]}),(0,r.jsxs)("div",{className:"flex justify-between pt-2 border-t border-border",children:[(0,r.jsx)("span",{className:"font-semibold",children:"Total Paid"}),(0,r.jsxs)("span",{className:"text-2xl font-bold text-primary",children:["₦",w.total_amount.toLocaleString()]})]})]})]}),(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsx)(g.default,{href:"/",className:"flex-1",children:(0,r.jsx)(l.z,{variant:"outline",className:"w-full text-xs",children:"Browse More Events"})}),(0,r.jsxs)(l.z,{variant:"hero",onClick:()=>{E.forEach((e,t)=>{var n,r;let s=e.ticket_type;((null===(n=e.qr_code_data)||void 0===n?void 0:n.qrCodeImageUrl)||(null===(r=e.qr_code_data)||void 0===r?void 0:r.qrCodeImage))&&setTimeout(()=>{S(e.id,(null==s?void 0:s.name)||"Ticket")},1e3*t)}),y.Am.success("Opening all tickets for download...")},children:[(0,r.jsx)(f.Z,{className:"w-4 h-4 mr-2"}),(0,r.jsx)("span",{className:"text-xs",children:"Download All Tickets"})]})]})]})})})]})}},32660:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(79205).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},31047:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(79205).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},92735:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(79205).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},51817:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(79205).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},83774:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(79205).Z)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},95080:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(79205).Z)("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]])},24369:function(e,t,n){"use strict";var r=n(2265),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=r.useState,i=r.useEffect,l=r.useLayoutEffect,d=r.useDebugValue;function o(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!s(e,n)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),s=r[0].inst,c=r[1];return l(function(){s.value=n,s.getSnapshot=t,o(s)&&c({inst:s})},[e,n,t]),i(function(){return o(s)&&c({inst:s}),e(function(){o(s)&&c({inst:s})})},[e]),d(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:c},82558:function(e,t,n){"use strict";e.exports=n(24369)},69174:function(e,t,n){"use strict";n.d(t,{C:function(){return l}});var r=n(57437);n(2265);var s=n(90535),a=n(93448);let i=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:n,...s}=e;return(0,r.jsx)("div",{className:(0,a.cn)(i({variant:n}),t),...s})}},61146:function(e,t,n){"use strict";n.d(t,{NY:function(){return k},Ee:function(){return w},fC:function(){return N}});var r=n(2265),s=n(73966),a=n(26606),i=n(61188),l=n(66840),d=n(82558);function o(){return()=>{}}var c=n(57437),m="Avatar",[u,x]=(0,s.b)(m),[h,f]=u(m),v=r.forwardRef((e,t)=>{let{__scopeAvatar:n,...s}=e,[a,i]=r.useState("idle");return(0,c.jsx)(h,{scope:n,imageLoadingStatus:a,onImageLoadingStatusChange:i,children:(0,c.jsx)(l.WV.span,{...s,ref:t})})});v.displayName=m;var p="AvatarImage",g=r.forwardRef((e,t)=>{let{__scopeAvatar:n,src:s,onLoadingStatusChange:m=()=>{},...u}=e,x=f(p,n),h=function(e,t){let{referrerPolicy:n,crossOrigin:s}=t,a=(0,d.useSyncExternalStore)(o,()=>!0,()=>!1),l=r.useRef(null),c=a?(l.current||(l.current=new window.Image),l.current):null,[m,u]=r.useState(()=>y(c,e));return(0,i.b)(()=>{u(y(c,e))},[c,e]),(0,i.b)(()=>{let e=e=>()=>{u(e)};if(!c)return;let t=e("loaded"),r=e("error");return c.addEventListener("load",t),c.addEventListener("error",r),n&&(c.referrerPolicy=n),"string"==typeof s&&(c.crossOrigin=s),()=>{c.removeEventListener("load",t),c.removeEventListener("error",r)}},[c,s,n]),m}(s,u),v=(0,a.W)(e=>{m(e),x.onImageLoadingStatusChange(e)});return(0,i.b)(()=>{"idle"!==h&&v(h)},[h,v]),"loaded"===h?(0,c.jsx)(l.WV.img,{...u,ref:t,src:s}):null});g.displayName=p;var j="AvatarFallback",b=r.forwardRef((e,t)=>{let{__scopeAvatar:n,delayMs:s,...a}=e,i=f(j,n),[d,o]=r.useState(void 0===s);return r.useEffect(()=>{if(void 0!==s){let e=window.setTimeout(()=>o(!0),s);return()=>window.clearTimeout(e)}},[s]),d&&"loaded"!==i.imageLoadingStatus?(0,c.jsx)(l.WV.span,{...a,ref:t}):null});function y(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}b.displayName=j;var N=v,w=g,k=b}},function(e){e.O(0,[3227,4182,2972,5506,2642,3850,5730,758,5256,2893,1713,4438,9913,8361,2971,2117,1744],function(){return e(e.s=74699)}),_N_E=e.O()}]);