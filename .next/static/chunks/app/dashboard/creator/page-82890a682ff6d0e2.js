(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[669],{2058:function(e,t,s){Promise.resolve().then(s.bind(s,9137))},9137:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return eu}});var a=s(7437),r=s(2265),n=s(7648),l=s(9376),d=s(1713),i=s(2381),o=s(9174),c=s(767),m=s(4438),u=s(1047),x=s(5080),h=s(5252),f=s(5805),p=s(2489),g=s(6215),v=s(8847),b=s(8728),j=s(7692),N=s(8293),y=s(9397),w=s(525),k=s(2208),_=s(5868),C=s(1533),S=s(8930),Z=s(1817),T=s(3774),z=s(2735),E=s(7569),U=s(4362),A=s(6629),I=s(4014),L=s(1980),F=s(9827),M=s(1770),D=e=>{let{onDelete:t}=e,{profile:s}=(0,U.a)(),[l,m]=(0,r.useState)(!1),[u,x]=(0,r.useState)(null),{data:h,isLoading:f,error:p}=(0,d.a)({queryKey:["creator-events",null==s?void 0:s.id],queryFn:()=>(0,A.TX)(s.id),enabled:!!(null==s?void 0:s.id)});return f?(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)("div",{className:"text-center text-muted-foreground",children:"Loading events..."})}):p?(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"text-center text-destructive",children:["Error loading events: ",p.message]})}):(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"My Events"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-1",children:"Manage all your events"})]}),(0,a.jsxs)(i.z,{className:"gap-2",children:[(0,a.jsx)(y.Z,{className:"w-4 h-4"}),"Create Event"]})]}),h&&0!==h.length?(0,a.jsx)("div",{className:"grid gap-4",children:h.map(e=>{let s=e.ticket_types||[],r=s.reduce((e,t)=>e+(t.sold_count||0),0),l=s.reduce((e,t)=>e+(t.quantity||0),0),d=s.reduce((e,t)=>e+(t.price||0)*(t.sold_count||0),0);return(0,a.jsxs)("div",{className:"bg-card rounded-2xl border border-border p-6 hover:shadow-lg transition-shadow",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold",children:e.title}),(0,a.jsx)(o.C,{className:"active"===e.status?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground",children:e.status})]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:e.location}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:(0,I.WU)(new Date(e.date),"EEE, MMM d, yyyy • h:mm a")})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(n.default,{href:"/event/".concat(e.id),children:(0,a.jsxs)(i.z,{variant:"outline",size:"sm",className:"gap-1",children:[(0,a.jsx)(k.Z,{className:"w-4 h-4"})," View"]})}),(0,a.jsx)(n.default,{href:"/dashboard/creator/edit/".concat(e.id),children:(0,a.jsxs)(i.z,{variant:"outline",size:"sm",className:"gap-1",children:[(0,a.jsx)(_.Z,{className:"w-4 h-4"})," Edit"]})}),t&&(0,a.jsxs)(i.z,{variant:"outline",size:"sm",className:"gap-1 text-destructive hover:text-destructive",onClick:()=>{x(e.id),m(!0)},children:[(0,a.jsx)(S.Z,{className:"w-4 h-4"})," Delete"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 pt-4 border-t border-border",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Tickets Sold"}),(0,a.jsxs)("p",{className:"text-lg font-semibold",children:[r," / ",l]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Revenue"}),(0,a.jsxs)("p",{className:"text-lg font-semibold text-primary",children:["₦",d.toLocaleString()]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Attendees"}),(0,a.jsx)("p",{className:"text-lg font-semibold",children:r})]})]})]},e.id)})}):(0,a.jsxs)("div",{className:"bg-card rounded-2xl border border-border p-12 text-center",children:[(0,a.jsx)("p",{className:"text-muted-foreground mb-4",children:"No events yet"}),(0,a.jsxs)(i.z,{className:"gap-2",children:[(0,a.jsx)(y.Z,{className:"w-4 h-4"}),"Create Your First Event"]})]}),t&&(0,a.jsx)(c.aR,{open:l,onOpenChange:m,children:(0,a.jsxs)(c._T,{children:[(0,a.jsxs)(c.fY,{children:[(0,a.jsx)(c.f$,{children:"Delete Event"}),(0,a.jsx)(c.yT,{children:"Are you sure you want to delete this event? This action cannot be undone. The event will be moved to deleted events."})]}),(0,a.jsxs)(c.xo,{children:[(0,a.jsx)(c.le,{onClick:()=>x(null),children:"Cancel"}),(0,a.jsx)(c.OL,{onClick:()=>{u&&(t(u),m(!1),x(null))},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})})]})},O=s(3247),R=s(279),V=s(5526),P=()=>{let{profile:e}=(0,U.a)(),[t,s]=(0,r.useState)(""),[n,l]=(0,r.useState)("all"),{data:c,isLoading:m}=(0,d.a)({queryKey:["creator-events",null==e?void 0:e.id],queryFn:()=>(0,A.TX)(e.id),enabled:!!(null==e?void 0:e.id)}),{data:u,isLoading:x}=(0,d.a)({queryKey:["creator-tickets",null==e?void 0:e.id,n],queryFn:async()=>{let e=(null==c?void 0:c.map(e=>e.id))||[];if(0===e.length)return[];let t=V.supabase.from("tickets").select("*, event:events(*), ticket_type:ticket_types(*), order:orders(*)").in("event_id",e);"all"!==n&&(t=t.eq("event_id",n));let{data:s,error:a}=await t.order("created_at",{ascending:!1});if(a)throw a;return s||[]},enabled:!!(null==e?void 0:e.id)&&!!c}),h=(0,r.useMemo)(()=>{if(!u)return[];if(!t)return u;let e=t.toLowerCase();return u.filter(t=>{var s,a,r,n,l;let d=t.order||{};return(null===(s=d.email)||void 0===s?void 0:s.toLowerCase().includes(e))||(null===(a=d.full_name)||void 0===a?void 0:a.toLowerCase().includes(e))||(null===(r=t.qr_code)||void 0===r?void 0:r.toLowerCase().includes(e))||(null===(l=t.event)||void 0===l?void 0:null===(n=l.title)||void 0===n?void 0:n.toLowerCase().includes(e))})},[u,t]);return m||x?(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)("div",{className:"text-center text-muted-foreground",children:"Loading tickets..."})}):(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Tickets"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-1",children:"View and manage all tickets sold"})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(O.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,a.jsx)(R.I,{placeholder:"Search by name, email, or QR code...",value:t,onChange:e=>s(e.target.value),className:"pl-10"})]}),(0,a.jsxs)("select",{value:n,onChange:e=>l(e.target.value),className:"px-4 py-2 rounded-lg border border-border bg-background",children:[(0,a.jsx)("option",{value:"all",children:"All Events"}),null==c?void 0:c.map(e=>(0,a.jsx)("option",{value:e.id,children:e.title},e.id))]}),(0,a.jsxs)(i.z,{variant:"outline",className:"gap-2",children:[(0,a.jsx)(z.Z,{className:"w-4 h-4"}),"Export"]})]}),u&&0!==h.length?(0,a.jsx)("div",{className:"bg-card rounded-2xl border border-border overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-muted/50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"text-left px-6 py-4 text-sm font-medium text-muted-foreground",children:"Ticket ID"}),(0,a.jsx)("th",{className:"text-left px-6 py-4 text-sm font-medium text-muted-foreground",children:"Event"}),(0,a.jsx)("th",{className:"text-left px-6 py-4 text-sm font-medium text-muted-foreground",children:"Buyer"}),(0,a.jsx)("th",{className:"text-left px-6 py-4 text-sm font-medium text-muted-foreground",children:"Type"}),(0,a.jsx)("th",{className:"text-left px-6 py-4 text-sm font-medium text-muted-foreground",children:"Status"}),(0,a.jsx)("th",{className:"text-left px-6 py-4 text-sm font-medium text-muted-foreground",children:"Purchased"}),(0,a.jsx)("th",{className:"text-right px-6 py-4 text-sm font-medium text-muted-foreground",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-border",children:h.map(e=>{var t,s,r,n,l;return(0,a.jsxs)("tr",{className:"hover:bg-muted/30 transition-colors",children:[(0,a.jsxs)("td",{className:"px-6 py-4 font-mono text-sm",children:[e.qr_code.slice(0,8),"..."]}),(0,a.jsxs)("td",{className:"px-6 py-4",children:[(0,a.jsx)("div",{className:"font-medium",children:(null===(t=e.event)||void 0===t?void 0:t.title)||"N/A"}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:(0,I.WU)(new Date(null===(s=e.event)||void 0===s?void 0:s.date),"MMM d, yyyy")})]}),(0,a.jsxs)("td",{className:"px-6 py-4",children:[(0,a.jsx)("div",{children:(null===(r=e.order)||void 0===r?void 0:r.full_name)||"N/A"}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:(null===(n=e.order)||void 0===n?void 0:n.email)||""})]}),(0,a.jsx)("td",{className:"px-6 py-4",children:(null===(l=e.ticket_type)||void 0===l?void 0:l.name)||"N/A"}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)(o.C,{className:"valid"===e.status?"bg-green-500/10 text-green-600":"used"===e.status?"bg-blue-500/10 text-blue-600":"bg-muted text-muted-foreground",children:e.status})}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-muted-foreground",children:(0,I.WU)(new Date(e.created_at),"MMM d, yyyy")}),(0,a.jsx)("td",{className:"px-6 py-4 text-right",children:(0,a.jsxs)(i.z,{variant:"ghost",size:"sm",className:"gap-1",children:[(0,a.jsx)(k.Z,{className:"w-4 h-4"})," View"]})})]},e.id)})})]})})}):(0,a.jsx)("div",{className:"bg-card rounded-2xl border border-border p-12 text-center",children:(0,a.jsx)("p",{className:"text-muted-foreground",children:"No tickets found"})})]})},Y=s(9501),q=s(3590),B=s(7119),K=s(5060),J=s(2749),W=s(8151),G=s(6700),H=s(5658),X=s(2934),$=s(4156),Q=s(401),ee=s(2369),et=s(9322),es=s(3448),ea=s(3554),er=s(5038);s(1354);let en=B.Ry({bank_account_name:B.Z_().min(2,"Account name is required"),bank_account_number:B.Z_().regex(/^\d{10}$/,"Account number must be 10 digits"),bank_name:B.Z_().min(2,"Bank name is required"),bank_code:B.Z_().min(3,"Bank code is required")}),el=B.Ry({full_name:B.Z_().min(2,"Name must be at least 2 characters"),gender:B.Km(["male","female","other"]).optional(),school:B.Z_().min(2,"Please enter or select your school"),avatar_name:B.Z_().min(1,"Please select an avatar")}),ed=["TrEric","TrTorsten","TrIggy","TrFranklin","TrImran","TrAlex","TrFelix","TrEnrique","TrHarry","TrStu","TrChad"],ei=["TrChelsea","TrSamantha","TrMaria","TrRachel","TrShamila","TrSophia","TrHelen","TrNancy"],eo=["TrAlex","TrFelix","TrSophia","TrHarry","TrHelen"];var ec=()=>{var e;let{profile:t,refreshProfile:s}=(0,U.a)(),n=(0,F.NL)(),[l,o]=(0,r.useState)(!1),[c,m]=(0,r.useState)(null),[u,x]=(0,r.useState)(!1),[h,f]=(0,r.useState)(null),[p,g]=(0,r.useState)([]),[v,b]=(0,r.useState)(!0),[j,N]=(0,r.useState)(!1),[w,k]=(0,r.useState)(!1),[_,C]=(0,r.useState)(""),[S,T]=(0,r.useState)(!1),{data:z,isLoading:E}=(0,d.a)({queryKey:["creator-profile",null==t?void 0:t.id],queryFn:()=>(0,A.ks)(t.id),enabled:!!(null==t?void 0:t.id)});(0,r.useEffect)(()=>{let e=async()=>{b(!0),m(null);try{let e=await (0,H.G5)();console.log("Fetched banks:",e),e&&e.length>0?g(e):(console.warn("No banks returned from API"),m("No banks available. Please check if the Edge Function is deployed."))}catch(t){console.error("Failed to fetch banks:",t);let e=t.message||"Failed to load banks";e.includes("not deployed")||e.includes("not available")?m("Bank service is not available. The Edge Function needs to be deployed. Please deploy it using: supabase functions deploy get-paystack-banks"):m(e)}finally{b(!1)}};(null==t?void 0:t.id)&&e()},[null==t?void 0:t.id]);let I=(0,M.D)({mutationFn:e=>(0,L.D0)(t.id,{bank_account_name:e.bank_account_name,bank_account_number:e.bank_account_number,bank_name:e.bank_name,bank_code:e.bank_code,is_bank_verified:e.is_bank_verified}),onSuccess:()=>{o(!0),m(null),x(!1),f(null),n.invalidateQueries({queryKey:["creator-profile",null==t?void 0:t.id]}),setTimeout(()=>o(!1),3e3)},onError:e=>{m(e.message||"Failed to update bank account"),o(!1),x(!1)}}),{register:D,handleSubmit:O,watch:V,setValue:P,formState:{errors:B},reset:ec}=(0,Y.cI)({resolver:(0,q.F)(en),defaultValues:{bank_account_name:(null==z?void 0:z.bank_account_name)||"",bank_account_number:(null==z?void 0:z.bank_account_number)||"",bank_name:(null==z?void 0:z.bank_name)||"",bank_code:(null==z?void 0:z.bank_code)||""}});(0,r.useEffect)(()=>{z&&ec({bank_account_name:z.bank_account_name||"",bank_account_number:z.bank_account_number||"",bank_name:z.bank_name||"",bank_code:z.bank_code||""})},[z,ec]);let em=e=>{let t=p.find(t=>t.name===e);if(t){let e=V("bank_account_number")||"",s=V("bank_account_name")||"";f(null),m(null),P("bank_name",t.name,{shouldValidate:!0}),P("bank_code",t.code,{shouldValidate:!0}),e&&P("bank_account_number",e),s&&P("bank_account_name",s),N(!1)}},eu=V("bank_name"),ex=[...p].sort((e,t)=>e.name.localeCompare(t.name)),eh=async()=>{let e=V("bank_account_number"),t=V("bank_code"),s=V("bank_account_name");if(!t||!e){m("Please select a bank and enter your account number first");return}if(10!==e.length){m("Account number must be exactly 10 digits");return}x(!0),m(null),f(null);try{let a=await (0,H.s4)({account_number:e,bank_code:t});a.verified&&a.account_name?(f(a.account_name),ec({bank_account_name:a.account_name,bank_account_number:e,bank_name:V("bank_name"),bank_code:t},{keepValues:!1}),s&&s.toLowerCase()!==a.account_name.toLowerCase()&&console.log('Account name updated from "'.concat(s,'" to "').concat(a.account_name,'"'))):m(a.error||"Account verification failed. Please check your account number and bank code.")}catch(e){console.error("Verification error:",e),m(e.message||"Failed to verify account. Please try again.")}finally{x(!1)}},ef=async e=>{m(null),x(!0);try{let t=await (0,H.s4)({account_number:e.bank_account_number,bank_code:e.bank_code});if(!t.verified){m(t.error||"Account verification failed. Please verify your account details before saving."),x(!1);return}if(t.account_name){let s=t.account_name.toLowerCase().trim(),a=e.bank_account_name.toLowerCase().trim();if(s!==a){m('Account name mismatch. The verified account name is: "'.concat(t.account_name,'". Please update it and try again.')),ec({...e,bank_account_name:t.account_name}),x(!1);return}}I.mutate({...e,is_bank_verified:!0})}catch(e){console.error("Submit error:",e),m(e.message||"Failed to verify and save account. Please try again."),x(!1)}},{register:ep,handleSubmit:eg,watch:ev,setValue:eb,formState:{errors:ej},reset:eN}=(0,Y.cI)({resolver:(0,q.F)(el),defaultValues:{full_name:(null==t?void 0:t.full_name)||"",gender:(null==t?void 0:t.gender)||void 0,school:(null==t?void 0:t.school)||"",avatar_name:(null==t?void 0:t.avatar_name)||""}});(0,r.useEffect)(()=>{t&&eN({full_name:t.full_name||"",gender:t.gender||void 0,school:t.school||"",avatar_name:t.avatar_name||""})},[t,eN]);let ey=ev("gender"),ew=ev("avatar_name"),ek=ev("school"),e_="male"===ey?ed:"female"===ey?ei:eo,eC=(0,M.D)({mutationFn:e=>(0,L.Lj)(t.id,{full_name:e.full_name,gender:e.gender||null,school:e.school,avatar_name:e.avatar_name}),onSuccess:async()=>{T(!0),m(null),await s(),n.invalidateQueries({queryKey:["creator-profile",null==t?void 0:t.id]}),setTimeout(()=>T(!1),3e3)},onError:e=>{m(e.message||"Failed to update profile"),T(!1)}}),eS=async e=>{m(null),eC.mutate(e)};return E?(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)("div",{className:"text-center text-muted-foreground",children:"Loading..."})}):(0,a.jsxs)("div",{className:"p-6 max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Settings"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-1",children:"Manage your profile and payout details"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-card rounded-2xl border border-border p-6 space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-1",children:"Profile Information"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Update your personal information and avatar"})]}),S&&(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-green-500/10 text-green-600 rounded-lg",children:[(0,a.jsx)(X.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"text-sm",children:"Profile updated successfully!"})]}),(0,a.jsxs)("form",{onSubmit:eg(eS),className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(K._,{htmlFor:"profile_full_name",children:"Full Name"}),(0,a.jsx)(R.I,{id:"profile_full_name",type:"text",placeholder:"John Doe",...ep("full_name"),className:(0,es.cn)("mt-2",ej.full_name&&"border-destructive")}),ej.full_name&&(0,a.jsx)("p",{className:"text-sm text-destructive mt-1",children:ej.full_name.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(K._,{htmlFor:"profile_email",children:"Email"}),(0,a.jsx)(R.I,{id:"profile_email",type:"email",value:(null==t?void 0:t.email)||"",readOnly:!0,className:"mt-2 bg-muted"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Email cannot be changed"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(K._,{children:"Gender"}),(0,a.jsxs)(G.E,{value:ey,onValueChange:e=>eb("gender",e),className:"mt-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 p-3 rounded-lg border border-border hover:bg-muted/50",children:[(0,a.jsx)(G.m,{value:"male",id:"profile_male"}),(0,a.jsx)(K._,{htmlFor:"profile_male",className:"cursor-pointer flex-1",children:"Male"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 p-3 rounded-lg border border-border hover:bg-muted/50",children:[(0,a.jsx)(G.m,{value:"female",id:"profile_female"}),(0,a.jsx)(K._,{htmlFor:"profile_female",className:"cursor-pointer flex-1",children:"Female"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 p-3 rounded-lg border border-border hover:bg-muted/50",children:[(0,a.jsx)(G.m,{value:"other",id:"profile_other"}),(0,a.jsx)(K._,{htmlFor:"profile_other",className:"cursor-pointer flex-1",children:"Other"})]})]}),ej.gender&&(0,a.jsx)("p",{className:"text-sm text-destructive mt-1",children:ej.gender.message})]}),ey&&(0,a.jsxs)("div",{children:[(0,a.jsx)(K._,{children:"Choose Your Avatar"}),(0,a.jsx)("div",{className:"grid grid-cols-6 gap-2 mt-2",children:e_.map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>eb("avatar_name",e,{shouldValidate:!0}),className:(0,es.cn)("p-2 rounded-full border-2 transition-all hover:scale-110 flex items-center justify-center",ew===e?"border-primary bg-primary/10":"border-border hover:border-primary/50"),children:(0,a.jsx)(er.qU,{name:e,size:"sm",rounded:!0})},e))}),(0,a.jsx)("input",{type:"hidden",...ep("avatar_name")}),ej.avatar_name&&(0,a.jsx)("p",{className:"text-sm text-destructive mt-1",children:ej.avatar_name.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(K._,{htmlFor:"profile_school",children:"School"}),(0,a.jsxs)(J.J2,{open:w,onOpenChange:k,children:[(0,a.jsx)(J.xo,{asChild:!0,children:(0,a.jsxs)(i.z,{variant:"outline",role:"combobox","aria-expanded":w,className:"w-full justify-between mt-2",children:[ek||"Select or enter your school...",(0,a.jsx)($.Z,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,a.jsx)(J.yk,{className:"w-[var(--radix-popover-trigger-width)] p-0",align:"start",children:(0,a.jsxs)(W.mY,{children:[(0,a.jsx)(W.sZ,{placeholder:"Search school or type to add custom...",onValueChange:e=>{C(e)}}),(0,a.jsxs)(W.e8,{children:[(0,a.jsx)(W.rb,{children:(0,a.jsx)("div",{className:"py-2 px-4",children:(0,a.jsxs)(i.z,{type:"button",variant:"outline",size:"sm",className:"w-full",onClick:()=>{_&&(eb("school",_,{shouldValidate:!0}),k(!1),C(""))},children:[(0,a.jsx)(y.Z,{className:"mr-2 h-4 w-4"}),'Add "',_||"Custom School",'"']})})}),(0,a.jsx)(W.fu,{children:ea.u.map(e=>(0,a.jsxs)(W.di,{value:e,onSelect:()=>{eb("school",e,{shouldValidate:!0}),k(!1)},children:[(0,a.jsx)(Q.Z,{className:(0,es.cn)("mr-2 h-4 w-4",ek===e?"opacity-100":"opacity-0")}),e]},e))}),_&&!ea.u.some(e=>e.toLowerCase().includes(_.toLowerCase()))&&(0,a.jsx)(W.fu,{children:(0,a.jsxs)(W.di,{value:"add-".concat(_),onSelect:()=>{eb("school",_,{shouldValidate:!0}),k(!1),C("")},children:[(0,a.jsx)(y.Z,{className:"mr-2 h-4 w-4"}),'Add "',_,'"']})})]})]})})]}),(0,a.jsx)("input",{type:"hidden",...ep("school")}),ej.school&&(0,a.jsx)("p",{className:"text-sm text-destructive mt-1",children:ej.school.message})]}),(0,a.jsx)(i.z,{type:"submit",variant:"hero",disabled:eC.isPending,className:"w-full gap-2",children:eC.isPending?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Z.Z,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ee.Z,{className:"w-4 h-4"}),"Save Profile"]})})]})]}),(0,a.jsxs)("div",{className:"bg-card rounded-2xl border border-border p-6 space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-1",children:"Bank Account Details"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Add your bank account details to receive payouts from ticket sales"})]}),(null==z?void 0:z.is_bank_verified)&&(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-green-500/10 text-green-600 rounded-lg",children:[(0,a.jsx)(X.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Bank account verified"})]}),l&&(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-green-500/10 text-green-600 rounded-lg",children:[(0,a.jsx)(X.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"text-sm",children:"Bank account details updated successfully!"})]}),c&&(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-destructive/10 text-destructive rounded-lg",children:[(0,a.jsx)(et.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"text-sm",children:c})]}),h&&(0,a.jsxs)("div",{className:"flex items-start gap-2 p-3 bg-blue-500/10 text-blue-600 rounded-lg",children:[(0,a.jsx)(X.Z,{className:"w-5 h-5 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Account verified successfully!"}),(0,a.jsxs)("p",{className:"text-sm mt-1",children:["Account name: ",(0,a.jsx)("strong",{children:h})]}),(0,a.jsx)("p",{className:"text-xs mt-1 opacity-80",children:"You can now save your bank details. The account name has been auto-filled."})]})]}),(0,a.jsxs)("form",{onSubmit:O(ef),className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(K._,{htmlFor:"bank_name",children:"Bank Name"}),v?(0,a.jsx)("div",{className:"mt-2 w-full px-3 py-2 rounded-lg border border-border bg-muted animate-pulse",children:"Loading banks..."}):0===p.length?(0,a.jsxs)("div",{className:"mt-2 w-full px-3 py-2 rounded-lg border border-border bg-muted text-muted-foreground",children:["No banks available. ",c||"Please check your connection."]}):(0,a.jsxs)(J.J2,{open:j,onOpenChange:N,children:[(0,a.jsx)(J.xo,{asChild:!0,children:(0,a.jsxs)(i.z,{variant:"outline",role:"combobox","aria-expanded":j,className:(0,es.cn)("w-full justify-between mt-2",!eu&&"text-muted-foreground"),children:[eu||"Select a bank...",(0,a.jsx)($.Z,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,a.jsx)(J.yk,{className:"w-[var(--radix-popover-trigger-width)] p-0",align:"start",children:(0,a.jsxs)(W.mY,{children:[(0,a.jsx)(W.sZ,{placeholder:"Search bank..."}),(0,a.jsxs)(W.e8,{children:[(0,a.jsx)(W.rb,{children:"No bank found."}),(0,a.jsx)(W.fu,{children:ex.map(e=>(0,a.jsxs)(W.di,{value:e.name,onSelect:e=>{let t=ex.find(t=>t.name.toLowerCase()===e.toLowerCase()||t.name===e);t&&em(t.name)},children:[(0,a.jsx)(Q.Z,{className:(0,es.cn)("mr-2 h-4 w-4",eu===e.name?"opacity-100":"opacity-0")}),e.name]},e.code))})]})]})})]}),(0,a.jsx)("input",{type:"hidden",...D("bank_name")}),B.bank_name&&(0,a.jsx)("p",{className:"text-sm text-destructive mt-1",children:B.bank_name.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(K._,{htmlFor:"bank_code",children:"Bank Code"}),(0,a.jsx)(R.I,{id:"bank_code",type:"text",placeholder:"Bank code (auto-filled when bank is selected)",...D("bank_code"),readOnly:!0,className:"mt-2 bg-muted"}),B.bank_code&&(0,a.jsx)("p",{className:"text-sm text-destructive mt-1",children:B.bank_code.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(K._,{htmlFor:"bank_account_number",children:"Account Number"}),(0,a.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,a.jsx)(R.I,{id:"bank_account_number",type:"text",placeholder:"1234567890",maxLength:10,inputMode:"numeric",pattern:"[0-9]*",...D("bank_account_number",{onChange:e=>{let t=e.target.value.replace(/\D/g,"");e.target.value=t,D("bank_account_number").onChange(e)}}),className:"flex-1"}),(0,a.jsx)(i.z,{type:"button",variant:"outline",onClick:eh,disabled:u||!V("bank_code")||!V("bank_account_number")||(null===(e=V("bank_account_number"))||void 0===e?void 0:e.length)!==10,className:"gap-2 whitespace-nowrap",children:u?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Z.Z,{className:"w-4 h-4 animate-spin"}),"Verifying..."]}):"Verify Account"})]}),B.bank_account_number&&(0,a.jsx)("p",{className:"text-sm text-destructive mt-1",children:B.bank_account_number.message}),V("bank_account_number")&&10!==V("bank_account_number").length&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Account number must be exactly 10 digits"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(K._,{htmlFor:"bank_account_name",children:"Account Name"}),(0,a.jsx)(R.I,{id:"bank_account_name",type:"text",placeholder:"Account name (auto-filled after verification)",...D("bank_account_name"),readOnly:!!h,className:(0,es.cn)("mt-2",h&&"bg-muted")}),B.bank_account_name&&(0,a.jsx)("p",{className:"text-sm text-destructive mt-1",children:B.bank_account_name.message}),h&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"✓ Account name verified and auto-filled"})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[!h&&!(null==z?void 0:z.is_bank_verified)&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground text-center",children:'\uD83D\uDCA1 Tip: Click "Verify Account" to verify your account details before saving'}),(0,a.jsx)(i.z,{type:"submit",variant:"hero",disabled:I.isPending||u,className:"w-full gap-2",children:I.isPending?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Z.Z,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):"Save Bank Details"})]})]})]})]})]})};function em(){let{profile:e,loading:t,user:s}=(0,U.a)(),O=(0,l.useRouter)(),R=(0,l.useSearchParams)(),[V,Y]=(0,r.useState)("dashboard"),[q,B]=(0,r.useState)(null),[K,J]=(0,r.useState)(!1),[W,G]=(0,r.useState)(!1),[H,X]=(0,r.useState)(null),{data:$,isLoading:Q,error:ee}=(0,d.a)({queryKey:["creator-events",null==e?void 0:e.id],queryFn:()=>(0,A.TX)(e.id),enabled:!!(null==e?void 0:e.id)}),{data:et,isLoading:es}=(0,d.a)({queryKey:["creator-past-events",null==e?void 0:e.id],queryFn:()=>(0,A.DK)(e.id),enabled:!!(null==e?void 0:e.id)}),{data:ea,isLoading:er}=(0,d.a)({queryKey:["user-tickets",null==s?void 0:s.id],queryFn:()=>(0,A.ZD)(s.id),enabled:!!(null==s?void 0:s.id)&&!t}),en=(0,F.NL)(),el=(0,M.D)({mutationFn:e=>(0,L.Bt)(e,s.id),onSuccess:()=>{m.Am.success("Event deleted successfully"),en.invalidateQueries({queryKey:["creator-events"]}),en.invalidateQueries({queryKey:["creator-past-events"]})},onError:e=>{m.Am.error((null==e?void 0:e.message)||"Failed to delete event")}});(0,r.useEffect)(()=>{R.get("created")&&(m.Am.success("Event created successfully!",{description:"Your event has been created and is now live."}),O.replace("/dashboard/creator"))},[R,O]);let ed=(0,r.useMemo)(()=>{if(!$)return[{label:"Total Events",value:"0",icon:u.Z,change:""},{label:"Tickets Sold",value:"0",icon:x.Z,change:""},{label:"Total Revenue",value:"₦0",icon:h.Z,change:""},{label:"Total Attendees",value:"0",icon:f.Z,change:""}];let e=$.length,t=$.reduce((e,t)=>e+(t.ticket_types||[]).reduce((e,t)=>e+(t.sold_count||0),0),0),s=$.reduce((e,t)=>e+(t.ticket_types||[]).reduce((e,t)=>e+(t.price||0)*(t.sold_count||0),0),0);return[{label:"Total Events",value:e.toString(),icon:u.Z,change:""},{label:"Tickets Sold",value:t.toLocaleString(),icon:x.Z,change:""},{label:"Total Revenue",value:"₦".concat(s.toLocaleString()),icon:h.Z,change:""},{label:"Total Attendees",value:t.toLocaleString(),icon:f.Z,change:""}]},[$]),ei=(0,r.useMemo)(()=>$?$.map(e=>{let t=e.ticket_types||[],s=t.reduce((e,t)=>e+(t.sold_count||0),0),a=t.reduce((e,t)=>e+(t.quantity||0),0),r=t.reduce((e,t)=>e+(t.price||0)*(t.sold_count||0),0);return{id:e.id,title:e.title,date:(0,I.WU)(new Date(e.date),"MMM d, yyyy"),ticketsSold:s,totalTickets:a,revenue:r,status:e.status||"active"}}):[],[$]);return t?(0,a.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Loading..."})]})}):e&&s?"creator"!==e.role?(0,a.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"mb-2 text-lg font-semibold",children:"Access Denied"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"This page is only accessible to creators."}),(0,a.jsx)(n.default,{href:"/dashboard/user",children:(0,a.jsx)(i.z,{variant:"outline",children:"Go to User Dashboard"})})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-background flex",children:[K&&(0,a.jsx)("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-40 lg:hidden",onClick:()=>J(!1)}),(0,a.jsxs)("aside",{className:"fixed inset-y-0 left-0 z-50 w-64 bg-card border-r border-border transform transition-transform duration-300 ease-in-out lg:hidden ".concat(K?"translate-x-0":"-translate-x-full"),children:[(0,a.jsxs)("div",{className:"p-4 border-b border-border flex items-center justify-between",children:[(0,a.jsxs)(n.default,{href:"/",className:"flex items-center gap-2",onClick:()=>J(!1),children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-xl bg-primary flex items-center justify-center",children:(0,a.jsx)(x.Z,{className:"w-4 h-4 text-primary-foreground"})}),(0,a.jsx)("span",{className:"text-lg font-bold text-primary",children:"Frecks"})]}),(0,a.jsx)("button",{onClick:()=>J(!1),className:"p-2 hover:bg-muted rounded-lg",children:(0,a.jsx)(p.Z,{className:"w-5 h-5"})})]}),(0,a.jsxs)("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:[(0,a.jsxs)("button",{onClick:()=>{Y("dashboard"),J(!1)},className:"w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors ".concat("dashboard"===V?"bg-primary text-primary-foreground font-medium":"text-muted-foreground hover:bg-muted"),children:[(0,a.jsx)(g.Z,{className:"w-4 h-4"}),"Dashboard"]}),(0,a.jsxs)("button",{onClick:()=>{Y("events"),J(!1)},className:"w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors ".concat("events"===V?"bg-primary text-primary-foreground font-medium":"text-muted-foreground hover:bg-muted"),children:[(0,a.jsx)(u.Z,{className:"w-4 h-4"}),"My Events"]}),(0,a.jsxs)("button",{onClick:()=>{Y("tickets"),J(!1)},className:"w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors ".concat("tickets"===V?"bg-primary text-primary-foreground font-medium":"text-muted-foreground hover:bg-muted"),children:[(0,a.jsx)(x.Z,{className:"w-4 h-4"}),"Tickets"]}),(0,a.jsxs)("button",{onClick:()=>{Y("my-tickets"),J(!1)},className:"w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors ".concat("my-tickets"===V?"bg-primary text-primary-foreground font-medium":"text-muted-foreground hover:bg-muted"),children:[(0,a.jsx)(v.Z,{className:"w-4 h-4"}),"My Tickets"]}),(0,a.jsxs)("button",{onClick:()=>{Y("settings"),J(!1)},className:"w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors ".concat("settings"===V?"bg-primary text-primary-foreground font-medium":"text-muted-foreground hover:bg-muted"),children:[(0,a.jsx)(b.Z,{className:"w-4 h-4"}),"Settings"]})]}),(0,a.jsxs)("div",{className:"p-4 border-t border-border space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-3",children:[(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"Theme"}),(0,a.jsx)(E.Z,{})]}),(0,a.jsx)(n.default,{href:"/",children:(0,a.jsxs)("button",{className:"w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm text-muted-foreground hover:bg-muted transition-colors",children:[(0,a.jsx)(j.Z,{className:"w-4 h-4"}),"Back to Site"]})})]})]}),(0,a.jsxs)("aside",{className:"hidden lg:flex flex-col w-64 bg-card border-r border-border",children:[(0,a.jsx)("div",{className:"p-6 border-b border-border",children:(0,a.jsxs)(n.default,{href:"/",className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-xl bg-primary flex items-center justify-center",children:(0,a.jsx)(x.Z,{className:"w-5 h-5 text-primary-foreground"})}),(0,a.jsx)("span",{className:"text-xl font-bold text-primary",children:"Frecks"})]})}),(0,a.jsxs)("nav",{className:"flex-1 p-4 space-y-2",children:[(0,a.jsxs)("button",{onClick:()=>Y("dashboard"),className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-colors ".concat("dashboard"===V?"bg-primary text-primary-foreground font-medium":"text-muted-foreground hover:bg-muted"),children:[(0,a.jsx)(g.Z,{className:"w-5 h-5"}),"Dashboard"]}),(0,a.jsxs)("button",{onClick:()=>Y("events"),className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-colors ".concat("events"===V?"bg-primary text-primary-foreground font-medium":"text-muted-foreground hover:bg-muted"),children:[(0,a.jsx)(u.Z,{className:"w-5 h-5"}),"My Events"]}),(0,a.jsxs)("button",{onClick:()=>Y("past-events"),className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-colors ".concat("past-events"===V?"bg-primary text-primary-foreground font-medium":"text-muted-foreground hover:bg-muted"),children:[(0,a.jsx)(u.Z,{className:"w-5 h-5"}),"Past Events"]}),(0,a.jsxs)("button",{onClick:()=>Y("tickets"),className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-colors ".concat("tickets"===V?"bg-primary text-primary-foreground font-medium":"text-muted-foreground hover:bg-muted"),children:[(0,a.jsx)(x.Z,{className:"w-5 h-5"}),"Tickets"]}),(0,a.jsxs)("button",{onClick:()=>Y("my-tickets"),className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-colors ".concat("my-tickets"===V?"bg-primary text-primary-foreground font-medium":"text-muted-foreground hover:bg-muted"),children:[(0,a.jsx)(v.Z,{className:"w-5 h-5"}),"My Tickets"]}),(0,a.jsxs)("button",{onClick:()=>Y("settings"),className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-colors ".concat("settings"===V?"bg-primary text-primary-foreground font-medium":"text-muted-foreground hover:bg-muted"),children:[(0,a.jsx)(b.Z,{className:"w-5 h-5"}),"Settings"]})]}),(0,a.jsxs)("div",{className:"p-4 border-t border-border space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-4",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Theme"}),(0,a.jsx)(E.Z,{})]}),(0,a.jsx)(n.default,{href:"/",children:(0,a.jsxs)("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-muted-foreground hover:bg-muted transition-colors",children:[(0,a.jsx)(j.Z,{className:"w-5 h-5"}),"Back to Site"]})})]})]}),(0,a.jsxs)("main",{className:"flex-1 overflow-auto",children:[(0,a.jsx)("header",{className:"sticky top-0 z-30 bg-background/80 backdrop-blur-lg border-b border-border",children:(0,a.jsxs)("div",{className:"flex items-center justify-between px-3 md:px-6 py-3 md:py-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 md:gap-4",children:[(0,a.jsx)("button",{onClick:()=>J(!0),className:"lg:hidden p-2 hover:bg-muted rounded-lg",children:(0,a.jsx)(N.Z,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-lg md:text-2xl font-bold",children:"Organizer Dashboard"}),(0,a.jsx)("p",{className:"text-xs md:text-sm text-muted-foreground hidden sm:block",children:"Manage your events and track sales"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 md:gap-3",children:[(0,a.jsx)("div",{className:"lg:hidden",children:(0,a.jsx)(E.Z,{})}),(0,a.jsx)(n.default,{href:"/dashboard/creator/create",children:(0,a.jsxs)(i.z,{size:"sm",className:"gap-1 md:gap-2 text-xs md:text-base",children:[(0,a.jsx)(y.Z,{className:"w-3 h-3 md:w-4 md:h-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Create Event"}),(0,a.jsx)("span",{className:"sm:hidden",children:"Create"})]})})]})]})}),"dashboard"===V&&(0,a.jsxs)("div",{className:"p-3 md:p-6 space-y-4 md:space-y-8",children:[(0,a.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-2 md:gap-4",children:ed.map(e=>(0,a.jsxs)("div",{className:"bg-card rounded-lg md:rounded-2xl border border-border p-3 md:p-6 shadow-card",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-2 md:mb-4",children:[(0,a.jsx)("div",{className:"w-8 h-8 md:w-12 md:h-12 rounded-lg md:rounded-xl bg-primary/10 flex items-center justify-center",children:(0,a.jsx)(e.icon,{className:"w-4 h-4 md:w-6 md:h-6 text-primary"})}),(0,a.jsx)(w.Z,{className:"w-4 h-4 md:w-5 md:h-5 text-primary hidden sm:block"})]}),(0,a.jsx)("div",{className:"text-lg md:text-2xl font-bold mb-0.5 md:mb-1",children:e.value}),(0,a.jsx)("div",{className:"text-xs md:text-sm text-muted-foreground",children:e.label}),(0,a.jsx)("div",{className:"text-xs text-primary mt-1 md:mt-2",children:e.change})]},e.label))}),(0,a.jsxs)("div",{className:"bg-card rounded-lg md:rounded-2xl border border-border shadow-card overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-3 md:p-6 border-b border-border flex flex-col sm:flex-row sm:items-center justify-between gap-2 md:gap-4",children:[(0,a.jsx)("h2",{className:"text-base md:text-xl font-bold",children:"Your Events"}),(0,a.jsxs)("div",{className:"flex gap-1 md:gap-2",children:[(0,a.jsx)(i.z,{variant:"outline",size:"sm",className:"text-xs",children:"All"}),(0,a.jsx)(i.z,{variant:"ghost",size:"sm",className:"text-xs",children:"Active"}),(0,a.jsx)(i.z,{variant:"ghost",size:"sm",className:"text-xs",children:"Done"})]})]}),(0,a.jsx)("div",{className:"lg:hidden divide-y divide-border",children:(null==e?void 0:e.id)?Q?(0,a.jsx)("div",{className:"p-3 text-center text-xs text-muted-foreground",children:"Loading events..."}):ee?(0,a.jsxs)("div",{className:"p-3 text-center text-xs text-destructive",children:["Error: ",ee.message]}):0===ei.length?(0,a.jsx)("div",{className:"p-3 text-center text-xs text-muted-foreground",children:"No events yet. Create your first event!"}):ei.map(e=>(0,a.jsxs)("div",{className:"p-3",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold truncate",children:e.title}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:e.date})]}),(0,a.jsx)(o.C,{className:"text-xs shrink-0 ".concat("active"===e.status?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"),children:e.status})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs mb-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Sold:"})," ",(0,a.jsxs)("span",{className:"font-medium",children:[e.ticketsSold,"/",e.totalTickets]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Revenue:"})," ",(0,a.jsxs)("span",{className:"font-medium text-primary",children:["₦",e.revenue.toLocaleString()]})]})]}),(0,a.jsxs)("div",{className:"flex gap-1.5 mt-2",children:[(0,a.jsx)(n.default,{href:"/dashboard/creator/analytics/".concat(e.id),className:"flex-1",children:(0,a.jsxs)(i.z,{variant:"outline",size:"sm",className:"w-full gap-1 text-xs h-8",children:[(0,a.jsx)(k.Z,{className:"w-3 h-3"})," View"]})}),(0,a.jsx)(n.default,{href:"/dashboard/creator/edit/".concat(e.id),className:"flex-1",children:(0,a.jsxs)(i.z,{variant:"ghost",size:"sm",className:"w-full gap-1 text-xs h-8",children:[(0,a.jsx)(_.Z,{className:"w-3 h-3"})," Edit"]})})]})]},e.id)):(0,a.jsx)("div",{className:"p-3 text-center text-xs text-muted-foreground",children:"Loading..."})}),(0,a.jsx)("div",{className:"hidden lg:block overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-muted/50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"text-left px-4 py-3 text-xs md:text-sm font-medium text-muted-foreground",children:"Event"}),(0,a.jsx)("th",{className:"text-left px-4 py-3 text-xs md:text-sm font-medium text-muted-foreground",children:"Date"}),(0,a.jsx)("th",{className:"text-left px-4 py-3 text-xs md:text-sm font-medium text-muted-foreground",children:"Tickets Sold"}),(0,a.jsx)("th",{className:"text-left px-4 py-3 text-xs md:text-sm font-medium text-muted-foreground",children:"Revenue"}),(0,a.jsx)("th",{className:"text-left px-4 py-3 text-xs md:text-sm font-medium text-muted-foreground",children:"Status"}),(0,a.jsx)("th",{className:"text-right px-4 py-3 text-xs md:text-sm font-medium text-muted-foreground",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-border",children:(null==e?void 0:e.id)?Q?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:6,className:"px-4 py-3 text-center text-xs text-muted-foreground",children:"Loading events..."})}):ee?(0,a.jsx)("tr",{children:(0,a.jsxs)("td",{colSpan:6,className:"px-4 py-3 text-center text-xs text-destructive",children:["Error loading events: ",ee.message]})}):0===ei.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:6,className:"px-4 py-3 text-center text-xs text-muted-foreground",children:"No events yet. Create your first event!"})}):ei.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-muted/30 transition-colors",children:[(0,a.jsx)("td",{className:"px-4 py-3 text-sm font-medium",children:e.title}),(0,a.jsx)("td",{className:"px-4 py-3 text-xs text-muted-foreground",children:e.date}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-20 h-1.5 bg-muted rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-primary rounded-full",style:{width:"".concat(e.ticketsSold/e.totalTickets*100,"%")}})}),(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:[e.ticketsSold,"/",e.totalTickets]})]})}),(0,a.jsxs)("td",{className:"px-4 py-3 text-sm font-semibold text-primary",children:["₦",e.revenue.toLocaleString()]}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsx)(o.C,{className:"text-xs ".concat("active"===e.status?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"),children:e.status})}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,a.jsx)(n.default,{href:"/dashboard/creator/analytics/".concat(e.id),children:(0,a.jsx)(i.z,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"View Analytics",children:(0,a.jsx)(k.Z,{className:"w-3 h-3"})})}),(0,a.jsx)(n.default,{href:"/dashboard/creator/edit/".concat(e.id),children:(0,a.jsx)(i.z,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Edit Event",children:(0,a.jsx)(_.Z,{className:"w-3 h-3"})})}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(i.z,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>B(q===e.id?null:e.id),children:(0,a.jsx)(C.Z,{className:"w-3 h-3"})}),q===e.id&&(0,a.jsxs)("div",{className:"absolute right-0 top-full mt-1 w-36 bg-card border border-border rounded-lg shadow-lg py-1 z-10",children:[(0,a.jsx)(n.default,{href:"/dashboard/creator/analytics/".concat(e.id),children:(0,a.jsxs)("button",{className:"w-full px-3 py-1.5 text-left text-xs hover:bg-muted transition-colors flex items-center gap-2",onClick:()=>B(null),children:[(0,a.jsx)(k.Z,{className:"w-3 h-3"})," View Analytics"]})}),(0,a.jsx)(n.default,{href:"/dashboard/creator/edit/".concat(e.id),children:(0,a.jsxs)("button",{className:"w-full px-3 py-1.5 text-left text-xs hover:bg-muted transition-colors flex items-center gap-2",onClick:()=>B(null),children:[(0,a.jsx)(_.Z,{className:"w-3 h-3"})," Edit Event"]})}),(0,a.jsxs)("button",{className:"w-full px-3 py-1.5 text-left text-xs hover:bg-muted transition-colors flex items-center gap-2 text-destructive",onClick:()=>{B(null),X(e.id),G(!0)},children:[(0,a.jsx)(S.Z,{className:"w-3 h-3"})," Delete"]})]})]})]})})]},e.id)):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:6,className:"px-4 py-3 text-center text-xs text-muted-foreground",children:"Loading..."})})})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 md:gap-4",children:[(0,a.jsx)(n.default,{href:"/dashboard/creator/create",children:(0,a.jsxs)("button",{className:"p-3 md:p-6 bg-primary text-primary-foreground rounded-lg md:rounded-2xl text-left hover:brightness-110 transition-all w-full",children:[(0,a.jsx)(y.Z,{className:"w-5 h-5 md:w-8 md:h-8 mb-2 md:mb-4"}),(0,a.jsx)("h3",{className:"font-bold text-sm md:text-lg mb-0.5 md:mb-1",children:"Create New Event"}),(0,a.jsx)("p",{className:"text-xs md:text-sm opacity-80",children:"Start organizing your next event"})]})}),(0,a.jsxs)("button",{className:"p-3 md:p-6 bg-card border border-border rounded-lg md:rounded-2xl text-left hover:shadow-card-hover transition-all",children:[(0,a.jsx)(f.Z,{className:"w-5 h-5 md:w-8 md:h-8 mb-2 md:mb-4 text-primary"}),(0,a.jsx)("h3",{className:"font-bold text-sm md:text-lg mb-0.5 md:mb-1",children:"View Attendees"}),(0,a.jsx)("p",{className:"text-xs md:text-sm text-muted-foreground",children:"Manage your guest lists"})]}),(0,a.jsxs)("button",{className:"p-3 md:p-6 bg-card border border-border rounded-lg md:rounded-2xl text-left hover:shadow-card-hover transition-all",children:[(0,a.jsx)(g.Z,{className:"w-5 h-5 md:w-8 md:h-8 mb-2 md:mb-4 text-primary"}),(0,a.jsx)("h3",{className:"font-bold text-sm md:text-lg mb-0.5 md:mb-1",children:"Analytics"}),(0,a.jsx)("p",{className:"text-xs md:text-sm text-muted-foreground",children:"View detailed reports"})]})]})]}),(0,a.jsx)("div",{style:{display:"events"===V?"block":"none"},children:(0,a.jsx)(D,{onDelete:e=>el.mutate(e)})}),"past-events"===V&&(0,a.jsxs)("div",{className:"p-3 md:p-6",children:[(0,a.jsxs)("div",{className:"mb-4 md:mb-6",children:[(0,a.jsx)("h2",{className:"text-lg md:text-2xl font-bold mb-1 md:mb-2",children:"Past Events"}),(0,a.jsx)("p",{className:"text-xs md:text-sm text-muted-foreground",children:"Events that have already occurred"})]}),es?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(Z.Z,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-primary"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Loading past events..."})]}):et&&0!==et.length?(0,a.jsx)("div",{className:"grid gap-3 md:gap-4",children:et.map(e=>{let t=e.ticket_types||[],s=t.reduce((e,t)=>e+(t.sold_count||0),0),r=t.reduce((e,t)=>e+(t.quantity||0),0),l=t.reduce((e,t)=>e+(t.price||0)*(t.sold_count||0),0);return(0,a.jsx)("div",{className:"bg-card rounded-xl border border-border p-4 md:p-6 hover:shadow-lg transition-shadow",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-start gap-3 md:gap-4",children:[e.image_url&&(0,a.jsx)("div",{className:"w-full md:w-32 h-32 rounded-lg overflow-hidden bg-muted shrink-0",children:(0,a.jsx)("img",{src:e.image_url,alt:e.title,className:"w-full h-full object-cover"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-2",children:[(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsx)("h3",{className:"text-base md:text-xl font-bold mb-1 truncate",children:e.title}),(0,a.jsx)(o.C,{className:"text-xs mb-1",children:e.category})]}),(0,a.jsx)(o.C,{variant:"secondary",className:"shrink-0 text-xs",children:"Past"})]}),(0,a.jsx)("p",{className:"text-xs md:text-sm text-muted-foreground mb-2",children:e.location}),(0,a.jsx)("p",{className:"text-xs md:text-sm text-muted-foreground mb-3",children:(0,I.WU)(new Date(e.date),"EEE, MMM d, yyyy • h:mm a")}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 md:gap-4 pt-3 border-t border-border",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Tickets Sold"}),(0,a.jsxs)("p",{className:"text-sm md:text-base font-semibold",children:[s," / ",r]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Revenue"}),(0,a.jsxs)("p",{className:"text-sm md:text-base font-semibold text-primary",children:["₦",l.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"col-span-2 md:col-span-1",children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Attendees"}),(0,a.jsx)("p",{className:"text-sm md:text-base font-semibold",children:s})]})]}),(0,a.jsxs)("div",{className:"flex gap-2 mt-3",children:[(0,a.jsx)(n.default,{href:"/event/".concat(e.id),className:"flex-1",children:(0,a.jsxs)(i.z,{variant:"outline",size:"sm",className:"w-full text-xs",children:[(0,a.jsx)(k.Z,{className:"w-3 h-3 md:w-4 md:h-4 mr-1"}),"View Event"]})}),(0,a.jsx)(n.default,{href:"/dashboard/creator/analytics/".concat(e.id),className:"flex-1",children:(0,a.jsxs)(i.z,{variant:"hero",size:"sm",className:"w-full text-xs",children:[(0,a.jsx)(g.Z,{className:"w-3 h-3 md:w-4 md:h-4 mr-1"}),"Analytics"]})})]})]})]})},e.id)})}):(0,a.jsxs)("div",{className:"text-center py-12 bg-card rounded-lg border border-border",children:[(0,a.jsx)(u.Z,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"No past events"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"You don't have any past events yet."})]})]}),(0,a.jsx)("div",{style:{display:"tickets"===V?"block":"none"},children:(0,a.jsx)(P,{})}),"my-tickets"===V&&(0,a.jsxs)("div",{className:"p-3 md:p-6",children:[(0,a.jsxs)("div",{className:"mb-4 md:mb-6",children:[(0,a.jsx)("h2",{className:"text-lg md:text-2xl font-bold mb-1 md:mb-2",children:"My Purchased Tickets"}),(0,a.jsx)("p",{className:"text-xs md:text-sm text-muted-foreground",children:"Tickets you've purchased for events"})]}),er?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(Z.Z,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-primary"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Loading your tickets..."})]}):ea&&0!==ea.length?(0,a.jsx)("div",{className:"grid gap-3",children:ea.map(e=>{var t,s;let r=e.event,l=e.ticket_type,d=(null===(t=e.qr_code_data)||void 0===t?void 0:t.qrCodeImageUrl)||(null===(s=e.qr_code_data)||void 0===s?void 0:s.qrCodeImage);return(0,a.jsx)("div",{className:"bg-card rounded-xl border border-border p-4 md:p-6 hover:shadow-lg transition-shadow",children:(0,a.jsxs)("div",{className:"flex gap-3 md:gap-4",children:[(null==r?void 0:r.image_url)&&(0,a.jsx)("div",{className:"w-20 h-20 md:w-32 md:h-32 rounded-lg overflow-hidden bg-muted shrink-0",children:(0,a.jsx)("img",{src:r.image_url,alt:r.title,className:"w-full h-full object-cover"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-2",children:[(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsx)("h3",{className:"text-base md:text-xl font-bold mb-1 truncate",children:(null==r?void 0:r.title)||"Event"}),(0,a.jsx)(o.C,{className:"text-xs",children:(null==r?void 0:r.category)||"Event"})]}),(0,a.jsx)(o.C,{variant:"valid"===e.status?"default":"used"===e.status?"secondary":"destructive",className:"shrink-0 text-xs",children:"valid"===e.status?"Valid":"used"===e.status?"Used":"Cancelled"})]}),(0,a.jsxs)("div",{className:"space-y-1.5 mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs md:text-sm text-muted-foreground",children:[(0,a.jsx)(u.Z,{className:"w-3 h-3 md:w-4 md:h-4 shrink-0"}),(0,a.jsx)("span",{className:"truncate",children:(null==r?void 0:r.date)?(0,I.WU)(new Date(r.date),"MMM d, yyyy • h:mm a"):"Date TBD"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs md:text-sm text-muted-foreground",children:[(0,a.jsx)(T.Z,{className:"w-3 h-3 md:w-4 md:h-4 shrink-0"}),(0,a.jsx)("span",{className:"truncate",children:(null==r?void 0:r.location)||"Location TBD"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 pt-3 border-t border-border",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Ticket Type"}),(0,a.jsx)("p",{className:"text-sm md:text-base font-semibold",children:(null==l?void 0:l.name)||"General Admission"}),(null==l?void 0:l.price)!==void 0&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-0.5",children:l.is_free?"Free":"₦".concat(l.price)})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(n.default,{href:"/invoice/".concat(e.order_id),className:"flex-1 sm:flex-initial",children:(0,a.jsx)(i.z,{variant:"outline",size:"sm",className:"w-full sm:w-auto text-xs",children:"See Ticket"})}),d&&(0,a.jsx)(n.default,{href:"/invoice/".concat(e.order_id),className:"flex-1 sm:flex-initial",children:(0,a.jsxs)(i.z,{variant:"hero",size:"sm",className:"w-full sm:w-auto gap-2 text-xs",children:[(0,a.jsx)(z.Z,{className:"w-3 h-3 md:w-4 md:h-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Download"})]})})]})]})]})]})},e.id)})}):(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(v.Z,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"No tickets yet"}),(0,a.jsx)("p",{className:"text-muted-foreground mb-6",children:"You haven't purchased any tickets yet. Start exploring events!"}),(0,a.jsx)(n.default,{href:"/",children:(0,a.jsx)(i.z,{variant:"hero",children:"Browse Events"})})]})]}),(0,a.jsx)("div",{style:{display:"settings"===V?"block":"none"},children:(0,a.jsx)(ec,{})})]}),(0,a.jsx)(c.aR,{open:W,onOpenChange:G,children:(0,a.jsxs)(c._T,{children:[(0,a.jsxs)(c.fY,{children:[(0,a.jsx)(c.f$,{children:"Delete Event"}),(0,a.jsx)(c.yT,{children:"Are you sure you want to delete this event? This action cannot be undone. The event will be moved to deleted events."})]}),(0,a.jsxs)(c.xo,{children:[(0,a.jsx)(c.le,{onClick:()=>X(null),children:"Cancel"}),(0,a.jsx)(c.OL,{onClick:()=>{H&&(el.mutate(H),G(!1),X(null))},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})})]}):(0,a.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"mb-2 text-lg font-semibold",children:"Authentication Required"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Please sign in to access your dashboard."}),(0,a.jsx)(n.default,{href:"/auth/signin?redirect=/dashboard/creator",children:(0,a.jsx)(i.z,{variant:"hero",children:"Sign In"})})]})})}function eu(){return(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)("div",{className:"min-h-screen bg-background",children:(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary mb-4"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Loading..."})]})})}),children:(0,a.jsx)(em,{})})}},7569:function(e,t,s){"use strict";var a=s(7437),r=s(5929),n=s(7226),l=s(2381),d=s(8873);t.Z=()=>{let{theme:e,toggleTheme:t}=(0,d.F)();return(0,a.jsx)(l.z,{variant:"ghost",size:"icon",onClick:t,className:"rounded-full",children:"dark"===e?(0,a.jsx)(r.Z,{className:"w-5 h-5"}):(0,a.jsx)(n.Z,{className:"w-5 h-5"})})}},767:function(e,t,s){"use strict";s.d(t,{OL:function(){return p},_T:function(){return m},aR:function(){return i},f$:function(){return h},fY:function(){return u},le:function(){return g},xo:function(){return x},yT:function(){return f}});var a=s(7437),r=s(2265),n=s(277),l=s(3448),d=s(2381);let i=n.fC;n.xz;let o=n.h_,c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.aV,{className:(0,l.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r,ref:t})});c.displayName=n.aV.displayName;let m=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsxs)(o,{children:[(0,a.jsx)(c,{}),(0,a.jsx)(n.VY,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...r})]})});m.displayName=n.VY.displayName;let u=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...s})};u.displayName="AlertDialogHeader";let x=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};x.displayName="AlertDialogFooter";let h=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.Dx,{ref:t,className:(0,l.cn)("text-lg font-semibold",s),...r})});h.displayName=n.Dx.displayName;let f=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.dk,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",s),...r})});f.displayName=n.dk.displayName;let p=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.aU,{ref:t,className:(0,l.cn)((0,d.d)(),s),...r})});p.displayName=n.aU.displayName;let g=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.$j,{ref:t,className:(0,l.cn)((0,d.d)({variant:"outline"}),"mt-2 sm:mt-0",s),...r})});g.displayName=n.$j.displayName},2381:function(e,t,s){"use strict";s.d(t,{d:function(){return i},z:function(){return o}});var a=s(7437),r=s(2265),n=s(7495),l=s(535),d=s(3448);let i=(0,l.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-full text-sm font-semibold transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-button hover:brightness-110 active:scale-95",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border-2 border-primary bg-transparent text-primary hover:bg-primary hover:text-primary-foreground",secondary:"bg-secondary text-secondary-foreground hover:brightness-110 active:scale-95",ghost:"hover:bg-muted hover:text-foreground",link:"text-primary underline-offset-4 hover:underline",hero:"bg-primary text-primary-foreground shadow-button hover:brightness-110 active:scale-95 font-bold",accent:"bg-accent text-accent-foreground border border-border hover:bg-muted active:scale-95"},size:{default:"h-11 px-6 py-2",sm:"h-9 px-4 text-xs",lg:"h-14 px-8 text-base",xl:"h-16 px-10 text-lg",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef((e,t)=>{let{className:s,variant:r,size:l,asChild:o=!1,...c}=e,m=o?n.g7:"button";return(0,a.jsx)(m,{className:(0,d.cn)(i({variant:r,size:l,className:s})),ref:t,...c})});o.displayName="Button"},8151:function(e,t,s){"use strict";s.d(t,{mY:function(){return u},rb:function(){return f},fu:function(){return p},sZ:function(){return x},di:function(){return g},e8:function(){return h}});var a=s(7437),r=s(2265),n=s(6343),l=s(3247),d=s(3448),i=s(9027),o=s(2489);i.fC,i.xz;let c=i.h_;i.x8;let m=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.aV,{ref:t,className:(0,d.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r})});m.displayName=i.aV.displayName,r.forwardRef((e,t)=>{let{className:s,children:r,...n}=e;return(0,a.jsxs)(c,{children:[(0,a.jsx)(m,{}),(0,a.jsxs)(i.VY,{ref:t,className:(0,d.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...n,children:[r,(0,a.jsxs)(i.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}).displayName=i.VY.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.Dx,{ref:t,className:(0,d.cn)("text-lg font-semibold leading-none tracking-tight",s),...r})}).displayName=i.Dx.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.dk,{ref:t,className:(0,d.cn)("text-sm text-muted-foreground",s),...r})}).displayName=i.dk.displayName;let u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.mY,{ref:t,className:(0,d.cn)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",s),...r})});u.displayName=n.mY.displayName;let x=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsxs)("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[(0,a.jsx)(l.Z,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,a.jsx)(n.mY.Input,{ref:t,className:(0,d.cn)("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",s),...r})]})});x.displayName=n.mY.Input.displayName;let h=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.mY.List,{ref:t,className:(0,d.cn)("max-h-[300px] overflow-y-auto overflow-x-hidden",s),...r})});h.displayName=n.mY.List.displayName;let f=r.forwardRef((e,t)=>(0,a.jsx)(n.mY.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));f.displayName=n.mY.Empty.displayName;let p=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.mY.Group,{ref:t,className:(0,d.cn)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",s),...r})});p.displayName=n.mY.Group.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.mY.Separator,{ref:t,className:(0,d.cn)("-mx-1 h-px bg-border",s),...r})}).displayName=n.mY.Separator.displayName;let g=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.mY.Item,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",s),...r})});g.displayName=n.mY.Item.displayName},2749:function(e,t,s){"use strict";s.d(t,{J2:function(){return d},xo:function(){return i},yk:function(){return o}});var a=s(7437),r=s(2265),n=s(7312),l=s(3448);let d=n.fC,i=n.xz,o=r.forwardRef((e,t)=>{let{className:s,align:r="center",sideOffset:d=4,...i}=e;return(0,a.jsx)(n.h_,{children:(0,a.jsx)(n.VY,{ref:t,align:r,sideOffset:d,className:(0,l.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...i})})});o.displayName=n.VY.displayName},6700:function(e,t,s){"use strict";s.d(t,{E:function(){return i},m:function(){return o}});var a=s(7437),r=s(2265),n=s(2241),l=s(519),d=s(3448);let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.fC,{className:(0,d.cn)("grid gap-2",s),...r,ref:t})});i.displayName=n.fC.displayName;let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.ck,{ref:t,className:(0,d.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...r,children:(0,a.jsx)(n.z$,{className:"flex items-center justify-center",children:(0,a.jsx)(l.Z,{className:"h-2.5 w-2.5 fill-current text-current"})})})});o.displayName=n.ck.displayName},4362:function(e,t,s){"use strict";s.d(t,{H:function(){return i},a:function(){return d}});var a=s(7437),r=s(2265),n=s(5526);let l=(0,r.createContext)(void 0),d=()=>{let e=(0,r.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},i=e=>{let{children:t}=e,[s,d]=(0,r.useState)(null),[i,o]=(0,r.useState)(null),[c,m]=(0,r.useState)(null),[u,x]=(0,r.useState)(!0),h=(0,r.useRef)(null),f=async e=>{if(h.current!==e){h.current=e;try{let{data:t,error:s}=await n.supabase.from("users").select("id, email, full_name, role, gender, school, avatar_name, avatar_url").eq("id",e).single();if(s)throw s;t?o({id:t.id,email:t.email,full_name:t.full_name,role:t.role||"user",gender:t.gender||null,school:t.school||null,avatar_name:t.avatar_name||null,avatar_url:t.avatar_url||null}):o(null)}catch(e){console.error("Error fetching profile:",e),o(null)}finally{h.current=null}}},p=async()=>{s&&(h.current=null,await f(s.id))};(0,r.useEffect)(()=>{let e=!0,t=null;n.supabase.auth.getSession().then(s=>{var a,r,n;let{data:{session:l},error:i}=s;if(e){if(i){x(!1);return}m(l),d(null!==(r=null==l?void 0:l.user)&&void 0!==r?r:null),t=null!==(n=null==l?void 0:null===(a=l.user)||void 0===a?void 0:a.id)&&void 0!==n?n:null,(null==l?void 0:l.user)&&f(l.user.id),e&&x(!1)}});let{data:{subscription:s}}=n.supabase.auth.onAuthStateChange((s,a)=>{var r,n,l;if(!e)return;let i=null!==(n=null==a?void 0:null===(r=a.user)||void 0===r?void 0:r.id)&&void 0!==n?n:null;i!==t&&(m(a),d(null!==(l=null==a?void 0:a.user)&&void 0!==l?l:null),t=i,(null==a?void 0:a.user)?f(a.user.id):o(null))});return()=>{e=!1,s.unsubscribe()}},[]);let g=async()=>{await n.supabase.auth.signOut(),d(null),o(null),m(null),h.current=null};return(0,a.jsx)(l.Provider,{value:{user:s,profile:i,session:c,loading:u,signOut:g,refreshProfile:p},children:t})}},3554:function(e,t,s){"use strict";s.d(t,{u:function(){return a}});let a=["Covenant University, Ota","Babcock University, Ilishan-Remo","Bells University of Technology, Otta","American University of Nigeria, Yola","Bingham University, New Karu","Bowen University, Iwo","Igbinedion University, Okada","Landmark University, Omu-Aran","Lead City University, Ibadan","Madonna University, Okija","Redeemer's University, Ede","Pan-Atlantic University, Lagos","Afe Babalola University, Ado-Ekiti","Al-Hikmah University, Ilorin","Crescent University, Abeokuta","Elizade University, Ilara-Mokin","Joseph Ayo Babalola University, Ikeji-Arakeji","Micheal & Cecilia Ibru University","Oduduwa University, Ipetumodu","Veritas University, Abuja","ABTI-American University of Nigeria, Yola","Achievers University, Owo","Adeleke University, Ede","Augustine University, Ilara-Epe","Baze University, Abuja","Benson Idahosa University, Benin City","Caleb University, Lagos","Caritas University, Enugu","Chrisland University, Abeokuta","Christopher University, Mowe","Crawford University, Igbesa","Edwin Clark University, Kiagbodo","Evangel University, Akaeze","Fountain University, Oshogbo","Godfrey Okoye University, Ugwuomu-Nike","Gregory University, Uturu","Hallmark University, Ijebu-Itele","Hezekiah University, Umudi","Kings University, Ode-Omu","Kola Daisi University, Ibadan","McPherson University, Seriki Sotayo","Micheal & Cecilia Ibru University, Owhrode","Mountain Top University, Makogi/Ogun","Nigerian British University, Asa","Nigerian Turkish Nile University, Abuja","Novena University, Ogume","Obong University, Obong Ntak","Paul University, Awka","Precious Cornerstone University, Ibadan","Renaissance University, Enugu","Rhema University, Obeama-Asa","Ritman University, Ikot Ekpene","Salerno University, Lagos","Samuel Adegboyega University, Ogwa","Southwestern University, Okun Owa","Summit University, Offa","Tansian University, Umunya","University of Mkar, Mkar","Wellspring University, Irhirhi, Benin City","Wesley University, Ondo","Western Delta University, Oghara"]},8873:function(e,t,s){"use strict";s.d(t,{F:function(){return d},f:function(){return l}});var a=s(7437),r=s(2265);let n=(0,r.createContext)(void 0),l=e=>{let{children:t}=e,[s,l]=(0,r.useState)("light"),[d,i]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{i(!0);let e=localStorage.getItem("theme");e&&("light"===e||"dark"===e)?l(e):l(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")},[]),(0,r.useEffect)(()=>{if(!d)return;let e=window.document.documentElement;e.classList.remove("light","dark"),e.classList.add(s),localStorage.setItem("theme",s)},[s,d]),(0,a.jsx)(n.Provider,{value:{theme:s,toggleTheme:()=>{l(e=>"light"===e?"dark":"light")}},children:t})},d=()=>{let e=(0,r.useContext)(n);if(!e)throw Error("useTheme must be used within a ThemeProvider");return e}},5526:function(e,t,s){"use strict";s.d(t,{supabase:function(){return o}});var a,r,n=s(8280),l=s(257);let d=(void 0!==l?null===(a=l.env)||void 0===a?void 0:"https://ynkvvjkokwwnqoujeznu.supabase.co":void 0)||"",i=(void 0!==l?null===(r=l.env)||void 0===r?void 0:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inlua3Z2amtva3d3bnFvdWplem51Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg3NjE2ODMsImV4cCI6MjA4NDMzNzY4M30.tVFWjO_kqz2iY3GpunHC78czG6Tb2Ikhl1HbVoINbCg":void 0)||"";if(!d||!i){let e="Missing Supabase environment variables. Please set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY in your .env.local file. (Note: In Next.js, client-side env vars must be prefixed with NEXT_PUBLIC_)";throw console.error(e),Error(e)}let o=(0,n.eI)(d,i,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}})},3448:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var a=s(1994),r=s(3335);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m6)((0,a.W)(t))}}},function(e){e.O(0,[227,182,972,506,642,850,823,730,713,438,818,803,208,814,971,117,560],function(){return e(e.s=2058)}),_N_E=e.O()}]);