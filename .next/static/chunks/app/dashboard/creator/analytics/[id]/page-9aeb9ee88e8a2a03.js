(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7710],{68932:function(e,t,s){Promise.resolve().then(s.bind(s,8671))},8671:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return p}});var r=s(57437),a=s(99376),d=s(11713),n=s(12381),l=s(69174),i=s(96629),c=s(14362),o=s(32660),m=s(95080),u=s(70525),x=s(95252),h=s(95805),f=s(96215),j=s(27648),v=s(64014),b=s(51817);function p(){let e=(0,a.useParams)();(0,a.useRouter)();let t=e.id,{profile:s,user:p}=(0,c.a)(),{data:g,isLoading:N}=(0,d.a)({queryKey:["event",t],queryFn:()=>(0,i.Y)(t),enabled:!!t}),{data:y,isLoading:w}=(0,d.a)({queryKey:["event-analytics",t],queryFn:()=>(0,i.Q6)(t),enabled:!!t});if(!s||"creator"!==s.role)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"mb-2",children:"Access Denied"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Only creators can view analytics."})]})});if(N||w)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)(b.Z,{className:"w-8 h-8 animate-spin"})});if(!g)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"mb-2",children:"Event not found"}),(0,r.jsx)(j.default,{href:"/dashboard/creator",children:(0,r.jsx)(n.z,{variant:"outline",children:"Back to Dashboard"})})]})});let k=(null==y?void 0:y.orders)||[],Z=(null==y?void 0:y.tickets)||[],M=g.ticket_types||[],_=Z.length,L=M.reduce((e,t)=>e+(t.quantity||0),0),C=k.reduce((e,t)=>e+Math.max(0,(parseFloat(t.total_amount)||0)-200),0),S=k.length,q=Z.filter(e=>"used"===e.status).length,z=Z.filter(e=>"valid"===e.status).length,E=M.map(e=>{let t=Z.filter(t=>t.ticket_type_id===e.id),s=t.length*(e.price||0);return{name:e.name,sold:t.length,revenue:s,price:e.price||0}});return(0,r.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,r.jsx)("div",{className:"border-b border-border bg-card sticky top-0 z-10",children:(0,r.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(j.default,{href:"/dashboard/creator",children:(0,r.jsx)(n.z,{variant:"ghost",size:"icon",children:(0,r.jsx)(o.Z,{className:"w-5 h-5"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Event Analytics"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:g.title})]})]}),(0,r.jsx)("div",{className:"flex gap-2",children:(0,r.jsx)(j.default,{href:"/dashboard/creator/edit/".concat(t),children:(0,r.jsx)(n.z,{variant:"outline",children:"Edit Event"})})})]})})}),(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[(0,r.jsx)("div",{className:"bg-card rounded-2xl border border-border p-6 mb-6",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-6",children:[g.image_url&&(0,r.jsx)("img",{src:g.image_url,alt:g.title,className:"w-full md:w-64 h-48 object-cover rounded-lg"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-2",children:g.title}),(0,r.jsx)(l.C,{className:"active"===g.status?"bg-primary":"bg-muted",children:g.status})]})}),(0,r.jsx)("p",{className:"text-muted-foreground mb-4",children:g.description}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-muted-foreground",children:"Date & Time"}),(0,r.jsx)("p",{className:"font-medium",children:(0,v.WU)(new Date(g.date),"MMM d, yyyy • h:mm a")})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-muted-foreground",children:"Location"}),(0,r.jsx)("p",{className:"font-medium",children:g.location})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-muted-foreground",children:"Category"}),(0,r.jsx)("p",{className:"font-medium",children:g.category})]})]})]})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"bg-card rounded-2xl border border-border p-6",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-xl bg-primary/10 flex items-center justify-center",children:(0,r.jsx)(m.Z,{className:"w-6 h-6 text-primary"})}),(0,r.jsx)(u.Z,{className:"w-5 h-5 text-primary"})]}),(0,r.jsx)("div",{className:"text-2xl font-bold mb-1",children:_}),(0,r.jsx)("div",{className:"text-sm text-muted-foreground",children:"Tickets Sold"}),(0,r.jsx)("div",{className:"text-xs text-muted-foreground mt-2",children:L>0?"".concat(Math.round(_/L*100),"% of ").concat(L):"No tickets available"})]}),(0,r.jsxs)("div",{className:"bg-card rounded-2xl border border-border p-6",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-xl bg-green-500/10 flex items-center justify-center",children:(0,r.jsx)(x.Z,{className:"w-6 h-6 text-green-600"})}),(0,r.jsx)(u.Z,{className:"w-5 h-5 text-green-600"})]}),(0,r.jsxs)("div",{className:"text-2xl font-bold mb-1",children:["₦",C.toLocaleString()]}),(0,r.jsx)("div",{className:"text-sm text-muted-foreground",children:"Total Revenue"}),(0,r.jsxs)("div",{className:"text-xs text-muted-foreground mt-2",children:[S," ",1===S?"order":"orders"]})]}),(0,r.jsxs)("div",{className:"bg-card rounded-2xl border border-border p-6",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-xl bg-blue-500/10 flex items-center justify-center",children:(0,r.jsx)(h.Z,{className:"w-6 h-6 text-blue-600"})}),(0,r.jsx)(u.Z,{className:"w-5 h-5 text-blue-600"})]}),(0,r.jsx)("div",{className:"text-2xl font-bold mb-1",children:q}),(0,r.jsx)("div",{className:"text-sm text-muted-foreground",children:"Checked In"}),(0,r.jsxs)("div",{className:"text-xs text-muted-foreground mt-2",children:[z," pending"]})]}),(0,r.jsxs)("div",{className:"bg-card rounded-2xl border border-border p-6",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-xl bg-purple-500/10 flex items-center justify-center",children:(0,r.jsx)(f.Z,{className:"w-6 h-6 text-purple-600"})}),(0,r.jsx)(u.Z,{className:"w-5 h-5 text-purple-600"})]}),(0,r.jsx)("div",{className:"text-2xl font-bold mb-1",children:S}),(0,r.jsx)("div",{className:"text-sm text-muted-foreground",children:"Total Orders"}),(0,r.jsx)("div",{className:"text-xs text-muted-foreground mt-2",children:"All paid"})]})]}),(0,r.jsxs)("div",{className:"bg-card rounded-2xl border border-border p-6 mb-6",children:[(0,r.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Revenue by Ticket Type"}),(0,r.jsx)("div",{className:"space-y-4",children:E.map((e,t)=>(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"font-medium",children:e.name}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.sold," sold @ ₦",e.price.toLocaleString()," each"]})]}),(0,r.jsx)("div",{className:"text-right",children:(0,r.jsxs)("p",{className:"text-lg font-bold text-primary",children:["₦",e.revenue.toLocaleString()]})})]}),L>0&&(0,r.jsx)("div",{className:"w-full h-2 bg-muted rounded-full overflow-hidden",children:(0,r.jsx)("div",{className:"h-full bg-primary rounded-full",style:{width:"".concat(e.sold/L*100,"%")}})})]},t))})]}),(0,r.jsxs)("div",{className:"bg-card rounded-2xl border border-border p-6 mb-6",children:[(0,r.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Ticket Types Breakdown"}),(0,r.jsx)("div",{className:"space-y-4",children:M.map((e,t)=>{let s=Z.filter(t=>t.ticket_type_id===e.id).length,a=e.quantity||0,d=a>0?s/a*100:0;return(0,r.jsxs)("div",{className:"p-4 border border-border rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"font-medium",children:e.name}),e.description&&(0,r.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:e.description})]}),(0,r.jsx)("div",{className:"text-right",children:(0,r.jsx)("p",{className:"font-bold",children:0===e.price?"Free":"₦".concat(e.price.toLocaleString())})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm text-muted-foreground mb-2",children:[(0,r.jsxs)("span",{children:[s," / ",a," sold"]}),(0,r.jsxs)("span",{children:[Math.round(d),"%"]})]}),(0,r.jsx)("div",{className:"w-full h-2 bg-muted rounded-full overflow-hidden",children:(0,r.jsx)("div",{className:"h-full bg-primary rounded-full",style:{width:"".concat(d,"%")}})})]},e.id||t)})})]}),(0,r.jsxs)("div",{className:"bg-card rounded-2xl border border-border p-6",children:[(0,r.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Recent Orders"}),0===k.length?(0,r.jsx)("p",{className:"text-muted-foreground text-center py-8",children:"No orders yet"}):(0,r.jsx)("div",{className:"space-y-4",children:k.slice(0,10).map(e=>{var t,s;return(0,r.jsx)("div",{className:"p-4 border border-border rounded-lg",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:e.full_name}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:e.email}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:(0,v.WU)(new Date(e.created_at),"MMM d, yyyy • h:mm a")})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"font-bold text-primary",children:["₦",Math.max(0,parseFloat(e.total_amount||0)-200).toLocaleString()]}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground line-through",children:["₦",parseFloat(e.total_amount||0).toLocaleString()," (includes service charge)"]})]}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:[(null===(t=e.tickets)||void 0===t?void 0:t.length)||0," ",(null===(s=e.tickets)||void 0===s?void 0:s.length)===1?"ticket":"tickets"]})]})]})},e.id)})})]})]})]})}},79205:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var r=s(2265);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),d=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,r.forwardRef)((e,t)=>{let{color:s="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:c="",children:o,iconNode:m,...u}=e;return(0,r.createElement)("svg",{ref:t,...n,width:a,height:a,stroke:s,strokeWidth:i?24*Number(l)/Number(a):l,className:d("lucide",c),...u},[...m.map(e=>{let[t,s]=e;return(0,r.createElement)(t,s)}),...Array.isArray(o)?o:[o]])}),i=(e,t)=>{let s=(0,r.forwardRef)((s,n)=>{let{className:i,...c}=s;return(0,r.createElement)(l,{ref:n,iconNode:t,className:d("lucide-".concat(a(e)),i),...c})});return s.displayName="".concat(e),s}},32660:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(79205).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},96215:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(79205).Z)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},95252:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(79205).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},51817:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(79205).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},95080:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(79205).Z)("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]])},70525:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(79205).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},95805:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(79205).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},27648:function(e,t,s){"use strict";s.d(t,{default:function(){return a.a}});var r=s(72972),a=s.n(r)},99376:function(e,t,s){"use strict";var r=s(35475);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},69174:function(e,t,s){"use strict";s.d(t,{C:function(){return l}});var r=s(57437);s(2265);var a=s(90535),d=s(93448);let n=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:s,...a}=e;return(0,r.jsx)("div",{className:(0,d.cn)(n({variant:s}),t),...a})}}},function(e){e.O(0,[4182,2972,5730,1713,9913,2971,2117,1744],function(){return e(e.s=68932)}),_N_E=e.O()}]);