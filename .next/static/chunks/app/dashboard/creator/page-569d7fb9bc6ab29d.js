(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5669],{22058:function(e,t,s){Promise.resolve().then(s.bind(s,37486))},37486:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return ev}});var a=s(57437),r=s(2265),n=s(27648),l=s(33145),i=s(99376),d=s(11713),o=s(12381),c=s(69174),m=s(30767),u=s(14438),x=s(31047),h=s(95080),f=s(95252),p=s(95805),b=s(32489),v=s(96215),g=s(79205);let j=(0,g.Z)("TicketCheck",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var y=s(91804),N=s(98728),w=s(47692),k=s(58293),_=s(99397),C=s(70525),S=s(42208),E=s(15868),A=s(71533),T=s(18930),Z=s(51817),z=s(83774),P=s(92735),U=s(27569),F=s(14362),L=s(96629),R=s(64014),M=s(61980),q=s(29827),I=s(21770),D=e=>{let{onDelete:t}=e,{profile:s}=(0,F.a)(),[l,i]=(0,r.useState)(!1),[u,x]=(0,r.useState)(null),{data:h,isLoading:f,error:p}=(0,d.a)({queryKey:["creator-events",null==s?void 0:s.id],queryFn:()=>(0,L.TX)(s.id),enabled:!!(null==s?void 0:s.id)});return f?(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)("div",{className:"text-center text-muted-foreground",children:"Loading events..."})}):p?(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"text-center text-destructive",children:["Error loading events: ",p.message]})}):(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"My Events"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-1",children:"Manage all your events"})]}),(0,a.jsxs)(o.z,{className:"gap-2",children:[(0,a.jsx)(_.Z,{className:"w-4 h-4"}),"Create Event"]})]}),h&&0!==h.length?(0,a.jsx)("div",{className:"grid gap-4",children:h.map(e=>{let s=e.ticket_types||[],r=s.reduce((e,t)=>e+(t.sold_count||0),0),l=s.reduce((e,t)=>e+(t.quantity||0),0),d=s.reduce((e,t)=>e+(t.price||0)*(t.sold_count||0),0);return(0,a.jsxs)("div",{className:"bg-card rounded-2xl border border-border p-6 hover:shadow-lg transition-shadow",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold",children:e.title}),(0,a.jsx)(c.C,{className:"active"===e.status?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground",children:e.status})]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:e.location}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:(0,R.WU)(new Date(e.date),"EEE, MMM d, yyyy • h:mm a")})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(n.default,{href:"/event/".concat(e.id),children:(0,a.jsxs)(o.z,{variant:"outline",size:"sm",className:"gap-1",children:[(0,a.jsx)(S.Z,{className:"w-4 h-4"})," View"]})}),(0,a.jsx)(n.default,{href:"/dashboard/creator/edit/".concat(e.id),children:(0,a.jsxs)(o.z,{variant:"outline",size:"sm",className:"gap-1",children:[(0,a.jsx)(E.Z,{className:"w-4 h-4"})," Edit"]})}),t&&(0,a.jsxs)(o.z,{variant:"outline",size:"sm",className:"gap-1 text-destructive hover:text-destructive",onClick:()=>{x(e.id),i(!0)},children:[(0,a.jsx)(T.Z,{className:"w-4 h-4"})," Delete"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 pt-4 border-t border-border",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Tickets Sold"}),(0,a.jsxs)("p",{className:"text-lg font-semibold",children:[r," / ",l]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Revenue"}),(0,a.jsxs)("p",{className:"text-lg font-semibold text-primary",children:["₦",d.toLocaleString()]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Attendees"}),(0,a.jsx)("p",{className:"text-lg font-semibold",children:r})]})]})]},e.id)})}):(0,a.jsxs)("div",{className:"bg-card rounded-2xl border border-border p-12 text-center",children:[(0,a.jsx)("p",{className:"text-muted-foreground mb-4",children:"No events yet"}),(0,a.jsxs)(o.z,{className:"gap-2",children:[(0,a.jsx)(_.Z,{className:"w-4 h-4"}),"Create Your First Event"]})]}),t&&(0,a.jsx)(m.aR,{open:l,onOpenChange:i,children:(0,a.jsxs)(m._T,{children:[(0,a.jsxs)(m.fY,{children:[(0,a.jsx)(m.f$,{children:"Delete Event"}),(0,a.jsx)(m.yT,{children:"Are you sure you want to delete this event? This action cannot be undone. The event will be moved to deleted events."})]}),(0,a.jsxs)(m.xo,{children:[(0,a.jsx)(m.le,{onClick:()=>x(null),children:"Cancel"}),(0,a.jsx)(m.OL,{onClick:()=>{u&&(t(u),i(!1),x(null))},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})})]})},O=s(73247),V=s(40279),B=s(5526),Y=()=>{let{profile:e}=(0,F.a)(),[t,s]=(0,r.useState)(""),[n,l]=(0,r.useState)("all"),{data:i,isLoading:m}=(0,d.a)({queryKey:["creator-events",null==e?void 0:e.id],queryFn:()=>(0,L.TX)(e.id),enabled:!!(null==e?void 0:e.id)}),{data:u,isLoading:x}=(0,d.a)({queryKey:["creator-tickets",null==e?void 0:e.id,n],queryFn:async()=>{let e=(null==i?void 0:i.map(e=>e.id))||[];if(0===e.length)return[];let t=B.supabase.from("tickets").select("*, event:events(*), ticket_type:ticket_types(*), order:orders(*)").in("event_id",e);"all"!==n&&(t=t.eq("event_id",n));let{data:s,error:a}=await t.order("created_at",{ascending:!1});if(a)throw a;return s||[]},enabled:!!(null==e?void 0:e.id)&&!!i}),h=(0,r.useMemo)(()=>{if(!u)return[];if(!t)return u;let e=t.toLowerCase();return u.filter(t=>{var s,a,r,n,l;let i=t.order||{};return(null===(s=i.email)||void 0===s?void 0:s.toLowerCase().includes(e))||(null===(a=i.full_name)||void 0===a?void 0:a.toLowerCase().includes(e))||(null===(r=t.qr_code)||void 0===r?void 0:r.toLowerCase().includes(e))||(null===(l=t.event)||void 0===l?void 0:null===(n=l.title)||void 0===n?void 0:n.toLowerCase().includes(e))})},[u,t]);return m||x?(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)("div",{className:"text-center text-muted-foreground",children:"Loading tickets..."})}):(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Tickets"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-1",children:"View and manage all tickets sold"})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(O.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,a.jsx)(V.I,{placeholder:"Search by name, email, or QR code...",value:t,onChange:e=>s(e.target.value),className:"pl-10"})]}),(0,a.jsxs)("select",{value:n,onChange:e=>l(e.target.value),className:"px-4 py-2 rounded-lg border border-border bg-background",children:[(0,a.jsx)("option",{value:"all",children:"All Events"}),null==i?void 0:i.map(e=>(0,a.jsx)("option",{value:e.id,children:e.title},e.id))]}),(0,a.jsxs)(o.z,{variant:"outline",className:"gap-2",children:[(0,a.jsx)(P.Z,{className:"w-4 h-4"}),"Export"]})]}),u&&0!==h.length?(0,a.jsx)("div",{className:"bg-card rounded-2xl border border-border overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-muted/50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"text-left px-6 py-4 text-sm font-medium text-muted-foreground",children:"Ticket ID"}),(0,a.jsx)("th",{className:"text-left px-6 py-4 text-sm font-medium text-muted-foreground",children:"Event"}),(0,a.jsx)("th",{className:"text-left px-6 py-4 text-sm font-medium text-muted-foreground",children:"Buyer"}),(0,a.jsx)("th",{className:"text-left px-6 py-4 text-sm font-medium text-muted-foreground",children:"Type"}),(0,a.jsx)("th",{className:"text-left px-6 py-4 text-sm font-medium text-muted-foreground",children:"Status"}),(0,a.jsx)("th",{className:"text-left px-6 py-4 text-sm font-medium text-muted-foreground",children:"Purchased"}),(0,a.jsx)("th",{className:"text-right px-6 py-4 text-sm font-medium text-muted-foreground",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-border",children:h.map(e=>{var t,s,r,n,l;return(0,a.jsxs)("tr",{className:"hover:bg-muted/30 transition-colors",children:[(0,a.jsxs)("td",{className:"px-6 py-4 font-mono text-sm",children:[e.qr_code.slice(0,8),"..."]}),(0,a.jsxs)("td",{className:"px-6 py-4",children:[(0,a.jsx)("div",{className:"font-medium",children:(null===(t=e.event)||void 0===t?void 0:t.title)||"N/A"}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:(0,R.WU)(new Date(null===(s=e.event)||void 0===s?void 0:s.date),"MMM d, yyyy")})]}),(0,a.jsxs)("td",{className:"px-6 py-4",children:[(0,a.jsx)("div",{children:(null===(r=e.order)||void 0===r?void 0:r.full_name)||"N/A"}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:(null===(n=e.order)||void 0===n?void 0:n.email)||""})]}),(0,a.jsx)("td",{className:"px-6 py-4",children:(null===(l=e.ticket_type)||void 0===l?void 0:l.name)||"N/A"}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)(c.C,{className:"valid"===e.status?"bg-green-500/10 text-green-600":"used"===e.status?"bg-blue-500/10 text-blue-600":"bg-muted text-muted-foreground",children:e.status})}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-muted-foreground",children:(0,R.WU)(new Date(e.created_at),"MMM d, yyyy")}),(0,a.jsx)("td",{className:"px-6 py-4 text-right",children:(0,a.jsxs)(o.z,{variant:"ghost",size:"sm",className:"gap-1",children:[(0,a.jsx)(S.Z,{className:"w-4 h-4"})," View"]})})]},e.id)})})]})})}):(0,a.jsx)("div",{className:"bg-card rounded-2xl border border-border p-12 text-center",children:(0,a.jsx)("p",{className:"text-muted-foreground",children:"No tickets found"})})]})},K=s(29501),W=s(13590),G=s(67119),H=s(75060),J=s(12749),Q=s(2596),$=s(86700),X=s(25658),ee=s(92934),et=s(24156),es=s(30401),ea=s(92369);let er=(0,g.Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var en=s(93448),el=s(23554),ei=s(25038);s(31354);let ed=G.Ry({bank_account_name:G.Z_().min(2,"Account name is required"),bank_account_number:G.Z_().regex(/^\d{10}$/,"Account number must be 10 digits"),bank_name:G.Z_().min(2,"Bank name is required"),bank_code:G.Z_().min(3,"Bank code is required")}),eo=G.Ry({full_name:G.Z_().min(2,"Name must be at least 2 characters"),gender:G.Km(["male","female","other"]).optional(),school:G.Z_().min(2,"Please enter or select your school"),avatar_name:G.Z_().min(1,"Please select an avatar")}),ec=["TrEric","TrTorsten","TrIggy","TrFranklin","TrImran","TrAlex","TrFelix","TrEnrique","TrHarry","TrStu","TrChad"],em=["TrChelsea","TrSamantha","TrMaria","TrRachel","TrShamila","TrSophia","TrHelen","TrNancy"],eu=["TrAlex","TrFelix","TrSophia","TrHarry","TrHelen"];var ex=()=>{var e;let{profile:t,refreshProfile:s}=(0,F.a)(),n=(0,q.NL)(),[l,i]=(0,r.useState)(!1),[c,m]=(0,r.useState)(null),[u,x]=(0,r.useState)(!1),[h,f]=(0,r.useState)(null),[p,b]=(0,r.useState)([]),[v,g]=(0,r.useState)(!0),[j,y]=(0,r.useState)(!1),[N,w]=(0,r.useState)(!1),[k,C]=(0,r.useState)(""),[S,E]=(0,r.useState)(!1),{data:A,isLoading:T}=(0,d.a)({queryKey:["creator-profile",null==t?void 0:t.id],queryFn:()=>(0,L.ks)(t.id),enabled:!!(null==t?void 0:t.id)});(0,r.useEffect)(()=>{let e=async()=>{g(!0),m(null);try{let e=await (0,X.G5)();console.log("Fetched banks:",e),e&&e.length>0?b(e):(console.warn("No banks returned from API"),m("No banks available. Please check if the Edge Function is deployed."))}catch(t){console.error("Failed to fetch banks:",t);let e=t.message||"Failed to load banks";e.includes("not deployed")||e.includes("not available")?m("Bank service is not available. The Edge Function needs to be deployed. Please deploy it using: supabase functions deploy get-paystack-banks"):m(e)}finally{g(!1)}};(null==t?void 0:t.id)&&e()},[null==t?void 0:t.id]);let z=(0,I.D)({mutationFn:e=>(0,M.D0)(t.id,{bank_account_name:e.bank_account_name,bank_account_number:e.bank_account_number,bank_name:e.bank_name,bank_code:e.bank_code,is_bank_verified:e.is_bank_verified}),onSuccess:()=>{i(!0),m(null),x(!1),f(null),n.invalidateQueries({queryKey:["creator-profile",null==t?void 0:t.id]}),setTimeout(()=>i(!1),3e3)},onError:e=>{m(e.message||"Failed to update bank account"),i(!1),x(!1)}}),{register:P,handleSubmit:U,watch:R,setValue:D,formState:{errors:O},reset:B}=(0,K.cI)({resolver:(0,W.F)(ed),defaultValues:{bank_account_name:(null==A?void 0:A.bank_account_name)||"",bank_account_number:(null==A?void 0:A.bank_account_number)||"",bank_name:(null==A?void 0:A.bank_name)||"",bank_code:(null==A?void 0:A.bank_code)||""}});(0,r.useEffect)(()=>{A&&B({bank_account_name:A.bank_account_name||"",bank_account_number:A.bank_account_number||"",bank_name:A.bank_name||"",bank_code:A.bank_code||""})},[A,B]);let Y=e=>{let t=p.find(t=>t.name===e);if(t){let e=R("bank_account_number")||"",s=R("bank_account_name")||"";f(null),m(null),D("bank_name",t.name,{shouldValidate:!0}),D("bank_code",t.code,{shouldValidate:!0}),e&&D("bank_account_number",e),s&&D("bank_account_name",s),y(!1)}},G=R("bank_name"),ex=[...p].sort((e,t)=>e.name.localeCompare(t.name)),eh=async()=>{let e=R("bank_account_number"),t=R("bank_code"),s=R("bank_account_name");if(!t||!e){m("Please select a bank and enter your account number first");return}if(10!==e.length){m("Account number must be exactly 10 digits");return}x(!0),m(null),f(null);try{let a=await (0,X.s4)({account_number:e,bank_code:t});a.verified&&a.account_name?(f(a.account_name),B({bank_account_name:a.account_name,bank_account_number:e,bank_name:R("bank_name"),bank_code:t},{keepValues:!1}),s&&s.toLowerCase()!==a.account_name.toLowerCase()&&console.log('Account name updated from "'.concat(s,'" to "').concat(a.account_name,'"'))):m(a.error||"Account verification failed. Please check your account number and bank code.")}catch(e){console.error("Verification error:",e),m(e.message||"Failed to verify account. Please try again.")}finally{x(!1)}},ef=async e=>{m(null),x(!0);try{let t=await (0,X.s4)({account_number:e.bank_account_number,bank_code:e.bank_code});if(!t.verified){m(t.error||"Account verification failed. Please verify your account details before saving."),x(!1);return}if(t.account_name){let s=t.account_name.toLowerCase().trim(),a=e.bank_account_name.toLowerCase().trim();if(s!==a){m('Account name mismatch. The verified account name is: "'.concat(t.account_name,'". Please update it and try again.')),B({...e,bank_account_name:t.account_name}),x(!1);return}}z.mutate({...e,is_bank_verified:!0})}catch(e){console.error("Submit error:",e),m(e.message||"Failed to verify and save account. Please try again."),x(!1)}},{register:ep,handleSubmit:eb,watch:ev,setValue:eg,formState:{errors:ej},reset:ey}=(0,K.cI)({resolver:(0,W.F)(eo),defaultValues:{full_name:(null==t?void 0:t.full_name)||"",gender:(null==t?void 0:t.gender)||void 0,school:(null==t?void 0:t.school)||"",avatar_name:(null==t?void 0:t.avatar_name)||""}});(0,r.useEffect)(()=>{t&&ey({full_name:t.full_name||"",gender:t.gender||void 0,school:t.school||"",avatar_name:t.avatar_name||""})},[t,ey]);let eN=ev("gender"),ew=ev("avatar_name"),ek=ev("school"),e_="male"===eN?ec:"female"===eN?em:eu,eC=(0,I.D)({mutationFn:e=>(0,M.Lj)(t.id,{full_name:e.full_name,gender:e.gender||null,school:e.school,avatar_name:e.avatar_name}),onSuccess:async()=>{E(!0),m(null),await s(),n.invalidateQueries({queryKey:["creator-profile",null==t?void 0:t.id]}),setTimeout(()=>E(!1),3e3)},onError:e=>{m(e.message||"Failed to update profile"),E(!1)}}),eS=async e=>{m(null),eC.mutate(e)};return T?(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)("div",{className:"text-center text-muted-foreground",children:"Loading..."})}):(0,a.jsxs)("div",{className:"p-6 max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Settings"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-1",children:"Manage your profile and payout details"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-card rounded-2xl border border-border p-6 space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-1",children:"Profile Information"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Update your personal information and avatar"})]}),S&&(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-green-500/10 text-green-600 rounded-lg",children:[(0,a.jsx)(ee.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"text-sm",children:"Profile updated successfully!"})]}),(0,a.jsxs)("form",{onSubmit:eb(eS),className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(H._,{htmlFor:"profile_full_name",children:"Full Name"}),(0,a.jsx)(V.I,{id:"profile_full_name",type:"text",placeholder:"John Doe",...ep("full_name"),className:(0,en.cn)("mt-2",ej.full_name&&"border-destructive")}),ej.full_name&&(0,a.jsx)("p",{className:"text-sm text-destructive mt-1",children:ej.full_name.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(H._,{htmlFor:"profile_email",children:"Email"}),(0,a.jsx)(V.I,{id:"profile_email",type:"email",value:(null==t?void 0:t.email)||"",readOnly:!0,className:"mt-2 bg-muted"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Email cannot be changed"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(H._,{children:"Gender"}),(0,a.jsxs)($.E,{value:eN,onValueChange:e=>eg("gender",e),className:"mt-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 p-3 rounded-lg border border-border hover:bg-muted/50",children:[(0,a.jsx)($.m,{value:"male",id:"profile_male"}),(0,a.jsx)(H._,{htmlFor:"profile_male",className:"cursor-pointer flex-1",children:"Male"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 p-3 rounded-lg border border-border hover:bg-muted/50",children:[(0,a.jsx)($.m,{value:"female",id:"profile_female"}),(0,a.jsx)(H._,{htmlFor:"profile_female",className:"cursor-pointer flex-1",children:"Female"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 p-3 rounded-lg border border-border hover:bg-muted/50",children:[(0,a.jsx)($.m,{value:"other",id:"profile_other"}),(0,a.jsx)(H._,{htmlFor:"profile_other",className:"cursor-pointer flex-1",children:"Other"})]})]}),ej.gender&&(0,a.jsx)("p",{className:"text-sm text-destructive mt-1",children:ej.gender.message})]}),eN&&(0,a.jsxs)("div",{children:[(0,a.jsx)(H._,{children:"Choose Your Avatar"}),(0,a.jsx)("div",{className:"grid grid-cols-6 gap-2 mt-2",children:e_.map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>eg("avatar_name",e,{shouldValidate:!0}),className:(0,en.cn)("p-2 rounded-full border-2 transition-all hover:scale-110 flex items-center justify-center",ew===e?"border-primary bg-primary/10":"border-border hover:border-primary/50"),children:(0,a.jsx)(ei.qU,{name:e,size:"sm",rounded:!0})},e))}),(0,a.jsx)("input",{type:"hidden",...ep("avatar_name")}),ej.avatar_name&&(0,a.jsx)("p",{className:"text-sm text-destructive mt-1",children:ej.avatar_name.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(H._,{htmlFor:"profile_school",children:"School"}),(0,a.jsxs)(J.J2,{open:N,onOpenChange:w,children:[(0,a.jsx)(J.xo,{asChild:!0,children:(0,a.jsxs)(o.z,{variant:"outline",role:"combobox","aria-expanded":N,className:"w-full justify-between mt-2",children:[ek||"Select or enter your school...",(0,a.jsx)(et.Z,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,a.jsx)(J.yk,{className:"w-[var(--radix-popover-trigger-width)] p-0",align:"start",children:(0,a.jsxs)(Q.mY,{children:[(0,a.jsx)(Q.sZ,{placeholder:"Search school or type to add custom...",onValueChange:e=>{C(e)}}),(0,a.jsxs)(Q.e8,{children:[(0,a.jsx)(Q.rb,{children:(0,a.jsx)("div",{className:"py-2 px-4",children:(0,a.jsxs)(o.z,{type:"button",variant:"outline",size:"sm",className:"w-full",onClick:()=>{k&&(eg("school",k,{shouldValidate:!0}),w(!1),C(""))},children:[(0,a.jsx)(_.Z,{className:"mr-2 h-4 w-4"}),'Add "',k||"Custom School",'"']})})}),(0,a.jsx)(Q.fu,{children:el.u.map(e=>(0,a.jsxs)(Q.di,{value:e,onSelect:()=>{eg("school",e,{shouldValidate:!0}),w(!1)},children:[(0,a.jsx)(es.Z,{className:(0,en.cn)("mr-2 h-4 w-4",ek===e?"opacity-100":"opacity-0")}),e]},e))}),k&&!el.u.some(e=>e.toLowerCase().includes(k.toLowerCase()))&&(0,a.jsx)(Q.fu,{children:(0,a.jsxs)(Q.di,{value:"add-".concat(k),onSelect:()=>{eg("school",k,{shouldValidate:!0}),w(!1),C("")},children:[(0,a.jsx)(_.Z,{className:"mr-2 h-4 w-4"}),'Add "',k,'"']})})]})]})})]}),(0,a.jsx)("input",{type:"hidden",...ep("school")}),ej.school&&(0,a.jsx)("p",{className:"text-sm text-destructive mt-1",children:ej.school.message})]}),(0,a.jsx)(o.z,{type:"submit",variant:"hero",disabled:eC.isPending,className:"w-full gap-2",children:eC.isPending?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Z.Z,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ea.Z,{className:"w-4 h-4"}),"Save Profile"]})})]})]}),(0,a.jsxs)("div",{className:"bg-card rounded-2xl border border-border p-6 space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-1",children:"Bank Account Details"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Add your bank account details to receive payouts from ticket sales"})]}),(null==A?void 0:A.is_bank_verified)&&(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-green-500/10 text-green-600 rounded-lg",children:[(0,a.jsx)(ee.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Bank account verified"})]}),l&&(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-green-500/10 text-green-600 rounded-lg",children:[(0,a.jsx)(ee.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"text-sm",children:"Bank account details updated successfully!"})]}),c&&(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-destructive/10 text-destructive rounded-lg",children:[(0,a.jsx)(er,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"text-sm",children:c})]}),h&&(0,a.jsxs)("div",{className:"flex items-start gap-2 p-3 bg-blue-500/10 text-blue-600 rounded-lg",children:[(0,a.jsx)(ee.Z,{className:"w-5 h-5 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Account verified successfully!"}),(0,a.jsxs)("p",{className:"text-sm mt-1",children:["Account name: ",(0,a.jsx)("strong",{children:h})]}),(0,a.jsx)("p",{className:"text-xs mt-1 opacity-80",children:"You can now save your bank details. The account name has been auto-filled."})]})]}),(0,a.jsxs)("form",{onSubmit:U(ef),className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(H._,{htmlFor:"bank_name",children:"Bank Name"}),v?(0,a.jsx)("div",{className:"mt-2 w-full px-3 py-2 rounded-lg border border-border bg-muted animate-pulse",children:"Loading banks..."}):0===p.length?(0,a.jsxs)("div",{className:"mt-2 w-full px-3 py-2 rounded-lg border border-border bg-muted text-muted-foreground",children:["No banks available. ",c||"Please check your connection."]}):(0,a.jsxs)(J.J2,{open:j,onOpenChange:y,children:[(0,a.jsx)(J.xo,{asChild:!0,children:(0,a.jsxs)(o.z,{variant:"outline",role:"combobox","aria-expanded":j,className:(0,en.cn)("w-full justify-between mt-2",!G&&"text-muted-foreground"),children:[G||"Select a bank...",(0,a.jsx)(et.Z,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,a.jsx)(J.yk,{className:"w-[var(--radix-popover-trigger-width)] p-0",align:"start",children:(0,a.jsxs)(Q.mY,{children:[(0,a.jsx)(Q.sZ,{placeholder:"Search bank..."}),(0,a.jsxs)(Q.e8,{children:[(0,a.jsx)(Q.rb,{children:"No bank found."}),(0,a.jsx)(Q.fu,{children:ex.map(e=>(0,a.jsxs)(Q.di,{value:e.name,onSelect:e=>{let t=ex.find(t=>t.name.toLowerCase()===e.toLowerCase()||t.name===e);t&&Y(t.name)},children:[(0,a.jsx)(es.Z,{className:(0,en.cn)("mr-2 h-4 w-4",G===e.name?"opacity-100":"opacity-0")}),e.name]},e.code))})]})]})})]}),(0,a.jsx)("input",{type:"hidden",...P("bank_name")}),O.bank_name&&(0,a.jsx)("p",{className:"text-sm text-destructive mt-1",children:O.bank_name.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(H._,{htmlFor:"bank_code",children:"Bank Code"}),(0,a.jsx)(V.I,{id:"bank_code",type:"text",placeholder:"Bank code (auto-filled when bank is selected)",...P("bank_code"),readOnly:!0,className:"mt-2 bg-muted"}),O.bank_code&&(0,a.jsx)("p",{className:"text-sm text-destructive mt-1",children:O.bank_code.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(H._,{htmlFor:"bank_account_number",children:"Account Number"}),(0,a.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,a.jsx)(V.I,{id:"bank_account_number",type:"text",placeholder:"1234567890",maxLength:10,inputMode:"numeric",pattern:"[0-9]*",...P("bank_account_number"),onChange:e=>{D("bank_account_number",e.target.value.replace(/\D/g,""))},className:"flex-1"}),(0,a.jsx)(o.z,{type:"button",variant:"outline",onClick:eh,disabled:u||!R("bank_code")||!R("bank_account_number")||(null===(e=R("bank_account_number"))||void 0===e?void 0:e.length)!==10,className:"gap-2 whitespace-nowrap",children:u?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Z.Z,{className:"w-4 h-4 animate-spin"}),"Verifying..."]}):"Verify Account"})]}),O.bank_account_number&&(0,a.jsx)("p",{className:"text-sm text-destructive mt-1",children:O.bank_account_number.message}),R("bank_account_number")&&10!==R("bank_account_number").length&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Account number must be exactly 10 digits"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(H._,{htmlFor:"bank_account_name",children:"Account Name"}),(0,a.jsx)(V.I,{id:"bank_account_name",type:"text",placeholder:"Account name (auto-filled after verification)",...P("bank_account_name"),readOnly:!!h,className:(0,en.cn)("mt-2",h&&"bg-muted")}),O.bank_account_name&&(0,a.jsx)("p",{className:"text-sm text-destructive mt-1",children:O.bank_account_name.message}),h&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"✓ Account name verified and auto-filled"})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[!h&&!(null==A?void 0:A.is_bank_verified)&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground text-center",children:'\uD83D\uDCA1 Tip: Click "Verify Account" to verify your account details before saving'}),(0,a.jsx)(o.z,{type:"submit",variant:"hero",disabled:z.isPending||u,className:"w-full gap-2",children:z.isPending?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Z.Z,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):"Save Bank Details"})]})]})]})]})]})},eh=s(91723),ef=s(99388),ep=()=>{let{user:e}=(0,F.a)(),t=(0,q.NL)(),[s,l]=(0,r.useState)(""),{data:i,isLoading:m}=(0,d.a)({queryKey:["creator-balance",null==e?void 0:e.id],queryFn:()=>(0,L.pj)(e.id),enabled:!!(null==e?void 0:e.id)}),{data:x,isLoading:h}=(0,d.a)({queryKey:["creator-withdrawals",null==e?void 0:e.id],queryFn:()=>(0,L.z8)(e.id),enabled:!!(null==e?void 0:e.id)}),p=(0,I.D)({mutationFn:async t=>{if(!(null==e?void 0:e.id))throw Error("User not authenticated");if(!i)throw Error("Balance information not available");let s={bank_account_name:i.bank_account_name||"",bank_account_number:i.bank_account_number||"",bank_name:i.bank_name||"",bank_code:i.bank_code||""};if(!s.bank_account_name||!s.bank_account_number)throw Error("Please add your bank account details in Settings first");return(0,M.aE)(e.id,t,s)},onSuccess:()=>{u.Am.success("Withdrawal request submitted successfully!"),l(""),t.invalidateQueries({queryKey:["creator-balance"]}),t.invalidateQueries({queryKey:["creator-withdrawals"]}),t.invalidateQueries({queryKey:["wallet-transactions"]})},onError:e=>{u.Am.error(e.message||"Failed to submit withdrawal request")}});if(m)return(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)("div",{className:"text-center text-muted-foreground",children:"Loading..."})});let b=Number(null==i?void 0:i.account_balance)||0,v=(null==i?void 0:i.bank_account_name)&&(null==i?void 0:i.bank_account_number);return(0,a.jsxs)("div",{className:"p-3 md:p-6 space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Withdraw Funds"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-1",children:"Request a withdrawal from your account balance"})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-primary to-primary/80 rounded-2xl p-6 text-primary-foreground",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-white/20 flex items-center justify-center",children:(0,a.jsx)(f.Z,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm opacity-90",children:"Available Balance"}),(0,a.jsxs)("h3",{className:"text-3xl font-bold",children:["₦",b.toLocaleString()]})]})]}),(0,a.jsx)(n.default,{href:"/transactions",children:(0,a.jsx)(o.z,{variant:"secondary",size:"sm",className:"mt-4",children:"View Transaction History"})})]}),!v&&(0,a.jsxs)("div",{className:"bg-orange-500/10 border border-orange-500/20 rounded-lg p-4 flex items-start gap-3",children:[(0,a.jsx)(er,{className:"w-5 h-5 text-orange-600 shrink-0 mt-0.5"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-semibold text-orange-900 dark:text-orange-100 mb-1",children:"Bank Account Required"}),(0,a.jsx)("p",{className:"text-sm text-orange-800 dark:text-orange-200",children:"Please add your bank account details in Settings before requesting a withdrawal."})]})]}),(0,a.jsxs)("div",{className:"bg-card rounded-2xl border border-border p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Request Withdrawal"}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault();let t=parseFloat(s);if(isNaN(t)||t<=0){u.Am.error("Please enter a valid amount");return}if(t>b){u.Am.error("Insufficient balance");return}if(t<1e3){u.Am.error("Minimum withdrawal amount is ₦1,000");return}p.mutate(t)},className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(H._,{htmlFor:"amount",children:"Amount (₦)"}),(0,a.jsx)(V.I,{id:"amount",type:"number",placeholder:"Enter amount",value:s,onChange:e=>l(e.target.value),min:"1000",max:b,step:"100",className:"mt-2",disabled:!v||p.isPending}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Minimum withdrawal: ₦1,000"})]}),v&&(0,a.jsxs)("div",{className:"bg-muted/50 rounded-lg p-4",children:[(0,a.jsx)("p",{className:"text-sm font-semibold mb-2",children:"Withdrawal will be sent to:"}),(0,a.jsxs)("div",{className:"text-sm space-y-1",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Account Name:"})," ",null==i?void 0:i.bank_account_name]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Bank:"})," ",null==i?void 0:i.bank_name]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Account Number:"})," ",null==i?void 0:i.bank_account_number]})]})]}),(0,a.jsx)(o.z,{type:"submit",disabled:!v||p.isPending||b<1e3,className:"w-full",children:p.isPending?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Z.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):"Request Withdrawal"})]})]}),(0,a.jsxs)("div",{className:"bg-card rounded-2xl border border-border overflow-hidden",children:[(0,a.jsx)("div",{className:"p-4 md:p-6 border-b border-border",children:(0,a.jsx)("h3",{className:"text-lg font-bold",children:"Recent Withdrawals"})}),h?(0,a.jsxs)("div",{className:"p-12 text-center",children:[(0,a.jsx)(Z.Z,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-primary"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Loading withdrawals..."})]}):x&&0!==x.length?(0,a.jsx)("div",{className:"divide-y divide-border",children:x.slice(0,5).map(e=>{var t;return(0,a.jsx)("div",{className:"p-4 md:p-6",children:(0,a.jsx)("div",{className:"flex items-start justify-between gap-4",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsxs)("p",{className:"font-semibold",children:["₦",Number(e.amount).toLocaleString()]}),(0,a.jsx)(c.C,{variant:"approved"===e.status||"completed"===e.status?"default":"pending"===e.status?"secondary":"destructive",className:"text-xs",children:"approved"===e.status?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ee.Z,{className:"w-3 h-3 mr-1"})," Approved"]}):"pending"===e.status?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eh.Z,{className:"w-3 h-3 mr-1"})," Pending"]}):"rejected"===e.status?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ef.Z,{className:"w-3 h-3 mr-1"})," Rejected"]}):e.status})]}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground mb-1",children:[e.bank_name," • ",null===(t=e.bank_account_number)||void 0===t?void 0:t.slice(-4)]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,R.WU)(new Date(e.created_at),"MMM d, yyyy • h:mm a")}),e.admin_note&&(0,a.jsxs)("div",{className:"mt-2 p-2 bg-muted/50 rounded text-xs",children:[(0,a.jsx)("p",{className:"font-semibold mb-1",children:"Admin Note:"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:e.admin_note})]})]})})},e.id)})}):(0,a.jsxs)("div",{className:"p-12 text-center",children:[(0,a.jsx)(f.Z,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"No withdrawals yet"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Your withdrawal requests will appear here."})]}),x&&x.length>5&&(0,a.jsx)("div",{className:"p-4 border-t border-border text-center",children:(0,a.jsx)(n.default,{href:"/transactions",children:(0,a.jsx)(o.z,{variant:"ghost",size:"sm",children:"View All Withdrawals"})})})]})]})};function eb(){let{profile:e,loading:t,user:s}=(0,F.a)(),g=(0,i.useRouter)(),O=(0,i.useSearchParams)(),[V,B]=(0,r.useState)("dashboard"),[K,W]=(0,r.useState)(null),[G,H]=(0,r.useState)(!1),[J,Q]=(0,r.useState)(!1),[$,X]=(0,r.useState)(null),{data:ee,isLoading:et,error:es}=(0,d.a)({queryKey:["creator-events",null==e?void 0:e.id],queryFn:()=>(0,L.TX)(e.id),enabled:!!(null==e?void 0:e.id)}),{data:ea,isLoading:er}=(0,d.a)({queryKey:["creator-past-events",null==e?void 0:e.id],queryFn:()=>(0,L.DK)(e.id),enabled:!!(null==e?void 0:e.id)}),{data:en,isLoading:el}=(0,d.a)({queryKey:["user-tickets",null==s?void 0:s.id],queryFn:()=>(0,L.ZD)(s.id),enabled:!!(null==s?void 0:s.id)&&!t}),ei=(0,q.NL)(),ed=(0,I.D)({mutationFn:e=>(0,M.Bt)(e,s.id),onSuccess:()=>{u.Am.success("Event deleted successfully"),ei.invalidateQueries({queryKey:["creator-events"]}),ei.invalidateQueries({queryKey:["creator-past-events"]})},onError:e=>{u.Am.error((null==e?void 0:e.message)||"Failed to delete event")}});(0,r.useEffect)(()=>{O.get("created")&&(u.Am.success("Event created successfully!",{description:"Your event has been created and is now live."}),g.replace("/dashboard/creator")),"withdraw"===O.get("tab")&&B("withdraw")},[O,g]);let eo=(0,r.useMemo)(()=>{if(!ee)return[{label:"Total Events",value:"0",icon:x.Z,change:""},{label:"Tickets Sold",value:"0",icon:h.Z,change:""},{label:"Total Revenue",value:"₦0",icon:f.Z,change:""},{label:"Total Attendees",value:"0",icon:p.Z,change:""}];let e=ee.length,t=ee.reduce((e,t)=>e+(t.ticket_types||[]).reduce((e,t)=>e+(t.sold_count||0),0),0),s=ee.reduce((e,t)=>e+(t.ticket_types||[]).reduce((e,t)=>e+(t.price||0)*(t.sold_count||0),0),0);return[{label:"Total Events",value:e.toString(),icon:x.Z,change:""},{label:"Tickets Sold",value:t.toLocaleString(),icon:h.Z,change:""},{label:"Total Revenue",value:"₦".concat(s.toLocaleString()),icon:f.Z,change:""},{label:"Total Attendees",value:t.toLocaleString(),icon:p.Z,change:""}]},[ee]),ec=(0,r.useMemo)(()=>ee?ee.map(e=>{let t=e.ticket_types||[],s=t.reduce((e,t)=>e+(t.sold_count||0),0),a=t.reduce((e,t)=>e+(t.quantity||0),0),r=t.reduce((e,t)=>e+(t.price||0)*(t.sold_count||0),0);return{id:e.id,title:e.title,date:(0,R.WU)(new Date(e.date),"MMM d, yyyy"),ticketsSold:s,totalTickets:a,revenue:r,status:e.status||"active"}}):[],[ee]);return t?(0,a.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Loading..."})]})}):e&&s?"creator"!==e.role?(0,a.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"mb-2 text-lg font-semibold",children:"Access Denied"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"This page is only accessible to creators."}),(0,a.jsx)(n.default,{href:"/dashboard/user",children:(0,a.jsx)(o.z,{variant:"outline",children:"Go to User Dashboard"})})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-background flex",children:[G&&(0,a.jsx)("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-40 lg:hidden",onClick:()=>H(!1)}),(0,a.jsxs)("aside",{className:"fixed inset-y-0 left-0 z-50 w-64 bg-card border-r border-border transform transition-transform duration-300 ease-in-out lg:hidden ".concat(G?"translate-x-0":"-translate-x-full"),children:[(0,a.jsxs)("div",{className:"p-4 border-b border-border flex items-center justify-between",children:[(0,a.jsx)(n.default,{href:"/",className:"flex items-center gap-2",onClick:()=>H(!1),children:(0,a.jsx)(l.default,{src:"/logo.png",alt:"Frecks",width:120,height:40,className:"h-8 w-auto"})}),(0,a.jsx)("button",{onClick:()=>H(!1),className:"p-2 hover:bg-muted rounded-lg",children:(0,a.jsx)(b.Z,{className:"w-5 h-5"})})]}),(0,a.jsxs)("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:[(0,a.jsxs)("button",{onClick:()=>{B("dashboard"),H(!1)},className:"w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors ".concat("dashboard"===V?"bg-primary text-primary-foreground font-medium":"text-muted-foreground hover:bg-muted"),children:[(0,a.jsx)(v.Z,{className:"w-4 h-4"}),"Dashboard"]}),(0,a.jsxs)("button",{onClick:()=>{B("events"),H(!1)},className:"w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors ".concat("events"===V?"bg-primary text-primary-foreground font-medium":"text-muted-foreground hover:bg-muted"),children:[(0,a.jsx)(x.Z,{className:"w-4 h-4"}),"My Events"]}),(0,a.jsxs)("button",{onClick:()=>{B("tickets"),H(!1)},className:"w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors ".concat("tickets"===V?"bg-primary text-primary-foreground font-medium":"text-muted-foreground hover:bg-muted"),children:[(0,a.jsx)(h.Z,{className:"w-4 h-4"}),"Tickets"]}),(0,a.jsxs)("button",{onClick:()=>{B("my-tickets"),H(!1)},className:"w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors ".concat("my-tickets"===V?"bg-primary text-primary-foreground font-medium":"text-muted-foreground hover:bg-muted"),children:[(0,a.jsx)(j,{className:"w-4 h-4"}),"My Tickets"]}),(0,a.jsxs)("button",{onClick:()=>{B("withdraw"),H(!1)},className:"w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors ".concat("withdraw"===V?"bg-primary text-primary-foreground font-medium":"text-muted-foreground hover:bg-muted"),children:[(0,a.jsx)(y.Z,{className:"w-4 h-4"}),"Withdraw"]}),(0,a.jsxs)("button",{onClick:()=>{B("settings"),H(!1)},className:"w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors ".concat("settings"===V?"bg-primary text-primary-foreground font-medium":"text-muted-foreground hover:bg-muted"),children:[(0,a.jsx)(N.Z,{className:"w-4 h-4"}),"Settings"]})]}),(0,a.jsxs)("div",{className:"p-4 border-t border-border space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-3",children:[(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"Theme"}),(0,a.jsx)(U.Z,{})]}),(0,a.jsx)(n.default,{href:"/",children:(0,a.jsxs)("button",{className:"w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm text-muted-foreground hover:bg-muted transition-colors",children:[(0,a.jsx)(w.Z,{className:"w-4 h-4"}),"Back to Site"]})})]})]}),(0,a.jsxs)("aside",{className:"hidden lg:flex flex-col w-64 bg-card border-r border-border",children:[(0,a.jsx)("div",{className:"p-6 border-b border-border",children:(0,a.jsx)(n.default,{href:"/",className:"flex items-center gap-2",children:(0,a.jsx)(l.default,{src:"/logo.png",alt:"Frecks",width:140,height:48,className:"h-10 w-auto"})})}),(0,a.jsxs)("nav",{className:"flex-1 p-4 space-y-2",children:[(0,a.jsxs)("button",{onClick:()=>B("dashboard"),className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-colors ".concat("dashboard"===V?"bg-primary text-primary-foreground font-medium":"text-muted-foreground hover:bg-muted"),children:[(0,a.jsx)(v.Z,{className:"w-5 h-5"}),"Dashboard"]}),(0,a.jsxs)("button",{onClick:()=>B("events"),className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-colors ".concat("events"===V?"bg-primary text-primary-foreground font-medium":"text-muted-foreground hover:bg-muted"),children:[(0,a.jsx)(x.Z,{className:"w-5 h-5"}),"My Events"]}),(0,a.jsxs)("button",{onClick:()=>B("past-events"),className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-colors ".concat("past-events"===V?"bg-primary text-primary-foreground font-medium":"text-muted-foreground hover:bg-muted"),children:[(0,a.jsx)(x.Z,{className:"w-5 h-5"}),"Past Events"]}),(0,a.jsxs)("button",{onClick:()=>B("tickets"),className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-colors ".concat("tickets"===V?"bg-primary text-primary-foreground font-medium":"text-muted-foreground hover:bg-muted"),children:[(0,a.jsx)(h.Z,{className:"w-5 h-5"}),"Tickets"]}),(0,a.jsxs)("button",{onClick:()=>B("my-tickets"),className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-colors ".concat("my-tickets"===V?"bg-primary text-primary-foreground font-medium":"text-muted-foreground hover:bg-muted"),children:[(0,a.jsx)(j,{className:"w-5 h-5"}),"My Tickets"]}),(0,a.jsxs)("button",{onClick:()=>B("withdraw"),className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-colors ".concat("withdraw"===V?"bg-primary text-primary-foreground font-medium":"text-muted-foreground hover:bg-muted"),children:[(0,a.jsx)(y.Z,{className:"w-5 h-5"}),"Withdraw"]}),(0,a.jsxs)("button",{onClick:()=>B("settings"),className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-colors ".concat("settings"===V?"bg-primary text-primary-foreground font-medium":"text-muted-foreground hover:bg-muted"),children:[(0,a.jsx)(N.Z,{className:"w-5 h-5"}),"Settings"]})]}),(0,a.jsxs)("div",{className:"p-4 border-t border-border space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-4",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Theme"}),(0,a.jsx)(U.Z,{})]}),(0,a.jsx)(n.default,{href:"/",children:(0,a.jsxs)("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-muted-foreground hover:bg-muted transition-colors",children:[(0,a.jsx)(w.Z,{className:"w-5 h-5"}),"Back to Site"]})})]})]}),(0,a.jsxs)("main",{className:"flex-1 overflow-auto",children:[(0,a.jsx)("header",{className:"sticky top-0 z-30 bg-background/80 backdrop-blur-lg border-b border-border",children:(0,a.jsxs)("div",{className:"flex items-center justify-between px-3 md:px-6 py-3 md:py-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 md:gap-4",children:[(0,a.jsx)("button",{onClick:()=>H(!0),className:"lg:hidden p-2 hover:bg-muted rounded-lg",children:(0,a.jsx)(k.Z,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-lg md:text-2xl font-bold",children:"Organizer Dashboard"}),(0,a.jsx)("p",{className:"text-xs md:text-sm text-muted-foreground hidden sm:block",children:"Manage your events and track sales"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 md:gap-3",children:[(0,a.jsx)("div",{className:"lg:hidden",children:(0,a.jsx)(U.Z,{})}),(0,a.jsx)(n.default,{href:"/dashboard/creator/create",children:(0,a.jsxs)(o.z,{size:"sm",className:"gap-1 md:gap-2 text-xs md:text-base",children:[(0,a.jsx)(_.Z,{className:"w-3 h-3 md:w-4 md:h-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Create Event"}),(0,a.jsx)("span",{className:"sm:hidden",children:"Create"})]})})]})]})}),"dashboard"===V&&(0,a.jsxs)("div",{className:"p-3 md:p-6 space-y-4 md:space-y-8",children:[(0,a.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-2 md:gap-4",children:eo.map(e=>(0,a.jsxs)("div",{className:"bg-card rounded-lg md:rounded-2xl border border-border p-3 md:p-6 shadow-card",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-2 md:mb-4",children:[(0,a.jsx)("div",{className:"w-8 h-8 md:w-12 md:h-12 rounded-lg md:rounded-xl bg-primary/10 flex items-center justify-center",children:(0,a.jsx)(e.icon,{className:"w-4 h-4 md:w-6 md:h-6 text-primary"})}),(0,a.jsx)(C.Z,{className:"w-4 h-4 md:w-5 md:h-5 text-primary hidden sm:block"})]}),(0,a.jsx)("div",{className:"text-lg md:text-2xl font-bold mb-0.5 md:mb-1",children:e.value}),(0,a.jsx)("div",{className:"text-xs md:text-sm text-muted-foreground",children:e.label}),(0,a.jsx)("div",{className:"text-xs text-primary mt-1 md:mt-2",children:e.change})]},e.label))}),(0,a.jsxs)("div",{className:"bg-card rounded-lg md:rounded-2xl border border-border shadow-card overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-3 md:p-6 border-b border-border flex flex-col sm:flex-row sm:items-center justify-between gap-2 md:gap-4",children:[(0,a.jsx)("h2",{className:"text-base md:text-xl font-bold",children:"Your Events"}),(0,a.jsxs)("div",{className:"flex gap-1 md:gap-2",children:[(0,a.jsx)(o.z,{variant:"outline",size:"sm",className:"text-xs",children:"All"}),(0,a.jsx)(o.z,{variant:"ghost",size:"sm",className:"text-xs",children:"Active"}),(0,a.jsx)(o.z,{variant:"ghost",size:"sm",className:"text-xs",children:"Done"})]})]}),(0,a.jsx)("div",{className:"lg:hidden divide-y divide-border",children:(null==e?void 0:e.id)?et?(0,a.jsx)("div",{className:"p-3 text-center text-xs text-muted-foreground",children:"Loading events..."}):es?(0,a.jsxs)("div",{className:"p-3 text-center text-xs text-destructive",children:["Error: ",es.message]}):0===ec.length?(0,a.jsx)("div",{className:"p-3 text-center text-xs text-muted-foreground",children:"No events yet. Create your first event!"}):ec.map(e=>(0,a.jsxs)("div",{className:"p-3",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold truncate",children:e.title}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:e.date})]}),(0,a.jsx)(c.C,{className:"text-xs shrink-0 ".concat("active"===e.status?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"),children:e.status})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs mb-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Sold:"})," ",(0,a.jsxs)("span",{className:"font-medium",children:[e.ticketsSold,"/",e.totalTickets]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Revenue:"})," ",(0,a.jsxs)("span",{className:"font-medium text-primary",children:["₦",e.revenue.toLocaleString()]})]})]}),(0,a.jsxs)("div",{className:"flex gap-1.5 mt-2",children:[(0,a.jsx)(n.default,{href:"/dashboard/creator/analytics/".concat(e.id),className:"flex-1",children:(0,a.jsxs)(o.z,{variant:"outline",size:"sm",className:"w-full gap-1 text-xs h-8",children:[(0,a.jsx)(S.Z,{className:"w-3 h-3"})," View"]})}),(0,a.jsx)(n.default,{href:"/dashboard/creator/edit/".concat(e.id),className:"flex-1",children:(0,a.jsxs)(o.z,{variant:"ghost",size:"sm",className:"w-full gap-1 text-xs h-8",children:[(0,a.jsx)(E.Z,{className:"w-3 h-3"})," Edit"]})})]})]},e.id)):(0,a.jsx)("div",{className:"p-3 text-center text-xs text-muted-foreground",children:"Loading..."})}),(0,a.jsx)("div",{className:"hidden lg:block overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-muted/50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"text-left px-4 py-3 text-xs md:text-sm font-medium text-muted-foreground",children:"Event"}),(0,a.jsx)("th",{className:"text-left px-4 py-3 text-xs md:text-sm font-medium text-muted-foreground",children:"Date"}),(0,a.jsx)("th",{className:"text-left px-4 py-3 text-xs md:text-sm font-medium text-muted-foreground",children:"Tickets Sold"}),(0,a.jsx)("th",{className:"text-left px-4 py-3 text-xs md:text-sm font-medium text-muted-foreground",children:"Revenue"}),(0,a.jsx)("th",{className:"text-left px-4 py-3 text-xs md:text-sm font-medium text-muted-foreground",children:"Status"}),(0,a.jsx)("th",{className:"text-right px-4 py-3 text-xs md:text-sm font-medium text-muted-foreground",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-border",children:(null==e?void 0:e.id)?et?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:6,className:"px-4 py-3 text-center text-xs text-muted-foreground",children:"Loading events..."})}):es?(0,a.jsx)("tr",{children:(0,a.jsxs)("td",{colSpan:6,className:"px-4 py-3 text-center text-xs text-destructive",children:["Error loading events: ",es.message]})}):0===ec.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:6,className:"px-4 py-3 text-center text-xs text-muted-foreground",children:"No events yet. Create your first event!"})}):ec.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-muted/30 transition-colors",children:[(0,a.jsx)("td",{className:"px-4 py-3 text-sm font-medium",children:e.title}),(0,a.jsx)("td",{className:"px-4 py-3 text-xs text-muted-foreground",children:e.date}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-20 h-1.5 bg-muted rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-primary rounded-full",style:{width:"".concat(e.ticketsSold/e.totalTickets*100,"%")}})}),(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:[e.ticketsSold,"/",e.totalTickets]})]})}),(0,a.jsxs)("td",{className:"px-4 py-3 text-sm font-semibold text-primary",children:["₦",e.revenue.toLocaleString()]}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsx)(c.C,{className:"text-xs ".concat("active"===e.status?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"),children:e.status})}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,a.jsx)(n.default,{href:"/dashboard/creator/analytics/".concat(e.id),children:(0,a.jsx)(o.z,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"View Analytics",children:(0,a.jsx)(S.Z,{className:"w-3 h-3"})})}),(0,a.jsx)(n.default,{href:"/dashboard/creator/edit/".concat(e.id),children:(0,a.jsx)(o.z,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Edit Event",children:(0,a.jsx)(E.Z,{className:"w-3 h-3"})})}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(o.z,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>W(K===e.id?null:e.id),children:(0,a.jsx)(A.Z,{className:"w-3 h-3"})}),K===e.id&&(0,a.jsxs)("div",{className:"absolute right-0 top-full mt-1 w-36 bg-card border border-border rounded-lg shadow-lg py-1 z-10",children:[(0,a.jsx)(n.default,{href:"/dashboard/creator/analytics/".concat(e.id),children:(0,a.jsxs)("button",{className:"w-full px-3 py-1.5 text-left text-xs hover:bg-muted transition-colors flex items-center gap-2",onClick:()=>W(null),children:[(0,a.jsx)(S.Z,{className:"w-3 h-3"})," View Analytics"]})}),(0,a.jsx)(n.default,{href:"/dashboard/creator/edit/".concat(e.id),children:(0,a.jsxs)("button",{className:"w-full px-3 py-1.5 text-left text-xs hover:bg-muted transition-colors flex items-center gap-2",onClick:()=>W(null),children:[(0,a.jsx)(E.Z,{className:"w-3 h-3"})," Edit Event"]})}),(0,a.jsxs)("button",{className:"w-full px-3 py-1.5 text-left text-xs hover:bg-muted transition-colors flex items-center gap-2 text-destructive",onClick:()=>{W(null),X(e.id),Q(!0)},children:[(0,a.jsx)(T.Z,{className:"w-3 h-3"})," Delete"]})]})]})]})})]},e.id)):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:6,className:"px-4 py-3 text-center text-xs text-muted-foreground",children:"Loading..."})})})]})})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-2 md:gap-4",children:(0,a.jsx)(n.default,{href:"/dashboard/creator/create",children:(0,a.jsxs)("button",{className:"p-3 md:p-6 bg-primary text-primary-foreground rounded-lg md:rounded-2xl text-left hover:brightness-110 transition-all w-full",children:[(0,a.jsx)(_.Z,{className:"w-5 h-5 md:w-8 md:h-8 mb-2 md:mb-4"}),(0,a.jsx)("h3",{className:"font-bold text-sm md:text-lg mb-0.5 md:mb-1",children:"Create New Event"}),(0,a.jsx)("p",{className:"text-xs md:text-sm opacity-80",children:"Start organizing your next event"})]})})})]}),(0,a.jsx)("div",{style:{display:"events"===V?"block":"none"},children:(0,a.jsx)(D,{onDelete:e=>ed.mutate(e)})}),"past-events"===V&&(0,a.jsxs)("div",{className:"p-3 md:p-6",children:[(0,a.jsxs)("div",{className:"mb-4 md:mb-6",children:[(0,a.jsx)("h2",{className:"text-lg md:text-2xl font-bold mb-1 md:mb-2",children:"Past Events"}),(0,a.jsx)("p",{className:"text-xs md:text-sm text-muted-foreground",children:"Events that have already occurred"})]}),er?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(Z.Z,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-primary"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Loading past events..."})]}):ea&&0!==ea.length?(0,a.jsx)("div",{className:"grid gap-3 md:gap-4",children:ea.map(e=>{let t=e.ticket_types||[],s=t.reduce((e,t)=>e+(t.sold_count||0),0),r=t.reduce((e,t)=>e+(t.quantity||0),0),l=t.reduce((e,t)=>e+(t.price||0)*(t.sold_count||0),0);return(0,a.jsx)("div",{className:"bg-card rounded-xl border border-border p-4 md:p-6 hover:shadow-lg transition-shadow",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-start gap-3 md:gap-4",children:[e.image_url&&(0,a.jsx)("div",{className:"w-full md:w-32 h-32 rounded-lg overflow-hidden bg-muted shrink-0",children:(0,a.jsx)("img",{src:e.image_url,alt:e.title,className:"w-full h-full object-cover"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-2",children:[(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsx)("h3",{className:"text-base md:text-xl font-bold mb-1 truncate",children:e.title}),(0,a.jsx)(c.C,{className:"text-xs mb-1",children:e.category})]}),(0,a.jsx)(c.C,{variant:"secondary",className:"shrink-0 text-xs",children:"Past"})]}),(0,a.jsx)("p",{className:"text-xs md:text-sm text-muted-foreground mb-2",children:e.location}),(0,a.jsx)("p",{className:"text-xs md:text-sm text-muted-foreground mb-3",children:(0,R.WU)(new Date(e.date),"EEE, MMM d, yyyy • h:mm a")}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 md:gap-4 pt-3 border-t border-border",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Tickets Sold"}),(0,a.jsxs)("p",{className:"text-sm md:text-base font-semibold",children:[s," / ",r]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Revenue"}),(0,a.jsxs)("p",{className:"text-sm md:text-base font-semibold text-primary",children:["₦",l.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"col-span-2 md:col-span-1",children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Attendees"}),(0,a.jsx)("p",{className:"text-sm md:text-base font-semibold",children:s})]})]}),(0,a.jsxs)("div",{className:"flex gap-2 mt-3",children:[(0,a.jsx)(n.default,{href:"/event/".concat(e.id),className:"flex-1",children:(0,a.jsxs)(o.z,{variant:"outline",size:"sm",className:"w-full text-xs",children:[(0,a.jsx)(S.Z,{className:"w-3 h-3 md:w-4 md:h-4 mr-1"}),"View Event"]})}),(0,a.jsx)(n.default,{href:"/dashboard/creator/analytics/".concat(e.id),className:"flex-1",children:(0,a.jsxs)(o.z,{variant:"hero",size:"sm",className:"w-full text-xs",children:[(0,a.jsx)(v.Z,{className:"w-3 h-3 md:w-4 md:h-4 mr-1"}),"Analytics"]})})]})]})]})},e.id)})}):(0,a.jsxs)("div",{className:"text-center py-12 bg-card rounded-lg border border-border",children:[(0,a.jsx)(x.Z,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"No past events"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"You don't have any past events yet."})]})]}),(0,a.jsx)("div",{style:{display:"tickets"===V?"block":"none"},children:(0,a.jsx)(Y,{})}),"my-tickets"===V&&(0,a.jsxs)("div",{className:"p-3 md:p-6",children:[(0,a.jsxs)("div",{className:"mb-4 md:mb-6",children:[(0,a.jsx)("h2",{className:"text-lg md:text-2xl font-bold mb-1 md:mb-2",children:"My Purchased Tickets"}),(0,a.jsx)("p",{className:"text-xs md:text-sm text-muted-foreground",children:"Tickets you've purchased for events"})]}),el?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(Z.Z,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-primary"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Loading your tickets..."})]}):en&&0!==en.length?(0,a.jsx)("div",{className:"grid gap-3",children:en.map(e=>{var t,s;let r=e.event,l=e.ticket_type,i=(null===(t=e.qr_code_data)||void 0===t?void 0:t.qrCodeImageUrl)||(null===(s=e.qr_code_data)||void 0===s?void 0:s.qrCodeImage);return(0,a.jsx)("div",{className:"bg-card rounded-xl border border-border p-4 md:p-6 hover:shadow-lg transition-shadow",children:(0,a.jsxs)("div",{className:"flex gap-3 md:gap-4",children:[(null==r?void 0:r.image_url)&&(0,a.jsx)("div",{className:"w-20 h-20 md:w-32 md:h-32 rounded-lg overflow-hidden bg-muted shrink-0",children:(0,a.jsx)("img",{src:r.image_url,alt:r.title,className:"w-full h-full object-cover"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-2",children:[(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsx)("h3",{className:"text-base md:text-xl font-bold mb-1 truncate",children:(null==r?void 0:r.title)||"Event"}),(0,a.jsx)(c.C,{className:"text-xs",children:(null==r?void 0:r.category)||"Event"})]}),(0,a.jsx)(c.C,{variant:"valid"===e.status?"default":"used"===e.status?"secondary":"destructive",className:"shrink-0 text-xs",children:"valid"===e.status?"Valid":"used"===e.status?"Used":"Cancelled"})]}),(0,a.jsxs)("div",{className:"space-y-1.5 mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs md:text-sm text-muted-foreground",children:[(0,a.jsx)(x.Z,{className:"w-3 h-3 md:w-4 md:h-4 shrink-0"}),(0,a.jsx)("span",{className:"truncate",children:(null==r?void 0:r.date)?(0,R.WU)(new Date(r.date),"MMM d, yyyy • h:mm a"):"Date TBD"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs md:text-sm text-muted-foreground",children:[(0,a.jsx)(z.Z,{className:"w-3 h-3 md:w-4 md:h-4 shrink-0"}),(0,a.jsx)("span",{className:"truncate",children:(null==r?void 0:r.location)||"Location TBD"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 pt-3 border-t border-border",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Ticket Type"}),(0,a.jsx)("p",{className:"text-sm md:text-base font-semibold",children:(null==l?void 0:l.name)||"General Admission"}),(null==l?void 0:l.price)!==void 0&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-0.5",children:l.is_free?"Free":"₦".concat(l.price)})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(n.default,{href:"/invoice/".concat(e.order_id),className:"flex-1 sm:flex-initial",children:(0,a.jsx)(o.z,{variant:"outline",size:"sm",className:"w-full sm:w-auto text-xs",children:"See Ticket"})}),i&&(0,a.jsx)(n.default,{href:"/invoice/".concat(e.order_id),className:"flex-1 sm:flex-initial",children:(0,a.jsxs)(o.z,{variant:"hero",size:"sm",className:"w-full sm:w-auto gap-2 text-xs",children:[(0,a.jsx)(P.Z,{className:"w-3 h-3 md:w-4 md:h-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Download"})]})})]})]})]})]})},e.id)})}):(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(j,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"No tickets yet"}),(0,a.jsx)("p",{className:"text-muted-foreground mb-6",children:"You haven't purchased any tickets yet. Start exploring events!"}),(0,a.jsx)(n.default,{href:"/",children:(0,a.jsx)(o.z,{variant:"hero",children:"Browse Events"})})]})]}),(0,a.jsx)("div",{style:{display:"withdraw"===V?"block":"none"},children:(0,a.jsx)(ep,{})}),(0,a.jsx)("div",{style:{display:"settings"===V?"block":"none"},children:(0,a.jsx)(ex,{})})]}),(0,a.jsx)(m.aR,{open:J,onOpenChange:Q,children:(0,a.jsxs)(m._T,{children:[(0,a.jsxs)(m.fY,{children:[(0,a.jsx)(m.f$,{children:"Delete Event"}),(0,a.jsx)(m.yT,{children:"Are you sure you want to delete this event? This action cannot be undone. The event will be moved to deleted events."})]}),(0,a.jsxs)(m.xo,{children:[(0,a.jsx)(m.le,{onClick:()=>X(null),children:"Cancel"}),(0,a.jsx)(m.OL,{onClick:()=>{$&&(ed.mutate($),Q(!1),X(null))},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})})]}):(0,a.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"mb-2 text-lg font-semibold",children:"Authentication Required"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Please sign in to access your dashboard."}),(0,a.jsx)(n.default,{href:"/auth/signin?redirect=/dashboard/creator",children:(0,a.jsx)(o.z,{variant:"hero",children:"Sign In"})})]})})}function ev(){return(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)("div",{className:"min-h-screen bg-background",children:(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary mb-4"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Loading..."})]})})}),children:(0,a.jsx)(eb,{})})}},96215:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},83774:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},99397:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},27569:function(e,t,s){"use strict";var a=s(57437),r=s(85929),n=s(97226),l=s(12381),i=s(18873);t.Z=()=>{let{theme:e,toggleTheme:t}=(0,i.F)();return(0,a.jsx)(l.z,{variant:"ghost",size:"icon",onClick:t,className:"rounded-full",children:"dark"===e?(0,a.jsx)(r.Z,{className:"w-5 h-5"}):(0,a.jsx)(n.Z,{className:"w-5 h-5"})})}},69174:function(e,t,s){"use strict";s.d(t,{C:function(){return i}});var a=s(57437);s(2265);var r=s(90535),n=s(93448);let l=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:s,...r}=e;return(0,a.jsx)("div",{className:(0,n.cn)(l({variant:s}),t),...r})}},2596:function(e,t,s){"use strict";s.d(t,{di:function(){return x},e8:function(){return c},fu:function(){return u},mY:function(){return d},rb:function(){return m},sZ:function(){return o}});var a=s(57437),r=s(2265),n=s(46343),l=s(73247),i=s(93448);s(74291);let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.mY,{ref:t,className:(0,i.cn)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",s),...r})});d.displayName=n.mY.displayName;let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsxs)("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[(0,a.jsx)(l.Z,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,a.jsx)(n.mY.Input,{ref:t,className:(0,i.cn)("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",s),...r})]})});o.displayName=n.mY.Input.displayName;let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.mY.List,{ref:t,className:(0,i.cn)("max-h-[300px] overflow-y-auto overflow-x-hidden",s),...r})});c.displayName=n.mY.List.displayName;let m=r.forwardRef((e,t)=>(0,a.jsx)(n.mY.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));m.displayName=n.mY.Empty.displayName;let u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.mY.Group,{ref:t,className:(0,i.cn)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",s),...r})});u.displayName=n.mY.Group.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.mY.Separator,{ref:t,className:(0,i.cn)("-mx-1 h-px bg-border",s),...r})}).displayName=n.mY.Separator.displayName;let x=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.mY.Item,{ref:t,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",s),...r})});x.displayName=n.mY.Item.displayName},74291:function(e,t,s){"use strict";s.d(t,{$N:function(){return h},Be:function(){return f},Vq:function(){return d},cN:function(){return x},cZ:function(){return m},fK:function(){return u}});var a=s(57437),r=s(2265),n=s(49027),l=s(32489),i=s(93448);let d=n.fC;n.xz;let o=n.h_;n.x8;let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.aV,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r})});c.displayName=n.aV.displayName;let m=r.forwardRef((e,t)=>{let{className:s,children:r,...d}=e;return(0,a.jsxs)(o,{children:[(0,a.jsx)(c,{}),(0,a.jsxs)(n.VY,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...d,children:[r,(0,a.jsxs)(n.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[(0,a.jsx)(l.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=n.VY.displayName;let u=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};u.displayName="DialogHeader";let x=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};x.displayName="DialogFooter";let h=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.Dx,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",s),...r})});h.displayName=n.Dx.displayName;let f=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.dk,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",s),...r})});f.displayName=n.dk.displayName},12749:function(e,t,s){"use strict";s.d(t,{J2:function(){return i},xo:function(){return d},yk:function(){return o}});var a=s(57437),r=s(2265),n=s(27312),l=s(93448);let i=n.fC,d=n.xz,o=r.forwardRef((e,t)=>{let{className:s,align:r="center",sideOffset:i=4,...d}=e;return(0,a.jsx)(n.h_,{children:(0,a.jsx)(n.VY,{ref:t,align:r,sideOffset:i,className:(0,l.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...d})})});o.displayName=n.VY.displayName},86700:function(e,t,s){"use strict";s.d(t,{E:function(){return d},m:function(){return o}});var a=s(57437),r=s(2265),n=s(42325),l=s(40519),i=s(93448);let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.fC,{className:(0,i.cn)("grid gap-2",s),...r,ref:t})});d.displayName=n.fC.displayName;let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.ck,{ref:t,className:(0,i.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...r,children:(0,a.jsx)(n.z$,{className:"flex items-center justify-center",children:(0,a.jsx)(l.Z,{className:"h-2.5 w-2.5 fill-current text-current"})})})});o.displayName=n.ck.displayName},23554:function(e,t,s){"use strict";s.d(t,{u:function(){return a}});let a=["Covenant University, Ota","Babcock University, Ilishan-Remo","Bells University of Technology, Otta","American University of Nigeria, Yola","Bingham University, New Karu","Bowen University, Iwo","Igbinedion University, Okada","Landmark University, Omu-Aran","Lead City University, Ibadan","Madonna University, Okija","Redeemer's University, Ede","Pan-Atlantic University, Lagos","Afe Babalola University, Ado-Ekiti","Al-Hikmah University, Ilorin","Crescent University, Abeokuta","Elizade University, Ilara-Mokin","Joseph Ayo Babalola University, Ikeji-Arakeji","Micheal & Cecilia Ibru University","Oduduwa University, Ipetumodu","Veritas University, Abuja","ABTI-American University of Nigeria, Yola","Achievers University, Owo","Adeleke University, Ede","Augustine University, Ilara-Epe","Baze University, Abuja","Benson Idahosa University, Benin City","Caleb University, Lagos","Caritas University, Enugu","Chrisland University, Abeokuta","Christopher University, Mowe","Crawford University, Igbesa","Edwin Clark University, Kiagbodo","Evangel University, Akaeze","Fountain University, Oshogbo","Godfrey Okoye University, Ugwuomu-Nike","Gregory University, Uturu","Hallmark University, Ijebu-Itele","Hezekiah University, Umudi","Kings University, Ode-Omu","Kola Daisi University, Ibadan","McPherson University, Seriki Sotayo","Micheal & Cecilia Ibru University, Owhrode","Mountain Top University, Makogi/Ogun","Nigerian British University, Asa","Nigerian Turkish Nile University, Abuja","Novena University, Ogume","Obong University, Obong Ntak","Paul University, Awka","Precious Cornerstone University, Ibadan","Renaissance University, Enugu","Rhema University, Obeama-Asa","Ritman University, Ikot Ekpene","Salerno University, Lagos","Samuel Adegboyega University, Ogwa","Southwestern University, Okun Owa","Summit University, Offa","Tansian University, Umunya","University of Mkar, Mkar","Wellspring University, Irhirhi, Benin City","Wesley University, Ondo","Western Delta University, Oghara"]},18873:function(e,t,s){"use strict";s.d(t,{F:function(){return i},f:function(){return l}});var a=s(57437),r=s(2265);let n=(0,r.createContext)(void 0),l=e=>{let{children:t}=e,[s,l]=(0,r.useState)("light"),[i,d]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{d(!0);let e=localStorage.getItem("theme");e&&("light"===e||"dark"===e)?l(e):l(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")},[]),(0,r.useEffect)(()=>{if(!i)return;let e=window.document.documentElement;e.classList.remove("light","dark"),e.classList.add(s),localStorage.setItem("theme",s)},[s,i]),(0,a.jsx)(n.Provider,{value:{theme:s,toggleTheme:()=>{l(e=>"light"===e?"dark":"light")}},children:t})},i=()=>{let e=(0,r.useContext)(n);if(!e)throw Error("useTheme must be used within a ThemeProvider");return e}},25658:function(e,t,s){"use strict";s.d(t,{G5:function(){return d},Uc:function(){return l},Wb:function(){return i},m5:function(){return c},s4:function(){return o}});var a,r=s(40257);let n=(void 0!==r?null===(a=r.env)||void 0===a?void 0:"pk_test_305a29a2af6419e97f6aaf29d62c648d334d8a1c":void 0)||"";n||console.warn("Paystack public key is not set. Payment functionality will not work.");let l=()=>{if(!window.PaystackPop&&n){let e=document.createElement("script");return e.src="https://js.paystack.co/v1/inline.js",e.async=!0,document.head.appendChild(e),new Promise(t=>{e.onload=()=>t()})}return Promise.resolve()},i=e=>{if(!window.PaystackPop){console.error("Paystack not loaded");return}window.PaystackPop.setup({key:n,email:e.email,amount:100*e.amount,ref:e.ref,currency:e.currency||"NGN",metadata:e.metadata,callback:t=>{e.callback&&e.callback(t)},onClose:()=>{e.onClose&&e.onClose()}}).openIframe()},d=async()=>{try{try{let e=await fetch("/api/get-banks",{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok){let t=await e.json().catch(()=>({}));throw Error(t.error||"HTTP error! status: ".concat(e.status))}let t=await e.json();if(t.error)throw Error(t.error);let s=t.banks||[];return console.log("Banks from API route:",s.length,"banks"),0===s.length&&console.warn("Empty banks array returned"),s}catch(n){console.warn("API route failed, trying edge function:",n.message);let{supabase:e}=await Promise.resolve().then(s.bind(s,5526)),{data:{session:t}}=await e.auth.getSession(),{data:a,error:r}=await e.functions.invoke("get-paystack-banks",{headers:{Authorization:t?"Bearer ".concat(t.access_token):""}});if(r)throw r;if(!a)throw Error("No response from bank service");if(a.error)throw Error(a.error);return a.banks||[]}}catch(t){console.error("Error fetching banks:",t);let e=t.message||JSON.stringify(t);if(e.includes("not found")||e.includes("404")||e.includes("Function not found")||e.includes("Failed to send")||e.includes("CORS"))throw Error("Bank service is not available. Please check your environment variables (PAYSTACK_SECRET_KEY) and try again.");throw Error(t.message||"Failed to fetch banks. Please try again.")}},o=async e=>{try{if(!e.account_number||!e.bank_code)return{verified:!1,error:"Account number and bank code are required"};if(10!==e.account_number.length)return{verified:!1,error:"Account number must be exactly 10 digits"};try{let t=await fetch("/api/verify-bank-account",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=await t.json().catch(()=>({}));throw Error(e.error||"HTTP error! status: ".concat(t.status))}let s=await t.json();if(s.error)return{verified:!1,error:s.error};return{verified:s.verified||!1,account_name:s.account_name,account_number:s.account_number,bank_id:s.bank_id}}catch(l){console.warn("API route failed, trying edge function:",l.message);let{supabase:t}=await Promise.resolve().then(s.bind(s,5526)),{data:{session:a}}=await t.auth.getSession(),{data:r,error:n}=await t.functions.invoke("verify-bank-account",{body:e,headers:{Authorization:a?"Bearer ".concat(a.access_token):""}});if(n)throw n;if(!r)return{verified:!1,error:"No response from verification service"};if(r.error)return{verified:!1,error:r.error};return{verified:r.verified||!1,account_name:r.account_name,account_number:r.account_number,bank_id:r.bank_id}}}catch(t){console.error("Bank verification error:",t);let e=t.message||JSON.stringify(t);if(e.includes("not found")||e.includes("404")||e.includes("Function not found")||e.includes("Failed to send")||e.includes("CORS"))return{verified:!1,error:"Bank verification service is not available. Please check your environment variables (PAYSTACK_SECRET_KEY) and try again."};return{verified:!1,error:t.message||"Failed to verify bank account. Please try again."}}},c=async(e,t)=>{try{try{let s=await fetch("/api/verify-payment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:e,paystackReference:t})});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error(e.error||"HTTP error! status: ".concat(s.status))}return await s.json()}catch(i){console.warn("API route failed, trying edge function:",i.message);let{supabase:a}=await Promise.resolve().then(s.bind(s,5526)),{data:{session:r}}=await a.auth.getSession(),{data:n,error:l}=await a.functions.invoke("verify-payment",{body:{orderId:e,paystackReference:t},headers:{Authorization:r?"Bearer ".concat(r.access_token):"","Content-Type":"application/json"}});if(l)throw l;if(!n)throw Error("No response from verification service");return n}}catch(t){console.error("Payment verification error:",t);let e=t.message||JSON.stringify(t);if(e.includes("not found")||e.includes("404")||e.includes("Function not found")||e.includes("Failed to send")||e.includes("CORS"))return{verified:!1,error:"Payment verification service error. Please check your environment variables (PAYSTACK_SECRET_KEY, SUPABASE_SERVICE_ROLE_KEY) and try again."};return{verified:!1,error:t.message||"Failed to verify payment. Please try again."}}}},42325:function(e,t,s){"use strict";s.d(t,{ck:function(){return M},fC:function(){return R},z$:function(){return q}});var a=s(2265),r=s(6741),n=s(98575),l=s(73966),i=s(66840),d=s(1353),o=s(80886),c=s(29114),m=s(90420),u=s(6718),x=s(71599),h=s(57437),f="Radio",[p,b]=(0,l.b)(f),[v,g]=p(f),j=a.forwardRef((e,t)=>{let{__scopeRadio:s,name:l,checked:d=!1,required:o,disabled:c,value:m="on",onCheck:u,form:x,...f}=e,[p,b]=a.useState(null),g=(0,n.e)(t,e=>b(e)),j=a.useRef(!1),y=!p||x||!!p.closest("form");return(0,h.jsxs)(v,{scope:s,checked:d,disabled:c,children:[(0,h.jsx)(i.WV.button,{type:"button",role:"radio","aria-checked":d,"data-state":k(d),"data-disabled":c?"":void 0,disabled:c,value:m,...f,ref:g,onClick:(0,r.M)(e.onClick,e=>{d||null==u||u(),y&&(j.current=e.isPropagationStopped(),j.current||e.stopPropagation())})}),y&&(0,h.jsx)(w,{control:p,bubbles:!j.current,name:l,value:m,checked:d,required:o,disabled:c,form:x,style:{transform:"translateX(-100%)"}})]})});j.displayName=f;var y="RadioIndicator",N=a.forwardRef((e,t)=>{let{__scopeRadio:s,forceMount:a,...r}=e,n=g(y,s);return(0,h.jsx)(x.z,{present:a||n.checked,children:(0,h.jsx)(i.WV.span,{"data-state":k(n.checked),"data-disabled":n.disabled?"":void 0,...r,ref:t})})});N.displayName=y;var w=a.forwardRef((e,t)=>{let{__scopeRadio:s,control:r,checked:l,bubbles:d=!0,...o}=e,c=a.useRef(null),x=(0,n.e)(c,t),f=(0,u.D)(l),p=(0,m.t)(r);return a.useEffect(()=>{let e=c.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(f!==l&&t){let s=new Event("click",{bubbles:d});t.call(e,l),e.dispatchEvent(s)}},[f,l,d]),(0,h.jsx)(i.WV.input,{type:"radio","aria-hidden":!0,defaultChecked:l,...o,tabIndex:-1,ref:x,style:{...o.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function k(e){return e?"checked":"unchecked"}w.displayName="RadioBubbleInput";var _=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],C="RadioGroup",[S,E]=(0,l.b)(C,[d.Pc,b]),A=(0,d.Pc)(),T=b(),[Z,z]=S(C),P=a.forwardRef((e,t)=>{let{__scopeRadioGroup:s,name:a,defaultValue:r,value:n,required:l=!1,disabled:m=!1,orientation:u,dir:x,loop:f=!0,onValueChange:p,...b}=e,v=A(s),g=(0,c.gm)(x),[j,y]=(0,o.T)({prop:n,defaultProp:null!=r?r:null,onChange:p,caller:C});return(0,h.jsx)(Z,{scope:s,name:a,required:l,disabled:m,value:j,onValueChange:y,children:(0,h.jsx)(d.fC,{asChild:!0,...v,orientation:u,dir:g,loop:f,children:(0,h.jsx)(i.WV.div,{role:"radiogroup","aria-required":l,"aria-orientation":u,"data-disabled":m?"":void 0,dir:g,...b,ref:t})})})});P.displayName=C;var U="RadioGroupItem",F=a.forwardRef((e,t)=>{let{__scopeRadioGroup:s,disabled:l,...i}=e,o=z(U,s),c=o.disabled||l,m=A(s),u=T(s),x=a.useRef(null),f=(0,n.e)(t,x),p=o.value===i.value,b=a.useRef(!1);return a.useEffect(()=>{let e=e=>{_.includes(e.key)&&(b.current=!0)},t=()=>b.current=!1;return document.addEventListener("keydown",e),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}},[]),(0,h.jsx)(d.ck,{asChild:!0,...m,focusable:!c,active:p,children:(0,h.jsx)(j,{disabled:c,required:o.required,checked:p,...u,...i,name:o.name,ref:f,onCheck:()=>o.onValueChange(i.value),onKeyDown:(0,r.M)(e=>{"Enter"===e.key&&e.preventDefault()}),onFocus:(0,r.M)(i.onFocus,()=>{var e;b.current&&(null===(e=x.current)||void 0===e||e.click())})})})});F.displayName=U;var L=a.forwardRef((e,t)=>{let{__scopeRadioGroup:s,...a}=e,r=T(s);return(0,h.jsx)(N,{...r,...a,ref:t})});L.displayName="RadioGroupIndicator";var R=P,M=F,q=L}},function(e){e.O(0,[3227,4182,2972,5506,2642,3850,5730,758,5256,1713,4438,6818,4677,7788,9913,8748,2971,2117,1744],function(){return e(e.s=22058)}),_N_E=e.O()}]);